/*! For license information please see main.a565b59d.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,d=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function b(){}function x(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var y=x.prototype=new b;y.constructor=x,g(y,v.prototype),y.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,i){var r,s={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,r)&&!_.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var M=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,r,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===s?"."+E(l,0):s,w(a)?(r="",null!=e&&(r=e.replace(M,"$&/")+"/"),T(a,t,r,"",function(e){return e})):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(M,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var d=s+E(o=e[c],c);l+=T(o,t,r,d,a)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,r,d=s+E(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var i=[],r=0;return T(e,i,"","",function(e){return t.call(n,e,r++)}),i}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},I={transition:null},L={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:I,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=x,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=D,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!_.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<r&&0>s(d,l)?(e[i]=d,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(d,n)))break e;e[i]=d,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,u=null,p=3,f=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=i(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,n(c,t)}t=i(d)}}function w(e){if(m=!1,y(e),!g)if(null!==i(c))g=!0,I(k);else{var t=i(d);null!==t&&L(w,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,b(C),C=-1),f=!0;var s=p;try{for(y(n),u=i(c);null!==u&&(!(u.expirationTime>n)||e&&!T());){var a=u.callback;if("function"===typeof a){u.callback=null,p=u.priorityLevel;var o=a(u.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?u.callback=o:u===i(c)&&r(c),y(n)}else r(c);u=i(c)}if(null!==u)var l=!0;else{var h=i(d);null!==h&&L(w,h.startTime-n),l=!1}return l}finally{u=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,A=null,C=-1,M=5,E=-1;function T(){return!(t.unstable_now()-E<M)}function R(){if(null!==A){var e=t.unstable_now();E=e;var n=!0;try{n=A(!0,e)}finally{n?S():(_=!1,A=null)}}else _=!1}if("function"===typeof x)S=function(){x(R)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,P=j.port2;j.port1.onmessage=R,S=function(){P.postMessage(null)}}else S=function(){v(R,0)};function I(e){A=e,_||(_=!0,S())}function L(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,I(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(d,e),null===i(c)&&e===i(d)&&(m?(b(C),C=-1):m=!0,L(w,s-a))):(e.sortIndex=o,n(c,e),g||f||(g=!0,I(k))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var i=n(43),r=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,n,i,r,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function x(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(f,e)||!h.call(p,e)&&(u.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,b);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),M=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var F,N=Object.assign;function B(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var z=!1;function W(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function O(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case A:return"Profiler";case _:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=G(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function J(e,t){$(e,t);var n=V(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function se(e,t){var n=V(t.value),i=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,he=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function ue(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,_e=null;function Ae(e){if(e=xr(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=wr(t),ke(e.stateNode,e.type,t))}}function Ce(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Me(){if(Se){var e=Se,t=_e;if(_e=Se=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ee(e,t){return e(t)}function Te(){}var Re=!1;function je(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ee(e,t,n)}finally{Re=!1,(null!==Se||null!==_e)&&(Te(),Me())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var i=wr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ie=!1;if(d)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(de){Ie=!1}function De(e,t,n,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Fe=!1,Ne=null,Be=!1,ze=null,We={onError:function(e){Fe=!0,Ne=e}};function Oe(e,t,n,i,r,s,a,o,l){Fe=!1,Ne=null,De.apply(We,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(He(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Ve(r),e;if(a===i)return Ve(r),t;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ye=r.unstable_scheduleCallback,Xe=r.unstable_cancelCallback,Ke=r.unstable_shouldYield,Qe=r.unstable_requestPaint,$e=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=ht(o):0!==(s&=a)&&(i=ht(s))}else 0!==(a=n&~r)?i=ht(a):0!==s&&(i=ht(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var xt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,_t,At,Ct=!1,Mt=[],Et=null,Tt=null,Rt=null,jt=new Map,Pt=new Map,It=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Ft(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=xr(t))&&kt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Nt(e){var t=br(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void At(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xr(n))&&kt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);ye=i,n.target.dispatchEvent(i),ye=null,t.shift()}return!0}function zt(e,t,n){Bt(e)&&n.delete(t)}function Wt(){Ct=!1,null!==Et&&Bt(Et)&&(Et=null),null!==Tt&&Bt(Tt)&&(Tt=null),null!==Rt&&Bt(Rt)&&(Rt=null),jt.forEach(zt),Pt.forEach(zt)}function Ot(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Wt)))}function Ht(e){function t(t){return Ot(t,e)}if(0<Mt.length){Ot(Mt[0],e);for(var n=1;n<Mt.length;n++){var i=Mt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Et&&Ot(Et,e),null!==Tt&&Ot(Tt,e),null!==Rt&&Ot(Rt,e),jt.forEach(t),Pt.forEach(t),n=0;n<It.length;n++)(i=It[n]).blockedOn===e&&(i.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Nt(n),null===n.blockedOn&&It.shift()}var Ut=y.ReactCurrentBatchConfig,Vt=!0;function Gt(e,t,n,i){var r=xt,s=Ut.transition;Ut.transition=null;try{xt=1,Yt(e,t,n,i)}finally{xt=r,Ut.transition=s}}function qt(e,t,n,i){var r=xt,s=Ut.transition;Ut.transition=null;try{xt=4,Yt(e,t,n,i)}finally{xt=r,Ut.transition=s}}function Yt(e,t,n,i){if(Vt){var r=Kt(e,t,n,i);if(null===r)Vi(e,t,i,Xt,n),Dt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Et=Ft(Et,e,t,n,i,r),!0;case"dragenter":return Tt=Ft(Tt,e,t,n,i,r),!0;case"mouseover":return Rt=Ft(Rt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return jt.set(s,Ft(jt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Pt.set(s,Ft(Pt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Dt(e,i),4&t&&-1<Lt.indexOf(e)){for(;null!==r;){var s=xr(r);if(null!==s&&wt(s),null===(s=Kt(e,t,n,i))&&Vi(e,t,i,Xt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Vi(e,t,i,null,n)}}var Xt=null;function Kt(e,t,n,i){if(Xt=null,null!==(e=br(e=we(i))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,r="value"in $t?$t.value:$t.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),hn=N({},cn,{view:0,detail:0}),un=sn(hn),pn=N({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=sn(pn),gn=sn(N({},pn,{dataTransfer:0})),mn=sn(N({},hn,{relatedTarget:0})),vn=sn(N({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=N({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(bn),yn=sn(N({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function An(){return _n}var Cn=N({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Mn=sn(Cn),En=sn(N({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(N({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Rn=sn(N({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=N({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(jn),In=[9,13,27,32],Ln=d&&"CompositionEvent"in window,Dn=null;d&&"documentMode"in document&&(Dn=document.documentMode);var Fn=d&&"TextEvent"in window&&!Dn,Nn=d&&(!Ln||Dn&&8<Dn&&11>=Dn),Bn=String.fromCharCode(32),zn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function On(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Gn(e,t,n,i){Ce(i),0<(t=qi(t,"onChange")).length&&(n=new dn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var qn=null,Yn=null;function Xn(e){Bi(e,0)}function Kn(e){if(Y(yr(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(d){var Jn;if(d){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){qn&&(qn.detachEvent("onpropertychange",ni),Yn=qn=null)}function ni(e){if("value"===e.propertyName&&Kn(Yn)){var t=[];Gn(t,Yn,e,we(e)),je(Xn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Yn=n,(qn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Yn)}function si(e,t){if("click"===e)return Kn(t)}function ai(e,t){if("input"===e||"change"===e)return Kn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!oi(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function di(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ui(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=ui(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=di(n,s);var a=di(n,i);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=d&&"documentMode"in document&&11>=document.documentMode,mi=null,vi=null,bi=null,xi=!1;function yi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xi||null==mi||mi!==X(i)||("selectionStart"in(i=mi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},bi&&li(bi,i)||(bi=i,0<(i=qi(vi,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function wi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ki={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Si={},_i={};function Ai(e){if(Si[e])return Si[e];if(!ki[e])return e;var t,n=ki[e];for(t in n)if(n.hasOwnProperty(t)&&t in _i)return Si[e]=n[t];return e}d&&(_i=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);var Ci=Ai("animationend"),Mi=Ai("animationiteration"),Ei=Ai("animationstart"),Ti=Ai("transitionend"),Ri=new Map,ji="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(e,t){Ri.set(e,t),l(t,[e])}for(var Ii=0;Ii<ji.length;Ii++){var Li=ji[Ii];Pi(Li.toLowerCase(),"on"+(Li[0].toUpperCase()+Li.slice(1)))}Pi(Ci,"onAnimationEnd"),Pi(Mi,"onAnimationIteration"),Pi(Ei,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(Ti,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function Ni(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,o,l,c){if(Oe.apply(this,arguments),Fe){if(!Fe)throw Error(s(198));var d=Ne;Fe=!1,Ne=null,Be||(Be=!0,ze=d)}}(i,t,void 0,e),e.currentTarget=null}function Bi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;Ni(r,o,c),s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;Ni(r,o,c),s=l}}}if(Be)throw e=ze,Be=!1,ze=null,e}function zi(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var i=e+"__bubble";n.has(i)||(Ui(t,e,2,!1),n.add(i))}function Wi(e,t,n){var i=0;t&&(i|=4),Ui(n,e,i,t)}var Oi="_reactListening"+Math.random().toString(36).slice(2);function Hi(e){if(!e[Oi]){e[Oi]=!0,a.forEach(function(t){"selectionchange"!==t&&(Fi.has(t)||Wi(t,!1,e),Wi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Oi]||(t[Oi]=!0,Wi("selectionchange",!1,t))}}function Ui(e,t,n,i){switch(Qt(t)){case 1:var r=Gt;break;case 4:r=qt;break;default:r=Yt}n=r.bind(null,t,n,e),r=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Vi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=br(o)))return;if(5===(l=a.tag)||6===l){i=s=a;continue e}o=o.parentNode}}i=i.return}je(function(){var i=s,r=we(n),a=[];e:{var o=Ri.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Mn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Ci:case Mi:case Ei:l=vn;break;case Ti:l=Rn;break;case"scroll":l=un;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var d=0!==(4&t),h=!d&&"scroll"===e,u=d?null!==o?o+"Capture":null:o;d=[];for(var p,f=i;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==u&&(null!=(g=Pe(f,u))&&d.push(Gi(f,g,p)))),h)break;f=f.return}0<d.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ye||!(c=n.relatedTarget||n.fromElement)||!br(c)&&!c[fr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?br(c):null)&&(c!==(h=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(d=fn,g="onMouseLeave",u="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=En,g="onPointerLeave",u="onPointerEnter",f="pointer"),h=null==l?o:yr(l),p=null==c?o:yr(c),(o=new d(g,f+"leave",l,n,r)).target=h,o.relatedTarget=p,g=null,br(r)===i&&((d=new d(u,f+"enter",c,n,r)).target=p,d.relatedTarget=h,g=d),h=g,l&&c)e:{for(u=c,f=0,p=d=l;p;p=Yi(p))f++;for(p=0,g=u;g;g=Yi(g))p++;for(;0<f-p;)d=Yi(d),f--;for(;0<p-f;)u=Yi(u),p--;for(;f--;){if(d===u||null!==u&&d===u.alternate)break e;d=Yi(d),u=Yi(u)}d=null}else d=null;null!==l&&Xi(a,o,l,d,!1),null!==c&&null!==h&&Xi(a,h,c,d,!0)}if("select"===(l=(o=i?yr(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Qn;else if(Vn(o))if($n)m=ai;else{m=ri;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=si);switch(m&&(m=m(e,i))?Gn(a,m,n,r):(v&&v(e,o,i),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=i?yr(i):window,e){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(mi=v,vi=i,bi=null);break;case"focusout":bi=vi=mi=null;break;case"mousedown":xi=!0;break;case"contextmenu":case"mouseup":case"dragend":xi=!1,yi(a,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":yi(a,n,r)}var b;if(Ln)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Hn?Wn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Nn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Hn&&(b=en()):(Jt="value"in($t=r)?$t.value:$t.textContent,Hn=!0)),0<(v=qi(i,x)).length&&(x=new yn(x,e,null,n,r),a.push({event:x,listeners:v}),b?x.data=b:null!==(b=On(n))&&(x.data=b))),(b=Fn?function(e,t){switch(e){case"compositionend":return On(t);case"keypress":return 32!==t.which?null:(zn=!0,Bn);case"textInput":return(e=t.data)===Bn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Ln&&Wn(e,t)?(e=en(),Zt=Jt=$t=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(r=new yn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=b))}Bi(a,t)})}function Gi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Pe(e,n))&&i.unshift(Gi(e,s,r)),null!=(s=Pe(e,t))&&i.push(Gi(e,s,r))),e=e.return}return i}function Yi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xi(e,t,n,i,r){for(var s=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Pe(n,s))&&a.unshift(Gi(n,l,o)):r||null!=(l=Pe(n,s))&&a.push(Gi(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Ki=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function $i(e){return("string"===typeof e?e:""+e).replace(Ki,"\n").replace(Qi,"")}function Ji(e,t,n){if(t=$i(t),$i(e)!==t&&n)throw Error(s(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(or)}:ir;function or(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Ht(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ht(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),ur="__reactFiber$"+hr,pr="__reactProps$"+hr,fr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,vr="__reactHandles$"+hr;function br(e){var t=e[ur];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[ur]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=dr(e);null!==e;){if(n=e[ur])return n;e=dr(e)}return t}n=(e=n).parentNode}return null}function xr(e){return!(e=e[ur]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wr(e){return e[pr]||null}var kr=[],Sr=-1;function _r(e){return{current:e}}function Ar(e){0>Sr||(e.current=kr[Sr],kr[Sr]=null,Sr--)}function Cr(e,t){Sr++,kr[Sr]=e.current,e.current=t}var Mr={},Er=_r(Mr),Tr=_r(!1),Rr=Mr;function jr(e,t){var n=e.type.contextTypes;if(!n)return Mr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ir(){Ar(Tr),Ar(Er)}function Lr(e,t,n){if(Er.current!==Mr)throw Error(s(168));Cr(Er,t),Cr(Tr,n)}function Dr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,U(e)||"Unknown",r));return N({},n,i)}function Fr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mr,Rr=Er.current,Cr(Er,e),Cr(Tr,Tr.current),!0}function Nr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Dr(e,t,Rr),i.__reactInternalMemoizedMergedChildContext=e,Ar(Tr),Ar(Er),Cr(Er,e)):Ar(Tr),Cr(Tr,n)}var Br=null,zr=!1,Wr=!1;function Or(e){null===Br?Br=[e]:Br.push(e)}function Hr(){if(!Wr&&null!==Br){Wr=!0;var e=0,t=xt;try{var n=Br;for(xt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Br=null,zr=!1}catch(r){throw null!==Br&&(Br=Br.slice(e+1)),Ye(Ze,Hr),r}finally{xt=t,Wr=!1}}return null}var Ur=[],Vr=0,Gr=null,qr=0,Yr=[],Xr=0,Kr=null,Qr=1,$r="";function Jr(e,t){Ur[Vr++]=qr,Ur[Vr++]=Gr,Gr=e,qr=t}function Zr(e,t,n){Yr[Xr++]=Qr,Yr[Xr++]=$r,Yr[Xr++]=Kr,Kr=e;var i=Qr;e=$r;var r=32-at(i)-1;i&=~(1<<r),n+=1;var s=32-at(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Qr=1<<32-at(t)+r|n<<r|i,$r=s+e}else Qr=1<<s|n<<r|i,$r=e}function es(e){null!==e.return&&(Jr(e,1),Zr(e,1,0))}function ts(e){for(;e===Gr;)Gr=Ur[--Vr],Ur[Vr]=null,qr=Ur[--Vr],Ur[Vr]=null;for(;e===Kr;)Kr=Yr[--Xr],Yr[Xr]=null,$r=Yr[--Xr],Yr[Xr]=null,Qr=Yr[--Xr],Yr[Xr]=null}var ns=null,is=null,rs=!1,ss=null;function as(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Kr?{id:Qr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&os(e,t)?as(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!rs)return ds(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw us(),Error(s(418));for(;t;)as(e,t),t=cr(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function us(){for(var e=is;e;)e=cr(e.nextSibling)}function ps(){is=ns=null,rs=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var gs=y.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Nc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===S?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&bs(s)===t.type)?((i=r(t,n.props)).ref=ms(e,t,n),i.return=e,i):((i=Lc(n.type,n.key,n.props,null,e.mode,i)).ref=ms(e,t,n),i.return=e,i)}function d(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,s){return null===t||7!==t.tag?((t=Dc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function u(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Nc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case k:return(t=Bc(t,e.mode,n)).return=e,t;case P:return u(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,i):null;case k:return n.key===r?d(e,t,n,i):null;case P:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||D(n))return null!==r?null:h(e,t,n,i,null);vs(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case k:return d(t,e=e.get(null===i.key?n:i.key)||null,i,r);case P:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||D(i))return h(t,e=e.get(n)||null,i,r,null);vs(t,i)}return null}function g(r,s,o,l){for(var c=null,d=null,h=s,g=s=0,m=null;null!==h&&g<o.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=p(r,h,o[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(r,h),s=a(v,s,g),null===d?c=v:d.sibling=v,d=v,h=m}if(g===o.length)return n(r,h),rs&&Jr(r,g),c;if(null===h){for(;g<o.length;g++)null!==(h=u(r,o[g],l))&&(s=a(h,s,g),null===d?c=h:d.sibling=h,d=h);return rs&&Jr(r,g),c}for(h=i(r,h);g<o.length;g++)null!==(m=f(h,r,g,o[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=a(m,s,g),null===d?c=m:d.sibling=m,d=m);return e&&h.forEach(function(e){return t(r,e)}),rs&&Jr(r,g),c}function m(r,o,l,c){var d=D(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var h=d=null,g=o,m=o=0,v=null,b=l.next();null!==g&&!b.done;m++,b=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var x=p(r,g,b.value,c);if(null===x){null===g&&(g=v);break}e&&g&&null===x.alternate&&t(r,g),o=a(x,o,m),null===h?d=x:h.sibling=x,h=x,g=v}if(b.done)return n(r,g),rs&&Jr(r,m),d;if(null===g){for(;!b.done;m++,b=l.next())null!==(b=u(r,b.value,c))&&(o=a(b,o,m),null===h?d=b:h.sibling=b,h=b);return rs&&Jr(r,m),d}for(g=i(r,g);!b.done;m++,b=l.next())null!==(b=f(g,r,m,b.value,c))&&(e&&null!==b.alternate&&g.delete(null===b.key?m:b.key),o=a(b,o,m),null===h?d=b:h.sibling=b,h=b);return e&&g.forEach(function(e){return t(r,e)}),rs&&Jr(r,m),d}return function e(i,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,d=s;null!==d;){if(d.key===c){if((c=a.type)===S){if(7===d.tag){n(i,d.sibling),(s=r(d,a.props.children)).return=i,i=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&bs(c)===d.type){n(i,d.sibling),(s=r(d,a.props)).ref=ms(i,d,a),s.return=i,i=s;break e}n(i,d);break}t(i,d),d=d.sibling}a.type===S?((s=Dc(a.props.children,i.mode,l,a.key)).return=i,i=s):((l=Lc(a.type,a.key,a.props,null,i.mode,l)).ref=ms(i,s,a),l.return=i,i=l)}return o(i);case k:e:{for(d=a.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=Bc(a,i.mode,l)).return=i,i=s}return o(i);case P:return e(i,s,(d=a._init)(a._payload),l)}if(te(a))return g(i,s,a,l);if(D(a))return m(i,s,a,l);vs(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=Nc(a,i.mode,l)).return=i,i=s),o(i)):n(i,s)}}var ys=xs(!0),ws=xs(!1),ks=_r(null),Ss=null,_s=null,As=null;function Cs(){As=_s=Ss=null}function Ms(e){var t=ks.current;Ar(ks),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ts(e,t){Ss=e,As=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(As!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===Ss)throw Error(s(308));_s=e,Ss.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var js=null;function Ps(e){null===js?js=[e]:js.push(e)}function Is(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ps(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ls(e,i)}function Ls(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function Fs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ns(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&El)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Ls(e,n)}return null===(r=i.interleaved)?(t.next=t,Ps(i)):(t.next=r.next,r.next=t),i.interleaved=t,Ls(e,n)}function Ws(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Os(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hs(e,t,n,i){var r=e.updateQueue;Ds=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(a=0,d=c=l=null,o=s;;){var u=o.lane,p=o.eventTime;if((i&u)===u){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,g=o;switch(u=t,p=n,g.tag){case 1:if("function"===typeof(f=g.payload)){h=f.call(p,h,u);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(u="function"===typeof(f=g.payload)?f.call(p,h,u):f)||void 0===u)break e;h=N({},h,u);break e;case 2:Ds=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(u=r.effects)?r.effects=[o]:u.push(o))}else p={eventTime:p,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=h):d=d.next=p,a|=u;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(u=o).next,u.next=null,r.lastBaseUpdate=u,r.shared.pending=null}}if(null===d&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Vs={},Gs=_r(Vs),qs=_r(Vs),Ys=_r(Vs);function Xs(e){if(e===Vs)throw Error(s(174));return e}function Ks(e,t){switch(Cr(Ys,t),Cr(qs,e),Cr(Gs,Vs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ar(Gs),Cr(Gs,t)}function Qs(){Ar(Gs),Ar(qs),Ar(Ys)}function $s(e){Xs(Ys.current);var t=Xs(Gs.current),n=le(t,e.type);t!==n&&(Cr(qs,e),Cr(Gs,n))}function Js(e){qs.current===e&&(Ar(Gs),Ar(qs))}var Zs=_r(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ia=y.ReactCurrentDispatcher,ra=y.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,da=!1,ha=0,ua=0;function pa(){throw Error(s(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function ga(e,t,n,i,r,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Ja:Za,e=n(i,r),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ia.current=eo,e=n(i,r)}while(da)}if(ia.current=$a,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ma(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ba(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function xa(e,t){return"function"===typeof t?t(e):t}function ya(e){var t=ba(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=oa,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=o=null,c=null,d=a;do{var h=d.lane;if((sa&h)===h)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var u={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=u,o=i):c=c.next=u,aa.lanes|=h,Fl|=h}d=d.next}while(null!==d&&d!==a);null===c?o=i:c.next=l,oi(i,t.memoizedState)||(xo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,aa.lanes|=a,Fl|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ba(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);oi(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function ka(){}function Sa(e,t){var n=aa,i=ba(),r=t(),a=!oi(i.memoizedState,r);if(a&&(i.memoizedState=r,xo=!0),i=i.queue,Da(Ca.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ra(9,Aa.bind(null,n,i,r,t),void 0,null),null===Tl)throw Error(s(349));0!==(30&sa)||_a(n,t,r)}return r}function _a(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Aa(e,t,n,i){t.value=n,t.getSnapshot=i,Ma(t)&&Ea(e)}function Ca(e,t,n){return n(function(){Ma(t)&&Ea(e)})}function Ma(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Ea(e){var t=Ls(e,1);null!==t&&nc(t,e,1,-1)}function Ta(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,aa,e),[t.memoizedState,e]}function Ra(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function ja(){return ba().memoizedState}function Pa(e,t,n,i){var r=va();aa.flags|=e,r.memoizedState=Ra(1|t,n,void 0,void 0===i?null:i)}function Ia(e,t,n,i){var r=ba();i=void 0===i?null:i;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==i&&fa(i,a.deps))return void(r.memoizedState=Ra(t,n,s,i))}aa.flags|=e,r.memoizedState=Ra(1|t,n,s,i)}function La(e,t){return Pa(8390656,8,e,t)}function Da(e,t){return Ia(2048,8,e,t)}function Fa(e,t){return Ia(4,2,e,t)}function Na(e,t){return Ia(4,4,e,t)}function Ba(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ia(4,4,Ba.bind(null,t,e),n)}function Wa(){}function Oa(e,t){var n=ba();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fa(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=ba();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fa(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ua(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(oi(n,t)||(n=gt(),aa.lanes|=n,Fl|=n,e.baseState=!0),t)}function Va(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var i=ra.transition;ra.transition={};try{e(!1),t()}finally{xt=n,ra.transition=i}}function Ga(){return ba().memoizedState}function qa(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ka(t,n);else if(null!==(n=Is(e,t,n,i))){nc(n,e,i,ec()),Qa(n,t,i)}}function Ya(e,t,n){var i=tc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ka(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,oi(o,a)){var l=t.interleaved;return null===l?(r.next=r,Ps(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Is(e,t,r,i))&&(nc(n,e,i,r=ec()),Qa(n,t,i))}}function Xa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ka(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,bt(e,n)}}var $a={readContext:Rs,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Ja={readContext:Rs,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4194308,4,Ba.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=va();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=qa.bind(null,aa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ta,useDebugValue:Wa,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=Va.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=aa,r=va();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Tl)throw Error(s(349));0!==(30&sa)||_a(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,La(Ca.bind(null,i,a,e),[e]),i.flags|=2048,Ra(9,Aa.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Tl.identifierPrefix;if(rs){var n=$r;t=":"+t+"R"+(n=(Qr&~(1<<32-at(Qr)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ua++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Rs,useCallback:Oa,useContext:Rs,useEffect:Da,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:Na,useMemo:Ha,useReducer:ya,useRef:ja,useState:function(){return ya(xa)},useDebugValue:Wa,useDeferredValue:function(e){return Ua(ba(),oa.memoizedState,e)},useTransition:function(){return[ya(xa)[0],ba().memoizedState]},useMutableSource:ka,useSyncExternalStore:Sa,useId:Ga,unstable_isNewReconciler:!1},eo={readContext:Rs,useCallback:Oa,useContext:Rs,useEffect:Da,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:Na,useMemo:Ha,useReducer:wa,useRef:ja,useState:function(){return wa(xa)},useDebugValue:Wa,useDeferredValue:function(e){var t=ba();return null===oa?t.memoizedState=e:Ua(t,oa.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ba().memoizedState]},useMutableSource:ka,useSyncExternalStore:Sa,useId:Ga,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=N({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:N({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=Bs(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(nc(t,e,r,i),Ws(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=Bs(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(nc(t,e,r,i),Ws(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),r=Bs(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=zs(e,r,i))&&(nc(t,e,i,n),Ws(t,e,i))}};function ro(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function so(e,t,n){var i=!1,r=Mr,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(r=Pr(t)?Rr:Er.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?jr(e,r):Mr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Fs(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Rs(s):(s=Pr(t)?Rr:Er.current,r.context=jr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&io.enqueueReplaceState(r,r.state,null),Hs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",i=t;do{n+=O(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var uo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Bs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Vl||(Vl=!0,Gl=i),ho(0,t)},n}function fo(e,t,n){(n=Bs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof i&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new uo;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ac.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bs(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var bo=y.ReactCurrentOwner,xo=!1;function yo(e,t,n,i){t.child=null===e?ws(t,null,n,i):ys(t,e.child,n,i)}function wo(e,t,n,i,r){n=n.render;var s=t.ref;return Ts(t,r),i=ga(e,t,n,i,s,r),n=ma(),null===e||xo?(rs&&n&&es(t),t.flags|=1,yo(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Vo(e,t,r))}function ko(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,So(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return Vo(e,t,r)}return t.flags|=1,(e=Ic(s,i)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(xo=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Vo(e,t,r);0!==(131072&e.flags)&&(xo=!0)}}return Co(e,t,n,i,r)}function _o(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Il,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(Il,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Cr(Il,Pl),Pl|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Cr(Il,Pl),Pl|=i;return yo(e,t,r,n),t.child}function Ao(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,i,r){var s=Pr(n)?Rr:Er.current;return s=jr(t,s),Ts(t,r),n=ga(e,t,n,i,s,r),i=ma(),null===e||xo?(rs&&i&&es(t),t.flags|=1,yo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Vo(e,t,r))}function Mo(e,t,n,i,r){if(Pr(n)){var s=!0;Fr(t)}else s=!1;if(Ts(t,r),null===t.stateNode)Uo(e,t),so(t,n,i),oo(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=jr(t,c=Pr(n)?Rr:Er.current);var d=n.getDerivedStateFromProps,h="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&ao(t,a,i,c),Ds=!1;var u=t.memoizedState;a.state=u,Hs(t,i,a,r),l=t.memoizedState,o!==i||u!==l||Tr.current||Ds?("function"===typeof d&&(no(t,n,d,i),l=t.memoizedState),(o=Ds||ro(t,n,o,i,u,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Ns(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,h=t.pendingProps,u=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=jr(t,l=Pr(n)?Rr:Er.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||u!==l)&&ao(t,a,i,l),Ds=!1,u=t.memoizedState,a.state=u,Hs(t,i,a,r);var f=t.memoizedState;o!==h||u!==f||Tr.current||Ds?("function"===typeof p&&(no(t,n,p,i),f=t.memoizedState),(c=Ds||ro(t,n,c,i,u,f,l)||!1)?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),i=!1)}return Eo(e,t,n,i,s,r)}function Eo(e,t,n,i,r,s){Ao(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&Nr(t,n,!1),Vo(e,t,s);i=t.stateNode,bo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=ys(t,e.child,null,s),t.child=ys(t,null,o,s)):yo(e,t,o,s),t.memoizedState=i.state,r&&Nr(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Lr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lr(0,t.context,!1),Ks(e,t.containerInfo)}function Ro(e,t,n,i,r){return ps(),fs(r),t.flags|=256,yo(e,t,n,i),t.child}var jo,Po,Io,Lo,Do={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function No(e,t,n){var i,r=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Cr(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fc(l,r,0,null),e=Dc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fo(n),t.memoizedState=Do,e):Bo(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,r,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,i=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,r=t.mode,i=Fc({mode:"visible",children:i.children},r,0,null),(a=Dc(a,r,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&ys(t,e.child,null,o),t.child.memoizedState=Fo(o),t.memoizedState=Do,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,zo(e,t,o,i=co(a=Error(s(419)),i,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(i=Tl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Ls(e,r),nc(i,e,r,-1))}return gc(),zo(e,t,o,i=co(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Mc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Yr[Xr++]=Qr,Yr[Xr++]=$r,Yr[Xr++]=Kr,Qr=e.id,$r=e.overflow,Kr=t),t=Bo(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,a,n);if(o){o=r.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ic(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Ic(i,o):(o=Dc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?Fo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Do,r}return e=(o=e.child).sibling,r=Ic(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Bo(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,i){return null!==i&&fs(i),ys(t,e.child,null,n),(e=Bo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Es(e.return,t,n)}function Oo(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ho(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(yo(e,t,i.children,n),0!==(2&(i=Zs.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wo(e,n,t);else if(19===e.tag)Wo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Cr(Zs,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Oo(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ea(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Oo(t,!0,n,null,s);break;case"together":Oo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Yo(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Pr(t.type)&&Ir(),qo(t),null;case 3:return i=t.stateNode,Qs(),Ar(Tr),Ar(Er),na(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Po(e,t),qo(t),null;case 5:Js(t);var r=Xs(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)Io(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return qo(t),null}if(e=Xs(Gs.current),hs(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[ur]=t,i[pr]=a,e=0!==(1&t.mode),n){case"dialog":zi("cancel",i),zi("close",i);break;case"iframe":case"object":case"embed":zi("load",i);break;case"video":case"audio":for(r=0;r<Di.length;r++)zi(Di[r],i);break;case"source":zi("error",i);break;case"img":case"image":case"link":zi("error",i),zi("load",i);break;case"details":zi("toggle",i);break;case"input":Q(i,a),zi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},zi("invalid",i);break;case"textarea":re(i,a),zi("invalid",i)}for(var l in be(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zi("scroll",i)}switch(n){case"input":q(i),Z(i,a,!0);break;case"textarea":q(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[ur]=t,e[pr]=i,jo(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,i),n){case"dialog":zi("cancel",e),zi("close",e),r=i;break;case"iframe":case"object":case"embed":zi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Di.length;r++)zi(Di[r],e);r=i;break;case"source":zi("error",e),r=i;break;case"img":case"image":case"link":zi("error",e),zi("load",e),r=i;break;case"details":zi("toggle",e),r=i;break;case"input":Q(e,i),r=K(e,i),zi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=N({},i,{value:void 0}),zi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),zi("invalid",e)}for(a in be(n,r),c=r)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?me(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&he(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&ue(e,d):"number"===typeof d&&ue(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=d&&"onScroll"===a&&zi("scroll",e):null!=d&&x(e,a,d,l))}switch(n){case"input":q(e),Z(e,i,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+V(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Xs(Ys.current),Xs(Gs.current),hs(t)){if(i=t.stateNode,n=t.memoizedProps,i[ur]=t,(a=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[ur]=t,t.stateNode=i}return qo(t),null;case 13:if(Ar(Zs),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))us(),ps(),t.flags|=98560,a=!1;else if(a=hs(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[ur]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Qs(),Po(e,t),null===e&&Hi(t.stateNode.containerInfo),qo(t),null;case 10:return Ms(t.type._context),qo(t),null;case 19:if(Ar(Zs),null===(a=t.memoizedState))return qo(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Go(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Go(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Hl&&(t.flags|=128,i=!0,Go(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ea(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!rs)return qo(t),null}else 2*$e()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,i=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=Zs.current,Cr(Zs,i?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return hc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xo(e,t){switch(ts(t),t.tag){case 1:return Pr(t.type)&&Ir(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),Ar(Tr),Ar(Er),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Ar(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ar(Zs),null;case 4:return Qs(),null;case 10:return Ms(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}jo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Io=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Xs(Gs.current);var s,a=null;switch(n){case"input":r=K(e,r),i=K(e,i),a=[];break;case"select":r=N({},r,{value:void 0}),i=N({},i,{value:void 0}),a=[];break;case"textarea":r=ie(e,r),i=ie(e,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(d in be(n,i),n=null,r)if(!i.hasOwnProperty(d)&&r.hasOwnProperty(d)&&null!=r[d])if("style"===d){var l=r[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in i){var c=i[d];if(l=null!=r?r[d]:void 0,i.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&zi("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Lo=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ko=!1,Qo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){_c(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){_c(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(t,n,s)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ur],delete t[pr],delete t[gr],delete t[mr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,hl=!1;function ul(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Qo||Zo(n,t);case 6:var i=dl,r=hl;dl=null,ul(e,t,n),hl=r,null!==(dl=i)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ht(e)):lr(dl,n.stateNode));break;case 4:i=dl,r=hl,dl=n.stateNode.containerInfo,hl=!0,ul(e,t,n),dl=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),r=r.next}while(r!==i)}ul(e,t,n);break;case 1:if(!Qo&&(Zo(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){_c(n,t,o)}ul(e,t,n);break;case 21:ul(e,t,n);break;case 22:1&n.mode?(Qo=(i=Qo)||null!==n.memoizedState,ul(e,t,n),Qo=i):ul(e,t,n);break;default:ul(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach(function(t){var i=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));pl(a,o,r),dl=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(d){_c(r,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(m){_c(e,e.return,m)}try{nl(5,e,e.return)}catch(m){_c(e,e.return,m)}}break;case 1:gl(t,e),vl(e),512&i&&null!==n&&Zo(n,n.return);break;case 5:if(gl(t,e),vl(e),512&i&&null!==n&&Zo(n,n.return),32&e.flags){var r=e.stateNode;try{ue(r,"")}catch(m){_c(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(r,a),xe(l,o);var d=xe(l,a);for(o=0;o<c.length;o+=2){var h=c[o],u=c[o+1];"style"===h?me(r,u):"dangerouslySetInnerHTML"===h?he(r,u):"children"===h?ue(r,u):x(r,h,u,d)}switch(l){case"input":J(r,a);break;case"textarea":se(r,a);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(r,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[pr]=a}catch(m){_c(e,e.return,m)}}break;case 6:if(gl(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(m){_c(e,e.return,m)}}break;case 3:if(gl(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(m){_c(e,e.return,m)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Ol=$e())),4&i&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(d=Qo)||h,gl(t,e),Qo=d):gl(t,e),vl(e),8192&i){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!h&&0!==(1&e.mode))for(Jo=e,h=e.child;null!==h;){for(u=Jo=h;null!==Jo;){switch(f=(p=Jo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){i=p,n=p.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){_c(i,n,m)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){wl(u);continue}}null!==f?(f.return=p,Jo=f):wl(u)}h=h.sibling}e:for(h=null,u=e;;){if(5===u.tag){if(null===h){h=u;try{r=u.stateNode,d?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=u.stateNode,o=void 0!==(c=u.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(m){_c(e,e.return,m)}}}else if(6===u.tag){if(null===h)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(m){_c(e,e.return,m)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:gl(t,e),vl(e),4&i&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(ue(r,""),i.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var a=i.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){_c(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Jo=e,xl(e,t,n)}function xl(e,t,n){for(var i=0!==(1&e.mode);null!==Jo;){var r=Jo,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Ko;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Ko;var c=Qo;if(Ko=a,(Qo=l)&&!c)for(Jo=r;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?kl(r):null!==l?(l.return=a,Jo=l):kl(r);for(;null!==s;)Jo=s,xl(s,t,n),s=s.sibling;Jo=r,Ko=o,Qo=c}yl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Jo=s):yl(e)}}function yl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Qo)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Us(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var h=d.memoizedState;if(null!==h){var u=h.dehydrated;null!==u&&Ht(u)}}}break;default:throw Error(s(163))}Qo||512&t.flags&&rl(t)}catch(p){_c(t,t.return,p)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function kl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){_c(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){_c(t,r,l)}}var s=t.return;try{rl(t)}catch(l){_c(t,s,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){_c(t,a,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var Sl,_l=Math.ceil,Al=y.ReactCurrentDispatcher,Cl=y.ReactCurrentOwner,Ml=y.ReactCurrentBatchConfig,El=0,Tl=null,Rl=null,jl=0,Pl=0,Il=_r(0),Ll=0,Dl=null,Fl=0,Nl=0,Bl=0,zl=null,Wl=null,Ol=0,Hl=1/0,Ul=null,Vl=!1,Gl=null,ql=null,Yl=!1,Xl=null,Kl=0,Ql=0,$l=null,Jl=-1,Zl=0;function ec(){return 0!==(6&El)?$e():-1!==Jl?Jl:Jl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==jl?jl&-jl:null!==gs.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,i){if(50<Ql)throw Ql=0,$l=null,Error(s(185));vt(e,n,i),0!==(2&El)&&e===Tl||(e===Tl&&(0===(2&El)&&(Nl|=n),4===Ll&&oc(e,jl)),ic(e,i),1===n&&0===El&&0===(1&t.mode)&&(Hl=$e()+500,zr&&Hr()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=ut(e,e===Tl?jl:0);if(0===i)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){zr=!0,Or(e)}(lc.bind(null,e)):Or(lc.bind(null,e)),ar(function(){0===(6&El)&&Hr()}),n=null;else{switch(yt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Tc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Jl=-1,Zl=0,0!==(6&El))throw Error(s(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var i=ut(e,e===Tl?jl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=mc(e,i);else{t=i;var r=El;El|=2;var a=fc();for(Tl===e&&jl===t||(Ul=null,Hl=$e()+500,uc(e,t));;)try{bc();break}catch(l){pc(e,l)}Cs(),Al.current=a,El=r,null!==Rl?t=0:(Tl=null,jl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=sc(e,r))),1===t)throw n=Dl,uc(e,0),oc(e,i),ic(e,$e()),n;if(6===t)oc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!oi(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=mc(e,i))&&(0!==(a=ft(e))&&(i=a,t=sc(e,a))),1===t))throw n=Dl,uc(e,0),oc(e,i),ic(e,$e()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Wl,Ul);break;case 3:if(oc(e,i),(130023424&i)===i&&10<(t=Ol+500-$e())){if(0!==ut(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(wc.bind(null,e,Wl,Ul),t);break}wc(e,Wl,Ul);break;case 4:if(oc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-at(i);a=1<<o,(o=t[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=$e()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*_l(i/1960))-i)){e.timeoutHandle=ir(wc.bind(null,e,Wl,Ul),i);break}wc(e,Wl,Ul);break;default:throw Error(s(329))}}}return ic(e,$e()),e.callbackNode===n?rc.bind(null,e):null}function sc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(uc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Wl,Wl=n,null!==t&&ac(t)),e}function ac(e){null===Wl?Wl=e:Wl.push.apply(Wl,e)}function oc(e,t){for(t&=~Bl,t&=~Nl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&El))throw Error(s(327));kc();var t=ut(e,0);if(0===(1&t))return ic(e,$e()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=sc(e,i))}if(1===n)throw n=Dl,uc(e,0),oc(e,t),ic(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Wl,Ul),ic(e,$e()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Hl=$e()+500,zr&&Hr())}}function dc(e){null!==Xl&&0===Xl.tag&&0===(6&El)&&kc();var t=El;El|=1;var n=Ml.transition,i=xt;try{if(Ml.transition=null,xt=1,e)return e()}finally{xt=i,Ml.transition=n,0===(6&(El=t))&&Hr()}}function hc(){Pl=Il.current,Ar(Il)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Rl)for(n=Rl.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Ir();break;case 3:Qs(),Ar(Tr),Ar(Er),na();break;case 5:Js(i);break;case 4:Qs();break;case 13:case 19:Ar(Zs);break;case 10:Ms(i.type._context);break;case 22:case 23:hc()}n=n.return}if(Tl=e,Rl=e=Ic(e.current,null),jl=Pl=t,Ll=0,Dl=null,Bl=Nl=Fl=0,Wl=zl=null,null!==js){for(t=0;t<js.length;t++)if(null!==(i=(n=js[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}js=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(Cs(),ia.current=$a,ca){for(var i=aa.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ca=!1}if(sa=0,la=oa=aa=null,da=!1,ha=0,Cl.current=null,null===n||null===n.return){Ll=1,Dl=t,Rl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,h=l,u=h.tag;if(0===(1&h.mode)&&(0===u||11===u||15===u)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=mo(o);if(null!==f){f.flags&=-257,vo(f,o,l,0,t),1&f.mode&&go(a,d,t),c=d;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){go(a,d,t),gc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var v=mo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),fs(lo(c,l));break e}}a=c=lo(c,l),4!==Ll&&(Ll=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Os(a,po(0,c,t));break e;case 1:l=c;var b=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof b.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===ql||!ql.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,Os(a,fo(a,l,t));break e}}a=a.return}while(null!==a)}yc(n)}catch(y){t=y,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function fc(){var e=Al.current;return Al.current=$a,null===e?$a:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Tl||0===(268435455&Fl)&&0===(268435455&Nl)||oc(Tl,jl)}function mc(e,t){var n=El;El|=2;var i=fc();for(Tl===e&&jl===t||(Ul=null,uc(e,t));;)try{vc();break}catch(r){pc(e,r)}if(Cs(),El=n,Al.current=i,null!==Rl)throw Error(s(261));return Tl=null,jl=0,Ll}function vc(){for(;null!==Rl;)xc(Rl)}function bc(){for(;null!==Rl&&!Ke();)xc(Rl)}function xc(e){var t=Sl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?yc(e):Rl=t,Cl.current=null}function yc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Pl)))return void(Rl=n)}else{if(null!==(n=Xo(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ll=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ll&&(Ll=5)}function wc(e,t,n){var i=xt,r=Ml.transition;try{Ml.transition=null,xt=1,function(e,t,n,i){do{kc()}while(null!==Xl);if(0!==(6&El))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,a),e===Tl&&(Rl=Tl=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Tc(tt,function(){return kc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ml.transition,Ml.transition=null;var o=xt;xt=1;var l=El;El|=4,Cl.current=null,function(e,t){if(er=Vt,pi(e=ui())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,u=e,p=null;t:for(;;){for(var f;u!==n||0!==r&&3!==u.nodeType||(l=o+r),u!==a||0!==i&&3!==u.nodeType||(c=o+i),3===u.nodeType&&(o+=u.nodeValue.length),null!==(f=u.firstChild);)p=u,u=f;for(;;){if(u===e)break t;if(p===n&&++d===r&&(l=o),p===a&&++h===i&&(c=o),null!==(f=u.nextSibling))break;p=(u=p).parentNode}u=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Vt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,b=t.stateNode,x=b.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),v);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(s(163))}}catch(w){_c(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}g=tl,tl=!1}(e,n),ml(n,e),fi(tr),Vt=!!er,tr=er=null,e.current=n,bl(n,e,r),Qe(),El=l,xt=o,Ml.transition=a}else e.current=n;if(Yl&&(Yl=!1,Xl=e,Kl=r),a=e.pendingLanes,0===a&&(ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Vl)throw Vl=!1,e=Gl,Gl=null,e;0!==(1&Kl)&&0!==e.tag&&kc(),a=e.pendingLanes,0!==(1&a)?e===$l?Ql++:(Ql=0,$l=e):Ql=0,Hr()}(e,t,n,i)}finally{Ml.transition=r,xt=i}return null}function kc(){if(null!==Xl){var e=yt(Kl),t=Ml.transition,n=xt;try{if(Ml.transition=null,xt=16>e?16:e,null===Xl)var i=!1;else{if(e=Xl,Xl=null,Kl=0,0!==(6&El))throw Error(s(331));var r=El;for(El|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Jo=d;null!==Jo;){var h=Jo;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var u=h.child;if(null!==u)u.return=h,Jo=u;else for(;null!==Jo;){var p=(h=Jo).sibling,f=h.return;if(sl(h),h===d){Jo=null;break}if(null!==p){p.return=f,Jo=p;break}Jo=f}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var b=a.sibling;if(null!==b){b.return=a.return,Jo=b;break e}Jo=a.return}}var x=e.current;for(Jo=x;null!==Jo;){var y=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==y)y.return=o,Jo=y;else e:for(o=x;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(k){_c(l,l.return,k)}if(l===o){Jo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Jo=w;break e}Jo=l.return}}if(El=r,Hr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(k){}i=!0}return i}finally{xt=n,Ml.transition=t}}return!1}function Sc(e,t,n){e=zs(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ic(e,t))}function _c(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ql||!ql.has(i))){t=zs(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Ac(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(jl&n)===n&&(4===Ll||3===Ll&&(130023424&jl)===jl&&500>$e()-Ol?uc(e,0):Bl|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Ls(e,t))&&(vt(e,t,n),ic(e,n))}function Mc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Cc(e,n)}function Tc(e,t){return Ye(e,t)}function Rc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,i){return new Rc(e,t,n,i)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,i,r,a){var o=2;if(i=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Dc(n.children,r,a,t);case _:o=8,r|=8;break;case A:return(e=jc(12,n,t,2|r)).elementType=A,e.lanes=a,e;case T:return(e=jc(13,n,t,r)).elementType=T,e.lanes=a,e;case R:return(e=jc(19,n,t,r)).elementType=R,e.lanes=a,e;case I:return Fc(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case M:o=9;break e;case E:o=11;break e;case j:o=14;break e;case P:o=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=jc(o,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Dc(e,t,n,i){return(e=jc(7,e,i,t)).lanes=n,e}function Fc(e,t,n,i){return(e=jc(22,e,i,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Nc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Wc(e,t,n,i,r,s,a,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=jc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fs(s),e}function Oc(e){if(!e)return Mr;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pr(n))return Dr(e,n,t)}return t}function Hc(e,t,n,i,r,s,a,o,l){return(e=Wc(n,i,!0,e,0,s,0,o,l)).context=Oc(null),n=e.current,(s=Bs(i=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,r),e.current.lanes=r,vt(e,r,i),ic(e,i),e}function Uc(e,t,n,i){var r=t.current,s=ec(),a=tc(r);return n=Oc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bs(s,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=zs(r,t,a))&&(nc(e,r,a,s),Ws(e,r,a)),a}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Tr.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:To(t),ps();break;case 5:$s(t);break;case 1:Pr(t.type)&&Fr(t);break;case 4:Ks(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Cr(ks,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Cr(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?No(e,t,n):(Cr(Zs,1&Zs.current),null!==(e=Vo(e,t,n))?e.sibling:null);Cr(Zs,1&Zs.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ho(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr(Zs,Zs.current),i)break;return null;case 22:case 23:return t.lanes=0,_o(e,t,n)}return Vo(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,rs&&0!==(1048576&t.flags)&&Zr(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Uo(e,t),e=t.pendingProps;var r=jr(t,Er.current);Ts(t,n),r=ga(null,t,i,e,r,n);var a=ma();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pr(i)?(a=!0,Fr(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Fs(t),r.updater=io,t.stateNode=r,r._reactInternals=t,oo(t,i,e,n),t=Eo(null,t,i,!0,a,n)):(t.tag=0,rs&&a&&es(t),yo(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Uo(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===j)return 14}return 2}(i),e=to(i,e),r){case 0:t=Co(null,t,i,e,n);break e;case 1:t=Mo(null,t,i,e,n);break e;case 11:t=wo(null,t,i,e,n);break e;case 14:t=ko(null,t,i,to(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Co(e,t,i,r=t.elementType===i?r:to(i,r),n);case 1:return i=t.type,r=t.pendingProps,Mo(e,t,i,r=t.elementType===i?r:to(i,r),n);case 3:e:{if(To(t),null===e)throw Error(s(387));i=t.pendingProps,r=(a=t.memoizedState).element,Ns(e,t),Hs(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ro(e,t,i,n,r=lo(Error(s(423)),t));break e}if(i!==r){t=Ro(e,t,i,n,r=lo(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=ws(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),i===r){t=Vo(e,t,n);break e}yo(e,t,i,n)}t=t.child}return t;case 5:return $s(t),null===e&&cs(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,nr(i,r)?o=null:null!==a&&nr(i,a)&&(t.flags|=32),Ao(e,t),yo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return No(e,t,n);case 4:return Ks(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ys(t,null,i,n):yo(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,wo(e,t,i,r=t.elementType===i?r:to(i,r),n);case 7:return yo(e,t,t.pendingProps,n),t.child;case 8:case 12:return yo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Cr(ks,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===r.children&&!Tr.current){t=Vo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=Bs(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var h=(d=d.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Es(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Es(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}yo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ts(t,n),i=i(r=Rs(r)),t.flags|=1,yo(e,t,i,n),t.child;case 14:return r=to(i=t.type,t.pendingProps),ko(e,t,i,r=to(i.type,r),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:to(i,r),Uo(e,t),t.tag=1,Pr(i)?(e=!0,Fr(t)):e=!1,Ts(t,n),so(t,i,r),oo(t,i,r,n),Eo(null,t,i,!0,e,n);case 19:return Ho(e,t,n);case 22:return _o(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var e=Vc(a);o.call(e)}}Uc(t,a,e,r)}else a=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Vc(a);s.call(e)}}var a=Hc(t,i,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[fr]=a.current,Hi(8===e.nodeType?e.parentNode:e),dc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var o=i;i=function(){var e=Vc(l);o.call(e)}}var l=Wc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[fr]=l.current,Hi(8===e.nodeType?e.parentNode:e),dc(function(){Uc(t,l,n,i)}),l}(n,t,e,r,i);return Vc(a)}Kc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Uc(e,t,null,null)},Kc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Uc(null,e,null,null)}),t[fr]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Nt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(bt(t,1|n),ic(t,$e()),0===(6&El)&&(Hl=$e()+500,Hr()))}break;case 13:dc(function(){var t=Ls(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),qc(e,1)}},kt=function(e){if(13===e.tag){var t=Ls(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ls(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},_t=function(){return xt},At=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=wr(i);if(!r)throw Error(s(90));Y(i),J(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Te=dc;var ed={usingClientEntryPoint:!1,Events:[xr,yr,wr,Ce,Me,cc]},td={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!id.isDisabled&&id.supportsFiber)try{rt=id.inject(nd),st=id}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var n=!1,i="",r=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Wc(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Hi(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,r,0,a,o),e[fr]=t.current,Hi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Kc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!$c(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,i)=>(n.f[i](e,t),t),[])),n.u=e=>"static/js/"+e+".16e5ab7f.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="soma-online-demo:";n.l=(i,r,s,a)=>{if(e[i])e[i].push(r);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var h=c[d];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+s){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[r];var u=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(e=>e(n)),t)return t(n)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Soma-Online-Demo/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise((n,i)=>r=e[t]=[n,i]);i.push(r[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}},"chunk-"+t,t)}};var t=(t,i)=>{var r,s,a=i[0],o=i[1],l=i[2],c=0;if(a.some(t=>0!==e[t])){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(t&&t(i);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunksoma_online_demo=self.webpackChunksoma_online_demo||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var i=n(43),r=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=n(579);const h=e=>{let{onSelectUserType:t}=e;const n=e=>{let{src:t,style:n,isSmall:i=!1}=e;return(0,d.jsx)("div",{style:c({width:"1136px",height:"400px",margin:"0 auto 3rem",position:"relative",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)"},n),children:(0,d.jsx)("video",{src:t,loop:!0,muted:!0,autoPlay:!0,playsInline:!0,style:{width:i?"66.67%":"100%",height:i?"66.67%":"100%",objectFit:"cover",position:i?"absolute":"relative",top:"auto",bottom:i?"0":"auto",left:i?"50%":"auto",transform:i?"translateX(-50%)":"none"}})})},i=[{id:"admin",title:"\uad50\uc7ac\ub4f1\ub85d & AI \ubd84\uc11d",subtitle:"Admin \ub370\ubaa8",description:"\uad50\uc7ac \uc5c5\ub85c\ub4dc, AI \ubd84\uc11d, \ucf58\ud150\uce20 \uad00\ub9ac",icon:(0,d.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,d.jsx)("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,d.jsx)("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),color:"#8B5CF6",badge:"Demo",isPrimary:!1},{id:"teacher",title:"\ucc44\uc810 & \ud53c\ub4dc\ubc31",subtitle:"\uac15\uc0ac \ub370\ubaa8",description:"\ud559\uc0dd \ub2f5\uc548 \ucc44\uc810, AI \ucca8\uc0ad, \uc131\uc801 \uad00\ub9ac",icon:(0,d.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M9 12L11 14L15 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,d.jsx)("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2"})]}),color:"#10B981",badge:"Demo",isPrimary:!1},{id:"student",title:"\ud559\uc2b5 & \ubb38\uc81c\ud480\uc774",subtitle:"\ud559\uc0dd \uccb4\ud5d8",description:"\uad50\uc7ac \ud559\uc2b5, \ubb38\uc81c \ud480\uc774, \ud544\uae30 \uc5f0\uc2b5",icon:(0,d.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,d.jsx)("path",{d:"M19 3L21 5L19 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,d.jsx)("path",{d:"M5 3L3 5L5 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),color:"#F59E0B",badge:null,isPrimary:!0}];return(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 50%, #f1f5f9 100%)",fontFamily:"var(--font-body)"},children:[(0,d.jsx)("nav",{style:{padding:"1rem 2rem",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(226, 232, 240, 0.8)",position:"sticky",top:0,zIndex:100},children:(0,d.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)("div",{style:{width:"32px",height:"32px",background:"linear-gradient(135deg, #F59E0B 0%, #10B981 50%, #8B5CF6 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"white",children:(0,d.jsx)("path",{d:"M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z"})})}),(0,d.jsx)("span",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#1e293b"},children:"\uc18c\ub9c8 \uc628\ub77c\uc778"})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"2rem",alignItems:"center"},children:[(0,d.jsx)("a",{href:"/",style:{color:"#64748b",textDecoration:"none",fontSize:"0.9rem",transition:"color 0.2s"},children:"\ube0c\ub79c\ub4dc"}),(0,d.jsx)("a",{href:"/",style:{color:"#64748b",textDecoration:"none",fontSize:"0.9rem",transition:"color 0.2s"},children:"\uad50\uc721\ud504\ub85c\uadf8\ub7a8"}),(0,d.jsx)("a",{href:"/",style:{color:"#64748b",textDecoration:"none",fontSize:"0.9rem",transition:"color 0.2s"},children:"\uace0\uac1d\uc13c\ud130"})]})]})}),(0,d.jsxs)("main",{style:{maxWidth:"1200px",margin:"0 auto",padding:"4rem 2rem",position:"relative",overflow:"hidden"},children:[(0,d.jsxs)("div",{style:{textAlign:"center",marginBottom:"4rem",position:"relative",zIndex:2},children:[(0,d.jsxs)("h1",{style:{fontSize:"3.5rem",fontWeight:"bold",color:"#1e293b",marginBottom:"1rem",lineHeight:1.2,fontFamily:"var(--font-title)"},children:["\uad50\uc7ac\ub97c \ubcf4\uace0 \uadf8\ub9ac\uba70",(0,d.jsx)("br",{}),(0,d.jsx)("span",{style:{background:"linear-gradient(135deg, #F59E0B 0%, #10B981 50%, #8B5CF6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"\ubc30\uc6b0\ub294 \uc990\uac70\uc6b4 \ud559\uc2b5 \uacf5\uac04"})]}),(0,d.jsxs)("p",{style:{fontSize:"1.25rem",color:"#64748b",maxWidth:"600px",margin:"0 auto 3rem",lineHeight:1.6,fontFamily:"var(--font-body)"},children:["AI \uae30\ubc18 \uac1c\uc778\ud654 \ud559\uc2b5\uacfc \uc2e4\uc2dc\uac04 \ucc44\uc810\uc73c\ub85c",(0,d.jsx)("br",{}),"\ub354\uc6b1 \ud6a8\uacfc\uc801\uc778 \uad50\uc721 \uacbd\ud5d8\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4"]})]}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"2rem",marginBottom:"4rem",position:"relative",zIndex:2},children:i.map(e=>(0,d.jsxs)("div",{onClick:()=>t(e.id),style:{background:e.isPrimary?"linear-gradient(135deg, ".concat(e.color,"15 0%, ").concat(e.color,"25 100%)"):"white",border:e.isPrimary?"2px solid ".concat(e.color,"40"):"2px solid #e2e8f0",borderRadius:"20px",padding:"2.5rem 2rem",textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",position:"relative",overflow:"hidden",boxShadow:e.isPrimary?"0 20px 40px ".concat(e.color,"20"):"0 10px 30px rgba(0, 0, 0, 0.1)",transform:"translateY(0)",":hover":{transform:"translateY(-8px)",boxShadow:"0 25px 50px ".concat(e.color,"30")}},onMouseEnter:t=>{t.target.style.transform="translateY(-8px)",t.target.style.boxShadow="0 25px 50px ".concat(e.color,"30")},onMouseLeave:t=>{t.target.style.transform="translateY(0)",t.target.style.boxShadow=e.isPrimary?"0 20px 40px ".concat(e.color,"20"):"0 10px 30px rgba(0, 0, 0, 0.1)"},children:[e.badge&&(0,d.jsx)("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:"#64748b",color:"white",padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600"},children:e.badge}),(0,d.jsx)("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, ".concat(e.color,"20 0%, ").concat(e.color,"40 100%)"),borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem",color:e.color,position:"relative"},children:e.icon}),(0,d.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b",marginBottom:"0.5rem",fontFamily:"var(--font-title)"},children:e.title}),(0,d.jsx)("p",{style:{fontSize:"1rem",color:e.color,fontWeight:"600",marginBottom:"1rem"},children:e.subtitle}),(0,d.jsx)("p",{style:{fontSize:"0.9rem",color:"#64748b",lineHeight:1.5,fontFamily:"var(--font-body)"},children:e.description}),(0,d.jsx)("div",{style:{marginTop:"1.5rem",padding:"0.75rem 1.5rem",background:e.isPrimary?"linear-gradient(135deg, ".concat(e.color," 0%, ").concat(e.color,"dd 100%)"):"#f8fafc",color:e.isPrimary?"white":"#64748b",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"600",display:"inline-block",border:e.isPrimary?"none":"1px solid #e2e8f0"},children:e.isPrimary?"\uccb4\ud5d8 \uc2dc\uc791\ud558\uae30":"\ub370\ubaa8 \ubcf4\uae30"})]},e.id))}),(0,d.jsx)(n,{src:"".concat("/Soma-Online-Demo","/assets/characters/character.mp4")}),(0,d.jsxs)("div",{style:{background:"white",borderRadius:"20px",padding:"2.5rem",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.1)",marginBottom:"3rem",position:"relative",zIndex:2},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",marginBottom:"2rem"},children:[(0,d.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,d.jsx)("path",{d:"M19 3L21 5L19 7",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,d.jsx)("path",{d:"M5 3L3 5L5 7",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,d.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b",margin:0},children:"\uc2dc\uc5f0 \uac00\uc774\ub4dc"})]}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},children:[(0,d.jsxs)("div",{style:{textAlign:"center",position:"relative"},children:[(0,d.jsx)("div",{style:{width:"60px",height:"60px",background:"linear-gradient(135deg, #F59E0B 0%, #F59E0Bdd 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",color:"white",fontSize:"1.5rem",fontWeight:"bold",position:"relative"},children:"1"}),(0,d.jsx)("h4",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#1e293b",marginBottom:"0.5rem"},children:"\uc0ac\uc6a9\uc790 \uc120\ud0dd"}),(0,d.jsxs)("p",{style:{fontSize:"0.9rem",color:"#64748b",lineHeight:1.5},children:["Admin, \uac15\uc0ac, \ud559\uc0dd \uc911",(0,d.jsx)("br",{}),"\uc6d0\ud558\ub294 \uc5ed\ud560\uc744 \uc120\ud0dd\ud558\uc138\uc694"]})]}),(0,d.jsxs)("div",{style:{textAlign:"center",position:"relative"},children:[(0,d.jsx)("div",{style:{width:"60px",height:"60px",background:"linear-gradient(135deg, #10B981 0%, #10B981dd 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",color:"white",fontSize:"1.5rem",fontWeight:"bold",position:"relative"},children:"2"}),(0,d.jsx)("h4",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#1e293b",marginBottom:"0.5rem"},children:"\uae30\ub2a5 \uccb4\ud5d8"}),(0,d.jsxs)("p",{style:{fontSize:"0.9rem",color:"#64748b",lineHeight:1.5},children:["\uac01 \uc5ed\ud560\uc5d0 \ub9de\ub294",(0,d.jsx)("br",{}),"\uc8fc\uc694 \uae30\ub2a5\ub4e4\uc744 \uccb4\ud5d8\ud574\ubcf4\uc138\uc694"]})]}),(0,d.jsxs)("div",{style:{textAlign:"center",position:"relative"},children:[(0,d.jsx)("div",{style:{width:"60px",height:"60px",background:"linear-gradient(135deg, #8B5CF6 0%, #8B5CF6dd 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",color:"white",fontSize:"1.5rem",fontWeight:"bold",position:"relative"},children:"3"}),(0,d.jsx)("h4",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#1e293b",marginBottom:"0.5rem"},children:"\ud559\uc2b5 \uc644\ub8cc"}),(0,d.jsxs)("p",{style:{fontSize:"0.9rem",color:"#64748b",lineHeight:1.5},children:["\ub2e4\uc591\ud55c \ud559\uc2b5 \ub3c4\uad6c\ub85c",(0,d.jsx)("br",{}),"\ud6a8\uacfc\uc801\uc778 \uad50\uc721\uc744 \uacbd\ud5d8\ud558\uc138\uc694"]})]})]})]}),(0,d.jsx)(n,{src:"".concat("/Soma-Online-Demo","/assets/characters/vdo_char_pc.mp4"),isSmall:!0,style:{background:"#ed9b2c"}})]}),(0,d.jsx)("footer",{style:{background:"#f8fafc",padding:"2rem",textAlign:"center",borderTop:"1px solid #e2e8f0",marginTop:"4rem"},children:(0,d.jsx)("p",{style:{fontSize:"0.9rem",color:"#94a3b8"},children:"\xa9 2024 \uc18c\ub9c8 \uc628\ub77c\uc778. \ubaa8\ub4e0 \uad8c\ub9ac \ubcf4\uc720."})}),(0,d.jsx)("style",{jsx:!0,children:"\n        @keyframes bounce {\n          0%, 20%, 50%, 80%, 100% {\n            transform: translateY(0);\n          }\n          40% {\n            transform: translateY(-10px);\n          }\n          60% {\n            transform: translateY(-5px);\n          }\n        }\n\n        @keyframes wiggle {\n          0%, 100% {\n            transform: rotate(0deg);\n          }\n          25% {\n            transform: rotate(5deg);\n          }\n          75% {\n            transform: rotate(-5deg);\n          }\n        }\n\n        @keyframes float {\n          0%, 100% {\n            transform: translateY(0px);\n          }\n          50% {\n            transform: translateY(-8px);\n          }\n        }\n\n        @keyframes pulse {\n          0%, 100% {\n            opacity: 1;\n          }\n          50% {\n            opacity: 0.7;\n          }\n        }\n\n        /* \ud638\ubc84 \ud6a8\uacfc */\n        .character-hover:hover {\n          animation: pulse 1s infinite;\n        }\n      "})]})},u=e=>{let{onLogin:t}=e;const[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)("");return(0,d.jsx)("div",{style:{height:"100vh",background:"linear-gradient(135deg, #fefefe 0%, #f8fafc 50%, #f1f5f9 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"'SEBANG Gothic', sans-serif"},children:(0,d.jsxs)("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #fefefe 100%)",padding:"3rem",borderRadius:"24px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",border:"2px solid #f1f5f9",width:"100%",maxWidth:"400px",textAlign:"center"},children:[(0,d.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,d.jsx)("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)",borderRadius:"20px",margin:"0 auto 1rem",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 10px 15px -3px rgba(249, 115, 22, 0.3)"},children:(0,d.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"white",children:(0,d.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})})}),(0,d.jsx)("h1",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"700",fontSize:"2rem",color:"#1e293b",marginBottom:"0.5rem",background:"linear-gradient(135deg, #f97316, #ea580c)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"\uc18c\ub9c8 \uc628\ub77c\uc778 \ud559\uc2b5"}),(0,d.jsx)("p",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"400",fontSize:"1rem",color:"#64748b"},children:"\uad50\uc7ac\ub97c \ubcf4\uace0 \uadf8\ub9ac\uba70 \ubc30\uc6b0\ub294 \uc990\uac70\uc6b4 \ud559\uc2b5 \uacf5\uac04"})]}),(0,d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n&&s&&t()},children:[(0,d.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,d.jsx)("input",{type:"text",placeholder:"\uc544\uc774\ub514\ub97c \uc785\ub825\ud558\uc138\uc694",value:n,onChange:e=>r(e.target.value),style:{width:"100%",padding:"1rem",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"1rem",fontFamily:"'SEBANG Gothic', sans-serif",backgroundColor:"#f8fafc",transition:"all 0.2s ease",outline:"none"},onFocus:e=>{e.target.style.borderColor="#f97316",e.target.style.backgroundColor="#ffffff"},onBlur:e=>{e.target.style.borderColor="#e2e8f0",e.target.style.backgroundColor="#f8fafc"}})}),(0,d.jsx)("div",{style:{marginBottom:"2rem"},children:(0,d.jsx)("input",{type:"password",placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694",value:s,onChange:e=>a(e.target.value),style:{width:"100%",padding:"1rem",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"1rem",fontFamily:"'SEBANG Gothic', sans-serif",backgroundColor:"#f8fafc",transition:"all 0.2s ease",outline:"none"},onFocus:e=>{e.target.style.borderColor="#f97316",e.target.style.backgroundColor="#ffffff"},onBlur:e=>{e.target.style.borderColor="#e2e8f0",e.target.style.backgroundColor="#f8fafc"}})}),(0,d.jsx)("button",{type:"submit",style:{width:"100%",padding:"1rem",background:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)",color:"white",border:"none",borderRadius:"12px",fontSize:"1.1rem",fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 6px -1px rgba(249, 115, 22, 0.3)"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 8px 15px -3px rgba(249, 115, 22, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 6px -1px rgba(249, 115, 22, 0.3)"},children:"\ub85c\uadf8\uc778"})]}),(0,d.jsx)("div",{style:{marginTop:"2rem",padding:"1rem",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderRadius:"12px",border:"1px solid #bae6fd"},children:(0,d.jsx)("p",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontSize:"0.875rem",color:"#0369a1",margin:"0"},children:"\ud83d\udca1 \ub370\ubaa8\uc6a9 \ub85c\uadf8\uc778: \uc544\ubb34 \uc544\uc774\ub514/\ube44\ubc00\ubc88\ud638 \uc785\ub825 \ud6c4 \ub85c\uadf8\uc778 \ubc84\ud2bc \ud074\ub9ad"})})]})})},p=e=>{let{files:t,onBookSelect:n,onBackToLogin:r,feedbackAlert:s,setFeedbackAlert:a,setTeacherFeedback:o,notifications:l,setNotifications:c}=e;const[h,u]=(0,i.useState)(""),[p,f]=(0,i.useState)(new Set),[g,m]=(0,i.useState)("books"),v=t.filter(e=>e.title.toLowerCase().includes(h.toLowerCase())),b=[...v].sort((e,t)=>{const n=p.has(e.id),i=p.has(t.id);return n&&!i?-1:!n&&i?1:0});return(0,d.jsxs)("div",{style:{height:"100vh",background:"linear-gradient(135deg, #fefefe 0%, #f8fafc 50%, #f1f5f9 100%)",fontFamily:"'SEBANG Gothic', sans-serif"},children:[s&&(0,d.jsxs)("div",{style:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"1rem 1.5rem",borderRadius:"12px",boxShadow:"0 10px 25px rgba(16, 185, 129, 0.3)",zIndex:1e3,display:"flex",alignItems:"center",gap:"1rem",minWidth:"300px",animation:"slideIn 0.3s ease-out"},children:[(0,d.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.2)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{fontWeight:"bold",fontSize:"1rem"},children:"\uc120\uc0dd\ub2d8 \ucca8\uc0ad \ub3c4\ucc29"}),(0,d.jsx)("div",{style:{fontSize:"0.875rem",opacity:.9},children:"\uc0c8\ub85c\uc6b4 \ucca8\uc0ad\uc774 \ub3c4\ucc29\ud588\uc2b5\ub2c8\ub2e4"})]}),(0,d.jsx)("button",{onClick:()=>{a(!1);const e=localStorage.getItem("teacherFeedback");e&&o(JSON.parse(e))},style:{background:"rgba(255, 255, 255, 0.2)",border:"none",color:"white",padding:"0.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem"},children:"\ud655\uc778"})]}),(0,d.jsx)("div",{style:{background:"linear-gradient(135deg, #fff7ed 0%, #ffedd5 50%, #fed7aa 100%)",padding:"1.5rem 2rem",borderBottom:"3px solid #f97316",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:"1200px",margin:"0 auto"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,d.jsx)("button",{onClick:r,style:{background:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.875rem",fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"500",transition:"all 0.2s ease"},onMouseEnter:e=>e.target.style.transform="translateY(-1px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:"\u2190 \ub85c\uadf8\uc544\uc6c3"}),(0,d.jsx)("h1",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"700",fontSize:"1.75rem",color:"#1e293b",margin:"0",background:"linear-gradient(135deg, #f97316, #ea580c)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"\ud83d\udcda \uad50\uc7ac \ubaa9\ub85d"})]}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"rgba(255, 255, 255, 0.8)",borderRadius:"12px",padding:"0.25rem",border:"1px solid rgba(249, 115, 22, 0.2)"},children:[(0,d.jsx)("button",{onClick:()=>m("books"),style:{background:"books"===g?"linear-gradient(135deg, #f97316 0%, #ea580c 100%)":"transparent",color:"books"===g?"white":"#64748b",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.875rem",fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"500",transition:"all 0.2s ease"},children:"\ud83d\udcda \uad50\uc7ac"}),(0,d.jsxs)("button",{onClick:()=>m("notifications"),style:{background:"notifications"===g?"linear-gradient(135deg, #f97316 0%, #ea580c 100%)":"transparent",color:"notifications"===g?"white":"#64748b",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.875rem",fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"500",transition:"all 0.2s ease",position:"relative"},children:["\ud83d\udd14 \uc54c\ub9bc",l.length>0&&(0,d.jsx)("span",{style:{position:"absolute",top:"-4px",right:"-4px",background:"#ef4444",color:"white",borderRadius:"50%",width:"18px",height:"18px",fontSize:"0.7rem",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:l.length})]})]})]})}),(0,d.jsx)("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem"},children:"books"===g?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",alignItems:"center"},children:[(0,d.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,d.jsx)("input",{type:"text",placeholder:"\uad50\uc7ac\uba85\uc73c\ub85c \uac80\uc0c9...",value:h,onChange:e=>u(e.target.value),style:{width:"100%",padding:"1rem 1rem 1rem 3rem",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"1rem",fontFamily:"'SEBANG Gothic', sans-serif",backgroundColor:"#ffffff",transition:"all 0.2s ease",outline:"none"},onFocus:e=>e.target.style.borderColor="#f97316",onBlur:e=>e.target.style.borderColor="#e2e8f0"}),(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"#64748b",style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)"},children:(0,d.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})})]}),(0,d.jsx)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:(0,d.jsxs)("span",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontSize:"0.875rem",color:"#64748b"},children:["\ucd1d ",v.length,"\uac1c \uad50\uc7ac"]})})]}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.5rem"},children:b.map((e,t)=>(0,d.jsxs)("div",{onClick:()=>n(e.url,t),style:{background:"linear-gradient(135deg, #ffffff 0%, #fefefe 100%)",border:"2px solid #f1f5f9",borderRadius:"20px",padding:"1.5rem",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.05)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.target.style.transform="translateY(-4px) scale(1.02)",e.target.style.boxShadow="0 20px 25px -5px rgba(0, 0, 0, 0.1)",e.target.style.borderColor="#f97316"},onMouseLeave:e=>{e.target.style.transform="translateY(0) scale(1)",e.target.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.05)",e.target.style.borderColor="#f1f5f9"},children:[(0,d.jsx)("button",{onClick:t=>((e,t)=>{t.stopPropagation();const n=new Set(p);n.has(e)?n.delete(e):n.add(e),f(n)})(e.id,t),style:{position:"absolute",top:"1rem",right:"1rem",background:"transparent",border:"none",cursor:"pointer",padding:"0.5rem",borderRadius:"50%",transition:"all 0.2s ease"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(0, 0, 0, 0.05)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",children:(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:p.has(e.id)?"#f97316":"none",stroke:p.has(e.id)?"#f97316":"#64748b",strokeWidth:"2",children:(0,d.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),(0,d.jsx)("div",{style:{width:"60px",height:"60px",background:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem",boxShadow:"0 4px 6px -1px rgba(249, 115, 22, 0.3)"},children:"image"===e.type?(0,d.jsx)("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"white",children:(0,d.jsx)("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}):(0,d.jsx)("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"white",children:(0,d.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"600",fontSize:"1.125rem",color:"#1e293b",marginBottom:"0.5rem",lineHeight:"1.4"},children:e.title.replace(" (NEW)","")}),e.title.includes("(NEW)")&&(0,d.jsx)("span",{style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",fontSize:"0.75rem",fontWeight:"700",padding:"0.25rem 0.5rem",borderRadius:"8px",display:"inline-block",marginBottom:"0.5rem"},children:"NEW"}),(0,d.jsx)("p",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontSize:"0.875rem",color:"#64748b",margin:"0",lineHeight:"1.5"},children:"image"===e.type?"\uc774\ubbf8\uc9c0 \uad50\uc7ac":"PDF \uad50\uc7ac"})]}),(0,d.jsxs)("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[(0,d.jsx)("span",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",fontSize:"0.75rem",padding:"0.25rem 0.5rem",borderRadius:"6px",fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"500"},children:"\ud544\uae30"}),(0,d.jsx)("span",{style:{background:"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)",color:"white",fontSize:"0.75rem",padding:"0.25rem 0.5rem",borderRadius:"6px",fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"500"},children:"\ub179\uc74c"}),(0,d.jsx)("span",{style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",color:"white",fontSize:"0.75rem",padding:"0.25rem 0.5rem",borderRadius:"6px",fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"500"},children:"AI"})]})]},e.id))}),0===v.length&&(0,d.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#64748b"},children:[(0,d.jsx)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"#cbd5e1",style:{marginBottom:"1rem"},children:(0,d.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),(0,d.jsx)("p",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontSize:"1.125rem",margin:"0"},children:"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"})]})]}):(0,d.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"2rem",boxShadow:"0 8px 32px rgba(30, 58, 138, 0.2)",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[(0,d.jsx)("div",{style:{width:"50px",height:"50px",background:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"white",children:(0,d.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"700",fontSize:"1.5rem",color:"#1e293b",margin:"0 0 0.25rem 0"},children:"\uc54c\ub9bc \uc13c\ud130"}),(0,d.jsx)("p",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontSize:"0.875rem",color:"#64748b",margin:"0"},children:"\uc120\uc0dd\ub2d8\uacfc\uc758 \uc18c\ud1b5 \ub0b4\uc5ed\uc744 \ud655\uc778\ud558\uc138\uc694"})]})]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,d.jsxs)("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"1.5rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[(0,d.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.2)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"600",fontSize:"1rem",margin:"0 0 0.25rem 0"},children:"\uc120\uc0dd\ub2d8 \ucca8\uc0ad \ub3c4\ucc29"}),(0,d.jsx)("p",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontSize:"0.875rem",opacity:.9,margin:"0"},children:'"\uc14b\uce74\ub4dc \ub180\uc774\ub97c \ud574 \ubd05\uc2dc\ub2e4" \uad50\uc7ac\uc5d0 \ub300\ud55c \ucca8\uc0ad\uc774 \ub3c4\ucc29\ud588\uc2b5\ub2c8\ub2e4'})]})]}),(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[(0,d.jsx)("span",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontSize:"0.75rem",opacity:.8},children:"2024.01.15 14:30"}),(0,d.jsx)("button",{onClick:()=>{alert("\ucca8\uc0ad\uc744 \ud655\uc778\ud569\ub2c8\ub2e4!")},style:{background:"rgba(255, 255, 255, 0.2)",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"500"},children:"\ud655\uc778\ud558\uae30"})]})]}),(0,d.jsxs)("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white",padding:"1.5rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[(0,d.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.2)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"600",fontSize:"1rem",margin:"0 0 0.25rem 0"},children:"\uacfc\uc81c \uc81c\ucd9c \uc644\ub8cc"}),(0,d.jsx)("p",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontSize:"0.875rem",opacity:.9,margin:"0"},children:'"21\ub144 1\ud559\uae30 \uacfc\ud559 - \ub3d9\ubb3c\ub4e4\uc758 \uc0dd\ud65c" \uacfc\uc81c\uac00 \uc120\uc0dd\ub2d8\uc5d0\uac8c \uc804\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4'})]})]}),(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"},children:[(0,d.jsx)("span",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontSize:"0.75rem",opacity:.8},children:"2024.01.15 10:15"}),(0,d.jsx)("span",{style:{background:"rgba(255, 255, 255, 0.2)",padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"500"},children:"\uc804\uc1a1 \uc644\ub8cc"})]})]}),0===l.length&&(0,d.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#64748b"},children:[(0,d.jsx)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"#cbd5e1",style:{marginBottom:"1rem"},children:(0,d.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})}),(0,d.jsx)("h3",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.5rem",color:"#374151"},children:"\uc0c8\ub85c\uc6b4 \uc54c\ub9bc\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,d.jsx)("p",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontSize:"1rem",margin:"0",color:"#64748b"},children:"\uc120\uc0dd\ub2d8\uacfc\uc758 \uc18c\ud1b5 \ub0b4\uc5ed\uc774 \uc5ec\uae30\uc5d0 \ud45c\uc2dc\ub429\ub2c8\ub2e4"})]})]})]})})]})},f=e=>{let{imageUrl:t,zoomScale:n,selectedTool:r,selectedColor:s,brushSize:a,onStrokeDataChange:o,isRecording:l,studentStrokeData:c,studentAudioUrl:h,teacherFeedbackData:u,showTeacherFeedback:p,isTeacherMode:f,isStudentMode:g}=e;const m=(0,i.useRef)(null),v=(0,i.useRef)(null),b=(0,i.useRef)(null),[x,y]=(0,i.useState)(!1),[w,k]=(0,i.useState)(!1),[S,_]=(0,i.useState)([]),[A,C]=(0,i.useState)(!1),[M,E]=(0,i.useState)({x:0,y:0}),[T,R]=(0,i.useState)([]),j=(e,t)=>{if(!(t.points.length<2)){e.beginPath(),e.lineWidth=t.brushSize||3,e.lineCap="round",e.lineJoin="round","highlighter"===t.tool?(e.globalAlpha=.3,e.globalCompositeOperation="multiply"):(e.globalAlpha=1,e.globalCompositeOperation="source-over"),e.strokeStyle=t.color||"#ef4444",e.moveTo(t.points[0].x,t.points[0].y);for(let n=1;n<t.points.length;n++)e.lineTo(t.points[n].x,t.points[n].y);e.stroke(),e.globalAlpha=1,e.globalCompositeOperation="source-over"}},P=(0,i.useCallback)(()=>{const e=v.current;if(!e)return;const t=e.getContext("2d");if(t.clearRect(0,0,e.width,e.height),f&&c){t.globalAlpha=.7,t.strokeStyle="#3b82f6",t.lineWidth=3,t.lineCap="round",t.lineJoin="round";for(let e of c)if(e.points&&e.points.length>1){t.beginPath(),t.moveTo(e.points[0].x,e.points[0].y);for(let n=1;n<e.points.length;n++)t.lineTo(e.points[n].x,e.points[n].y);t.stroke()}t.globalAlpha=1}if(g&&u&&p){t.globalAlpha=.8,t.strokeStyle="#ef4444",t.lineWidth=4,t.lineCap="round",t.lineJoin="round";for(let e of u)if(e.points&&e.points.length>1){t.beginPath(),t.moveTo(e.points[0].x,e.points[0].y);for(let n=1;n<e.points.length;n++)t.lineTo(e.points[n].x,e.points[n].y);t.stroke()}t.globalAlpha=1}for(let n of S)"stroke"===n.type&&j(t,n)},[S,f,c,g,u,p]),I=(0,i.useCallback)(()=>{console.log("\uc774\ubbf8\uc9c0 \ub85c\ub4dc \uc644\ub8cc:",t);const e=m.current,n=v.current;e&&n&&(console.log("\uc774\ubbf8\uc9c0 \ud06c\uae30:",e.naturalWidth,"x",e.naturalHeight),n.width=e.naturalWidth,n.height=e.naturalHeight,n.style.width="".concat(e.naturalWidth,"px"),n.style.height="".concat(e.naturalHeight,"px"),P(),y(!0),console.log("\uc774\ubbf8\uc9c0 \ubdf0\uc5b4 \ucd08\uae30\ud654 \uc644\ub8cc - \uce94\ubc84\uc2a4 \ud06c\uae30:",n.width,"x",n.height))},[P,t]);(0,i.useEffect)(()=>{if(x){const e=m.current,t=v.current;e&&t&&(t.width=e.naturalWidth,t.height=e.naturalHeight,t.style.width="".concat(e.naturalWidth,"px"),t.style.height="".concat(e.naturalHeight,"px"),P())}},[n,x,P]);const L=(0,i.useCallback)(e=>{const t=v.current,i=m.current;if(!t||!i)return{x:0,y:0};const r=t.getBoundingClientRect(),s=e.touches?e.touches[0].clientX:e.clientX,a=e.touches?e.touches[0].clientY:e.clientY,o=(s-r.left)/n,l=(a-r.top)/n;return{x:Math.max(0,Math.min(o,t.width)),y:Math.max(0,Math.min(l,t.height))}},[n]),D=(0,i.useCallback)(e=>{if(["pen","highlighter","eraser"].includes(r)){e.preventDefault(),e.stopPropagation(),C(!0);const t=L(e);E(t),R([t])}},[r,L]),F=(0,i.useCallback)(e=>{if(!A)return;const t=L(e),n=v.current;if(n&&["pen","highlighter"].includes(r)){e.preventDefault(),e.stopPropagation();const i=n.getContext("2d");i.lineWidth=a,i.lineCap="round",i.lineJoin="round","highlighter"===r?(i.globalAlpha=.3,i.globalCompositeOperation="multiply"):(i.globalAlpha=1,i.globalCompositeOperation="source-over"),i.strokeStyle=s,i.beginPath(),i.moveTo(M.x,M.y),i.lineTo(t.x,t.y),i.stroke(),R(e=>[...e,t]),E(t),i.globalAlpha=1,i.globalCompositeOperation="source-over"}else if(n&&"eraser"===r){e.preventDefault(),e.stopPropagation();const i=n.getContext("2d"),r=2*a;i.clearRect(t.x-r/2,t.y-r/2,r,r)}},[A,r,L,M,a,s]),N=(0,i.useCallback)(e=>{if(e&&(e.preventDefault(),e.stopPropagation()),A&&T.length>1){const e={id:Date.now(),type:"stroke",tool:r,color:s,brushSize:a,points:T,timestamp:(new Date).toISOString(),isRecording:l};_(t=>{const n=[...t,e];return o&&o(n),n})}C(!1),R([])},[A,T,r,s,a,l,o]);return(0,d.jsxs)("div",{ref:b,style:{flex:1,overflow:"auto",backgroundColor:"#f1f5f9",borderRadius:"12px",padding:"1rem",position:"relative"},children:[!x&&!w&&(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",flexDirection:"column",gap:"1rem"},children:[(0,d.jsx)("div",{style:{width:"40px",height:"40px",border:"4px solid #e2e8f0",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,d.jsx)("span",{style:{color:"#6b7280",fontSize:"1rem"},children:"\uc774\ubbf8\uc9c0 \ub85c\ub529 \uc911..."})]}),w&&(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",flexDirection:"column",gap:"1rem"},children:[(0,d.jsx)("span",{style:{color:"#ef4444",fontSize:"1.2rem"},children:"\u26a0\ufe0f \uc774\ubbf8\uc9c0\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,d.jsx)("span",{style:{color:"#6b7280",fontSize:"0.9rem"},children:"\uc774\ubbf8\uc9c0 URL\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694"})]}),(0,d.jsx)("div",{style:{display:x?"flex":"none",justifyContent:"center",alignItems:"center",position:"relative",minHeight:"100%"},children:(0,d.jsxs)("div",{style:{position:"relative",display:"inline-block",transform:"scale(".concat(n,")"),transformOrigin:"center center"},children:[(0,d.jsx)("img",{ref:m,src:t,alt:"\uad50\uc7ac \uc774\ubbf8\uc9c0",onLoad:I,onError:e=>{console.error("\uc774\ubbf8\uc9c0 \ub85c\ub4dc \uc2e4\ud328:",e),k(!0),y(!1)},onMouseDown:e=>{"hand"!==r&&e.preventDefault()},onDragStart:e=>{e.preventDefault()},style:{maxWidth:"800px",width:"auto",height:"auto",border:"2px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",backgroundColor:"white",display:"block",userSelect:"none",pointerEvents:"hand"===r?"auto":"none"}}),(0,d.jsx)("canvas",{ref:v,style:{position:"absolute",top:0,left:0,cursor:"hand"===r?"grab":"crosshair",borderRadius:"8px",pointerEvents:"auto",transform:"scale(".concat(n,")"),transformOrigin:"top left"},onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),D(e)},onMouseMove:e=>{e.preventDefault(),e.stopPropagation(),F(e)},onMouseUp:e=>{e.preventDefault(),e.stopPropagation(),N(e)},onMouseLeave:e=>{e.preventDefault(),e.stopPropagation(),N(e)},onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),D(e)},onTouchMove:e=>{e.preventDefault(),e.stopPropagation(),F(e)},onTouchEnd:e=>{e.preventDefault(),e.stopPropagation(),N(e)}})]})})]})};function g(e,t,n){t||(t=[]);var i=t.length++;return Object.defineProperty({},"_",{set:function(r){t[i]=r,e.apply(n,t)}})}function m(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(e,t){m(e,t),t.add(e)}function b(e,t,n){m(e,t),t.set(e,n)}function x(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function y(e,t,n){return n(x(e,t))}function w(e,t){return e.get(x(e,t))}function k(e,t,n){return e.set(x(e,t),n),n}function S(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return S=function(e){this.s=e,this.n=e.next},S.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new S(e)}var _,A,C,M,E,T,R,j,P,I,L,D,F,N,B;const z="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),W=[.001,0,0,.001,0,0],O=1.35,H=1,U=2,V=4,G=16,q=32,Y=64,X=128,K=256,Q={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},$="pdfjs_internal_editor_",J={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Z={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},ee=0,te=1,ne=2,ie=3,re=3,se=4,ae={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},oe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},le=1,ce=2,de=3,he=4,ue=5,pe={ERRORS:0,WARNINGS:1,INFOS:5},fe={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ge=0,me=1,ve=2,be=3;let xe=pe.WARNINGS;function ye(e){Number.isInteger(e)&&(xe=e)}function we(){return xe}function ke(e){xe>=pe.INFOS&&console.log("Info: ".concat(e))}function Se(e){xe>=pe.WARNINGS&&console.log("Warning: ".concat(e))}function _e(e){throw new Error(e)}function Ae(e,t){e||_e(t)}function Ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch(r){}}const i=t?URL.parse(e,t):URL.parse(e);return function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i)?i:null}function Me(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=URL.parse(e);return i?(i.hash=t,i.href):n&&Ce(e,"http://example.com")?e.split("#",1)[0]+"".concat(t?"#".concat(t):""):""}function Ee(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const Te=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e,e}();class Re extends Te{constructor(e,t){super(e,"PasswordException"),this.code=t}}class je extends Te{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Pe extends Te{constructor(e){super(e,"InvalidPDFException")}}class Ie extends Te{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class Le extends Te{constructor(e){super(e,"FormatError")}}class De extends Te{constructor(e){super(e,"AbortException")}}function Fe(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||_e("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const i=[];for(let r=0;r<t;r+=n){const s=Math.min(r+n,t),a=e.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Ne(e){"string"!==typeof e&&_e("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let i=0;i<t;++i)n[i]=255&e.charCodeAt(i);return n}class Be{static get isLittleEndian(){return Ee(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return Ee(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return Ee(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get isImageDecoderSupported(){return Ee(this,"isImageDecoderSupported","undefined"!==typeof ImageDecoder)}static get platform(){const{platform:e,userAgent:t}=navigator;return Ee(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Ee(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const ze=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class We{static makeHexColor(e,t,n){return"#".concat(ze[e]).concat(ze[t]).concat(ze[n])}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=e[n],r=e[n+1];e[n]=i*t[0]+r*t[2]+t[4],e[n+1]=i*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5];for(let c=0;c<6;c+=2){const t=e[n+c],d=e[n+c+1];e[n+c]=t*i+d*s+o,e[n+c+1]=t*r+d*a+l}}static applyInverseTransform(e,t){const n=e[0],i=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,n){const i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5],c=e[0],d=e[1],h=e[2],u=e[3];let p=i*c+o,f=p,g=i*h+o,m=g,v=a*d+l,b=v,x=a*u+l,y=x;if(0!==r||0!==s){const e=r*c,t=r*h,n=s*d,i=s*u;p+=n,m+=n,g+=i,f+=i,v+=e,y+=e,x+=t,b+=t}n[0]=Math.min(n[0],p,g,f,m),n[1]=Math.min(n[1],v,x,b,y),n[2]=Math.max(n[2],p,g,f,m),n[3]=Math.max(n[3],v,x,b,y)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],r=e[2],s=e[3],a=n**2+i**2,o=n*r+i*s,l=r**2+s**2,c=(a+l)/2,d=Math.sqrt(c**2-(a*l-o**2));t[0]=Math.sqrt(c+d||1),t[1]=Math.sqrt(c-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>s?null:[n,r,i,s]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,r){r[0]=Math.min(r[0],e,n),r[1]=Math.min(r[1],t,i),r[2]=Math.max(r[2],e,n),r[3]=Math.max(r[3],t,i)}static bezierBoundingBox(e,t,n,i,r,s,a,o,l){l[0]=Math.min(l[0],e,a),l[1]=Math.min(l[1],t,o),l[2]=Math.max(l[2],e,a),l[3]=Math.max(l[3],t,o),x(We,this,He).call(this,e,n,r,a,t,i,s,o,3*(3*(n-r)-e+a),6*(e-2*n+r),3*(n-e),l),x(We,this,He).call(this,e,n,r,a,t,i,s,o,3*(3*(i-s)-t+o),6*(t-2*i+s),3*(i-t),l)}}function Oe(e,t,n,i,r,s,a,o,l,c){if(l<=0||l>=1)return;const d=1-l,h=l*l,u=h*l,p=d*(d*(d*e+3*l*t)+3*h*n)+u*i,f=d*(d*(d*r+3*l*s)+3*h*a)+u*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],f),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],f)}function He(e,t,n,i,r,s,a,o,l,c,d,h){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&x(_,this,Oe).call(this,e,t,n,i,r,s,a,o,-d/c,h));const u=c**2-4*d*l;if(u<0)return;const p=Math.sqrt(u),f=2*l;x(_,this,Oe).call(this,e,t,n,i,r,s,a,o,(-c+p)/f,h),x(_,this,Oe).call(this,e,t,n,i,r,s,a,o,(-c-p)/f,h)}_=We;let Ue=null,Ve=null;function Ge(){if("function"===typeof crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);return crypto.getRandomValues(e),Fe(e)}const qe="pdfjs_internal_id_";function Ye(e,t,n){return Math.min(Math.max(e,t),n)}function Xe(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(Fe(e))}"function"!==typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise(t=>{t(e(...n))})}),"function"!==typeof Math.sumPrecise&&(Math.sumPrecise=function(e){return e.reduce((e,t)=>e+t,0)});const Ke="http://www.w3.org/2000/svg";class Qe{}async function $e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(it(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE)if(200!==r.status&&0!==r.status)i(new Error(r.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(r.response)}n(r.responseText)}},r.send(null)})}A=Qe,o(Qe,"CSS",96),o(Qe,"PDF",72),o(Qe,"PDF_TO_CSS_UNITS",A.CSS/A.PDF);class Je{constructor(e){let{viewBox:t,userUnit:n,scale:i,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}=e;this.viewBox=t,this.userUnit=n,this.scale=i,this.rotation=r,this.offsetX=s,this.offsetY=a,i*=n;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let d,h,u,p,f,g,m,v;switch(r%=360,r<0&&(r+=360),r){case 180:d=-1,h=0,u=0,p=1;break;case 90:d=0,h=1,u=1,p=0;break;case 270:d=0,h=-1,u=-1,p=0;break;case 0:d=1,h=0,u=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(u=-u,p=-p),0===d?(f=Math.abs(c-t[1])*i+s,g=Math.abs(l-t[0])*i+a,m=(t[3]-t[1])*i,v=(t[2]-t[0])*i):(f=Math.abs(l-t[0])*i+s,g=Math.abs(c-t[1])*i+a,m=(t[2]-t[0])*i,v=(t[3]-t[1])*i),this.transform=[d*i,h*i,u*i,p*i,f-d*i*l-u*i*c,g-h*i*l-p*i*c],this.width=m,this.height=v}get rawDims(){const e=this.viewBox;return Ee(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Je({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){const n=[e,t];return We.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];We.applyTransform(t,this.transform);const n=[e[2],e[3]];return We.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return We.applyInverseTransform(n,this.transform),n}}class Ze extends Te{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function et(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function tt(e){return"string"===typeof e&&/\.pdf$/i.test(e)}class nt{constructor(){o(this,"started",Object.create(null)),o(this,"times",[])}time(e){e in this.started&&Se("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||Se("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:r}of this.times)e.push("".concat(n.padEnd(t)," ").concat(r-i,"ms\n"));return e.join("")}}function it(e,t){const n=t?URL.parse(e,t):URL.parse(e);return"http:"===(null===n||void 0===n?void 0:n.protocol)||"https:"===(null===n||void 0===n?void 0:n.protocol)}function rt(e){e.preventDefault()}function st(e){e.preventDefault(),e.stopPropagation()}class at{static toDateObject(e){if(e instanceof Date)return e;if(!e||"string"!==typeof e)return null;x(at,this,ot)._||(ot._=x(at,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const t=x(at,this,ot)._.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===l?(s+=c,a+=d):"+"===l&&(s-=c,a-=d),new Date(Date.UTC(n,i,r,s,a,o))}}var ot={_:void 0};function lt(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Se('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function ct(e){const{a:t,b:n,c:i,d:r,e:s,f:a}=e.getTransform();return[t,n,i,r,s,a]}function dt(e){const{a:t,b:n,c:i,d:r,e:s,f:a}=e.getTransform().invertSelf();return[t,n,i,r,s,a]}function ht(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof Je){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:s}=e,a=Be.isCSSRoundSupported,o="var(--total-scale-factor) * ".concat(i,"px"),l="var(--total-scale-factor) * ".concat(r,"px"),c=a?"round(down, ".concat(o,", var(--scale-round-x))"):"calc(".concat(o,")"),d=a?"round(down, ".concat(l,", var(--scale-round-y))"):"calc(".concat(l,")");n&&t.rotation%180!==0?(s.width=d,s.height=c):(s.width=c,s.height=d)}i&&e.setAttribute("data-main-rotation",t.rotation)}class ut{constructor(){const{pixelRatio:e}=ut;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=1/0,a=1/0,o=1/0;(n=ut.capPixels(n,r))>0&&(s=Math.sqrt(n/(e*t))),-1!==i&&(a=i/e,o=i/t);const l=Math.min(s,a,o);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const pt=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var ft=new WeakMap,gt=new WeakMap,mt=new WeakMap,vt=new WeakMap,bt=new WeakMap,xt=new WeakMap,yt=new WeakMap,wt=new WeakSet;class kt{constructor(e){v(this,wt),b(this,ft,null),b(this,gt,null),b(this,mt,void 0),b(this,vt,null),b(this,bt,null),b(this,xt,null),b(this,yt,null),k(mt,this,e),Et._||(Et._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=k(ft,this,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=w(mt,this)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",rt,{signal:t}),e.addEventListener("pointerdown",St,{signal:t}));const n=k(vt,this,document.createElement("div"));n.className="buttons",e.append(n);const i=w(mt,this).toolbarPosition;if(i){const{style:t}=e,n="ltr"===w(mt,this)._uiManager.direction?1-i[0]:i[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return e}get div(){return w(ft,this)}hide(){var e;w(ft,this).classList.add("hidden"),null===(e=w(gt,this))||void 0===e||e.hideDropdown()}show(){var e,t;w(ft,this).classList.remove("hidden"),null===(e=w(bt,this))||void 0===e||e.shown(),null===(t=w(xt,this))||void 0===t||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=w(mt,this),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",Et._[e]),x(wt,this,Ct).call(this,n)&&n.addEventListener("click",e=>{t.delete()},{signal:t._signal}),w(vt,this).append(n)}async addAltText(e){const t=await e.render();x(wt,this,Ct).call(this,t),w(vt,this).append(t,y(wt,this,Mt)),k(bt,this,e)}addComment(e){if(w(xt,this))return;const t=e.render();t&&(x(wt,this,Ct).call(this,t),w(vt,this).append(t,y(wt,this,Mt)),k(xt,this,e),e.toolbar=this)}addColorPicker(e){if(w(gt,this))return;k(gt,this,e);const t=e.renderButton();x(wt,this,Ct).call(this,t),w(vt,this).append(t,y(wt,this,Mt))}async addEditSignatureButton(e){const t=k(yt,this,await e.renderEditButton(w(mt,this)));x(wt,this,Ct).call(this,t),w(vt,this).append(t,y(wt,this,Mt))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t)}}updateEditSignatureButton(e){w(yt,this)&&(w(yt,this).title=e)}remove(){var e;w(ft,this).remove(),null===(e=w(gt,this))||void 0===e||e.destroy(),k(gt,this,null)}}function St(e){e.stopPropagation()}function _t(e){w(mt,this)._focusEventsAllowed=!1,st(e)}function At(e){w(mt,this)._focusEventsAllowed=!0,st(e)}function Ct(e){const t=w(mt,this)._uiManager._signal;return t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("focusin",x(wt,this,_t).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",x(wt,this,At).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",rt,{signal:t}),!0)}function Mt(e){const t=document.createElement("div");return t.className="divider",t}var Et={_:null},Tt=new WeakMap,Rt=new WeakMap,jt=new WeakMap,Pt=new WeakSet;class It{constructor(e){v(this,Pt),b(this,Tt,null),b(this,Rt,null),b(this,jt,void 0),k(jt,this,e)}show(e,t,n){const[i,r]=x(Pt,this,Dt).call(this,t,n),{style:s}=w(Rt,this)||k(Rt,this,x(Pt,this,Lt).call(this));e.append(w(Rt,this)),s.insetInlineEnd="".concat(100*i,"%"),s.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}hide(){w(Rt,this).remove()}}function Lt(){const e=k(Rt,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=w(jt,this)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",rt,{signal:t});const n=k(Tt,this,document.createElement("div"));return n.className="buttons",e.append(n),w(jt,this).hasCommentManager()&&x(Pt,this,Ft).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{w(jt,this).commentSelection("floating_button")}),x(Pt,this,Ft).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{w(jt,this).highlightSelection("floating_button")}),e}function Dt(e,t){let n=0,i=0;for(const r of e){const e=r.y+r.height;if(e<n)continue;const s=r.x+(t?r.width:0);e>n?(i=s,n=e):t?s>i&&(i=s):s<i&&(i=s)}return[t?1-i:i,n]}function Ft(e,t,n,i){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const s=document.createElement("span");r.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",n);const a=w(jt,this)._signal;a instanceof AbortSignal&&!a.aborted&&(r.addEventListener("contextmenu",rt,{signal:a}),r.addEventListener("click",i,{signal:a})),w(Tt,this).append(r)}function Nt(e,t,n){for(const i of n)t.addEventListener(i,e[i].bind(e))}var Bt=new WeakMap;class zt{constructor(){b(this,Bt,0)}get id(){var e,t;return"".concat($).concat((k(Bt,this,(e=w(Bt,this),t=e++,e)),t))}}var Wt=new WeakMap,Ot=new WeakMap,Ht=new WeakMap,Ut=new WeakSet;class Vt{constructor(){v(this,Ut),b(this,Wt,Ge()),b(this,Ot,0),b(this,Ht,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return Ee(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){const{lastModified:t,name:n,size:i,type:r}=e;return x(Ut,this,Gt).call(this,"".concat(t,"_").concat(n,"_").concat(i,"_").concat(r),e)}async getFromUrl(e){return x(Ut,this,Gt).call(this,e,e)}async getFromBlob(e,t){const n=await t;return x(Ut,this,Gt).call(this,e,n)}async getFromId(e){w(Ht,this)||k(Ht,this,new Map);const t=w(Ht,this).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){var n,i,r;w(Ht,this)||k(Ht,this,new Map);let s=w(Ht,this).get(e);if(null!==(r=s)&&void 0!==r&&r.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(t.width,t.height);return a.getContext("2d").drawImage(t,0,0),s={bitmap:a.transferToImageBitmap(),id:"image_".concat(w(Wt,this),"_").concat((k(Ot,this,(n=w(Ot,this),i=n++,n)),i)),refCounter:1,isSvg:!1},w(Ht,this).set(e,s),w(Ht,this).set(s.id,s),s}getSvgUrl(e){const t=w(Ht,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){var t;w(Ht,this)||k(Ht,this,new Map);const n=w(Ht,this).get(e);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:i}=n;if(!n.url&&!n.file){const e=new OffscreenCanvas(i.width,i.height);e.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=e.convertToBlob()}null===(t=i.close)||void 0===t||t.call(i),n.bitmap=null}isValidId(e){return e.startsWith("image_".concat(w(Wt,this),"_"))}}async function Gt(e,t){var n;w(Ht,this)||k(Ht,this,new Map);let i=w(Ht,this).get(e);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var r,s;let e;if(i||(i={bitmap:null,id:"image_".concat(w(Wt,this),"_").concat((k(Ot,this,(r=w(Ot,this),s=r++,r)),s)),refCounter:0,isSvg:!1}),"string"===typeof t?(i.url=t,e=await $e(t,"blob")):t instanceof File?e=i.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){const t=C._isSVGFittingCanvas,n=new FileReader,r=new Image,s=new Promise((e,s)=>{r.onload=()=>{i.bitmap=r,i.isSvg=!0,e()},n.onload=async()=>{const e=i.svgUrl=n.result;r.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},r.onerror=n.onerror=s});n.readAsDataURL(e),await s}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(a){Se(a),i=null}return w(Ht,this).set(e,i),i&&w(Ht,this).set(i.id,i),i}C=Vt;var qt=new WeakMap,Yt=new WeakMap,Xt=new WeakMap,Kt=new WeakMap;class Qt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;b(this,qt,[]),b(this,Yt,!1),b(this,Xt,void 0),b(this,Kt,-1),k(Xt,this,e)}add(e){let{cmd:t,undo:n,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=e;if(r&&t(),w(Yt,this))return;const l={cmd:t,undo:n,post:i,type:s};if(-1===w(Kt,this))return w(qt,this).length>0&&(w(qt,this).length=0),k(Kt,this,0),void w(qt,this).push(l);if(a&&w(qt,this)[w(Kt,this)].type===s)return o&&(l.undo=w(qt,this)[w(Kt,this)].undo),void(w(qt,this)[w(Kt,this)]=l);const c=w(Kt,this)+1;c===w(Xt,this)?w(qt,this).splice(0,1):(k(Kt,this,c),c<w(qt,this).length&&w(qt,this).splice(c)),w(qt,this).push(l)}undo(){if(-1===w(Kt,this))return;k(Yt,this,!0);const{undo:e,post:t}=w(qt,this)[w(Kt,this)];e(),null===t||void 0===t||t(),k(Yt,this,!1),k(Kt,this,w(Kt,this)-1)}redo(){if(w(Kt,this)<w(qt,this).length-1){k(Kt,this,w(Kt,this)+1),k(Yt,this,!0);const{cmd:e,post:t}=w(qt,this)[w(Kt,this)];e(),null===t||void 0===t||t(),k(Yt,this,!1)}}hasSomethingToUndo(){return-1!==w(Kt,this)}hasSomethingToRedo(){return w(Kt,this)<w(qt,this).length-1}cleanType(e){if(-1!==w(Kt,this)){for(let t=w(Kt,this);t>=0;t--)if(w(qt,this)[t].type!==e)return w(qt,this).splice(t+1,w(Kt,this)-t),void k(Kt,this,t);w(qt,this).length=0,k(Kt,this,-1)}}destroy(){k(qt,this,null)}}var $t=new WeakSet;class Jt{constructor(e){v(this,$t),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Be.platform;for(const[n,i,r={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:i,options:r}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:i,options:r}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(x($t,this,Zt).call(this,t));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:s=[],checker:a=null}}=n;a&&!a(e,t)||(i.bind(e,...s,t)(),r||st(t))}}function Zt(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class en{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of e.keys()){t.style.color=n;const i=window.getComputedStyle(t).color;e.set(n,lt(i))}t.remove()}(e),Ee(this,"_colors",e)}convert(e){const t=lt(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((e,n)=>e===t[n]))return en._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?We.makeHexColor(...t):e}}o(en,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,sn=new WeakMap,an=new WeakMap,on=new WeakMap,ln=new WeakMap,cn=new WeakMap,dn=new WeakMap,hn=new WeakMap,un=new WeakMap,pn=new WeakMap,fn=new WeakMap,gn=new WeakMap,mn=new WeakMap,vn=new WeakMap,bn=new WeakMap,xn=new WeakMap,yn=new WeakMap,wn=new WeakMap,kn=new WeakMap,Sn=new WeakMap,_n=new WeakMap,An=new WeakMap,Cn=new WeakMap,Mn=new WeakMap,En=new WeakMap,Tn=new WeakMap,Rn=new WeakMap,jn=new WeakMap,Pn=new WeakMap,In=new WeakMap,Ln=new WeakMap,Dn=new WeakMap,Fn=new WeakMap,Nn=new WeakMap,Bn=new WeakMap,zn=new WeakMap,Wn=new WeakMap,On=new WeakMap,Hn=new WeakMap,Un=new WeakMap,Vn=new WeakMap,Gn=new WeakMap,qn=new WeakMap,Yn=new WeakMap,Xn=new WeakMap,Kn=new WeakMap,Qn=new WeakMap,$n=new WeakSet;class Jn{static get _keyboardManager(){const e=Jn.prototype,t=e=>w(Yn,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Ee(this,"_keyboardManager",new Jt([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&w(Yn,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&w(Yn,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,n,i,r,s,a,l,c,d,h,u,p,f,g,m){v(this,$n),b(this,tn,new AbortController),b(this,nn,null),b(this,rn,null),b(this,sn,new Map),b(this,an,new Map),b(this,on,null),b(this,ln,null),b(this,cn,null),b(this,dn,new Qt),b(this,hn,null),b(this,un,null),b(this,pn,null),b(this,fn,0),b(this,gn,new Set),b(this,mn,null),b(this,vn,null),b(this,bn,new Set),o(this,"_editorUndoBar",null),b(this,xn,!1),b(this,yn,!1),b(this,wn,!1),b(this,kn,null),b(this,Sn,null),b(this,_n,null),b(this,An,null),b(this,Cn,!1),b(this,Mn,null),b(this,En,new zt),b(this,Tn,!1),b(this,Rn,!1),b(this,jn,!1),b(this,Pn,null),b(this,In,null),b(this,Ln,null),b(this,Dn,null),b(this,Fn,null),b(this,Nn,J.NONE),b(this,Bn,new Set),b(this,zn,null),b(this,Wn,null),b(this,On,null),b(this,Hn,null),b(this,Un,null),b(this,Vn,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),b(this,Gn,[0,0]),b(this,qn,null),b(this,Yn,null),b(this,Xn,null),b(this,Kn,null),b(this,Qn,null);const y=this._signal=w(tn,this).signal;k(Yn,this,e),k(Xn,this,t),k(Kn,this,n),k(on,this,i),k(hn,this,r),k(Wn,this,s),k(Un,this,l),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:y}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),a._on("setpreference",this.onSetPreference.bind(this),{signal:y}),a._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:y}),window.addEventListener("pointerdown",()=>{k(Rn,this,!0)},{capture:!0,signal:y}),window.addEventListener("pointerup",()=>{k(Rn,this,!1)},{capture:!0,signal:y}),x($n,this,ri).call(this),x($n,this,hi).call(this),x($n,this,oi).call(this),k(ln,this,l.annotationStorage),k(kn,this,l.filterFactory),k(On,this,c),k(An,this,d||null),k(xn,this,h),k(yn,this,u),k(wn,this,p),k(Fn,this,f||null),this.viewParameters={realScale:Qe.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=!1!==m}destroy(){var e,t,n,i,r,s,a,o,l;null===(e=w(Qn,this))||void 0===e||e.resolve(),k(Qn,this,null),null===(t=w(tn,this))||void 0===t||t.abort(),k(tn,this,null),this._signal=null;for(const c of w(an,this).values())c.destroy();w(an,this).clear(),w(sn,this).clear(),w(bn,this).clear(),null===(n=w(Dn,this))||void 0===n||n.clear(),k(nn,this,null),w(Bn,this).clear(),w(dn,this).destroy(),null===(i=w(on,this))||void 0===i||i.destroy(),null===(r=w(hn,this))||void 0===r||r.destroy(),null===(s=w(Wn,this))||void 0===s||s.destroy(),null===(a=w(Mn,this))||void 0===a||a.hide(),k(Mn,this,null),null===(o=w(Ln,this))||void 0===o||o.destroy(),k(Ln,this,null),k(rn,this,null),w(Sn,this)&&(clearTimeout(w(Sn,this)),k(Sn,this,null)),w(qn,this)&&(clearTimeout(w(qn,this)),k(qn,this,null)),null===(l=this._editorUndoBar)||void 0===l||l.destroy(),k(Un,this,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return w(Fn,this)}get useNewAltTextFlow(){return w(yn,this)}get useNewAltTextWhenAddingImage(){return w(wn,this)}get hcmFilter(){return Ee(this,"hcmFilter",w(On,this)?w(kn,this).addHCMFilter(w(On,this).foreground,w(On,this).background):"none")}get direction(){return Ee(this,"direction",getComputedStyle(w(Yn,this)).direction)}get _highlightColors(){return Ee(this,"_highlightColors",w(An,this)?new Map(w(An,this).split(",").map(e=>((e=e.split("=").map(e=>e.trim()))[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Ee(this,"highlightColors",null);const t=new Map,n=!!w(On,this);for(const[i,r]of e){const e=i.endsWith("_HCM");n&&e?t.set(i.replace("_HCM",""),r):n||e||t.set(i,r)}return Ee(this,"highlightColors",t)}get highlightColorNames(){return Ee(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),k(pn,this,e)}setMainHighlightColorPicker(e){k(Ln,this,e)}editAltText(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=w(on,this))||void 0===t||t.editAltText(this,e,n)}hasCommentManager(){return!!w(hn,this)}editComment(e,t){var n;null===(n=w(hn,this))||void 0===n||n.open(this,e,t)}getSignature(e){var t;null===(t=w(Wn,this))||void 0===t||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return w(Wn,this)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:n}=e;if("enableNewAltTextWhenAddingImage"===t)k(wn,this,n)}onPageChanging(e){let{pageNumber:t}=e;k(fn,this,t-1)}focusMainContainer(){w(Yn,this).focus()}findParent(e,t){for(const n of w(an,this).values()){const{x:i,y:r,width:s,height:a}=n.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=r&&t<=r+a)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];w(Xn,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){w(bn,this).add(e)}removeShouldRescale(e){w(bn,this).delete(e)}onScaleChanging(e){var t;let{scale:n}=e;this.commitOrRemove(),this.viewParameters.realScale=n*Qe.PDF_TO_CSS_UNITS;for(const i of w(bn,this))i.onScaleChanging();null===(t=w(pn,this))||void 0===t||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a}=n,o=n.toString(),l=x($n,this,Zn).call(this,n).closest(".textLayer"),c=this.getSelectionBoxes(l);if(!c)return;n.empty();const d=x($n,this,ei).call(this,l),h=w(Nn,this)===J.NONE,u=()=>{const n=null===d||void 0===d?void 0:d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a,text:o});h&&this.showAllEditors("highlight",!0,!0),t&&(null===n||void 0===n||n.editComment())};h?this.switchToMode(J.HIGHLIGHT,u):u()}commentSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.highlightSelection(e,!0)}addToAnnotationStorage(e){e.isEmpty()||!w(ln,this)||w(ln,this).has(e.id)||w(ln,this).setValue(e.id,e)}a11yAlert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=w(Kn,this);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,w(Cn,this)&&(k(Cn,this,!1),x($n,this,ii).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of w(Bn,this))if(t.div.contains(e)){k(In,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!w(In,this))return;const[e,t]=w(In,this);k(In,this,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){x($n,this,oi).call(this),x($n,this,ci).call(this)}removeEditListeners(){x($n,this,li).call(this),x($n,this,di).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of w(vn,this))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of w(vn,this))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null===(t=w(nn,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of w(Bn,this)){const e=i.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const e of w(vn,this))if(e.isHandlingMimeForPasting(s.type))return void e.paste(s,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){return void Se('paste: "'.concat(r.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const e=[];for(const s of n){const t=await i.deserialize(s);if(!t)return;e.push(t)}const t=()=>{for(const t of e)x($n,this,mi).call(this,t);x($n,this,xi).call(this,e)},r=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:r,mustExec:!0})}catch(r){Se('paste: "'.concat(r.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),w(Nn,this)===J.NONE||this.isEditorHandlingKeyboard||Jn._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,w(Cn,this)&&(k(Cn,this,!1),x($n,this,ii).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu")}}setEditingState(e){e?(x($n,this,si).call(this),x($n,this,ci).call(this),x($n,this,ui).call(this,{isEditing:w(Nn,this)!==J.NONE,isEmpty:x($n,this,bi).call(this),hasSomethingToUndo:w(dn,this).hasSomethingToUndo(),hasSomethingToRedo:w(dn,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(x($n,this,ai).call(this),x($n,this,di).call(this),x($n,this,ui).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!w(vn,this)){k(vn,this,e);for(const e of w(vn,this))x($n,this,pi).call(this,e.defaultPropertiesToUpdate)}}getId(){return w(En,this).id}get currentLayer(){return w(an,this).get(w(fn,this))}getLayer(e){return w(an,this).get(e)}get currentPageIndex(){return w(fn,this)}addLayer(e){w(an,this).set(e.pageIndex,e),w(Tn,this)?e.enable():e.disable()}removeLayer(e){w(an,this).delete(e.pageIndex)}async updateMode(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(w(Nn,this)!==e&&(!w(Qn,this)||(await w(Qn,this).promise,w(Qn,this)))){var a,o,l,c;if(k(Qn,this,Promise.withResolvers()),null===(t=w(pn,this))||void 0===t||t.commitOrRemove(),w(Nn,this)===J.POPUP)null===(a=w(hn,this))||void 0===a||a.hideSidebar();if(k(Nn,this,e),e===J.NONE)return this.setEditingState(!1),x($n,this,gi).call(this),null===(o=this._editorUndoBar)||void 0===o||o.hide(),void w(Qn,this).resolve();if(e===J.SIGNATURE)await(null===(l=w(Wn,this))||void 0===l?void 0:l.loadSignatures());if(e===J.POPUP)w(rn,this)||k(rn,this,await w(Un,this).getAnnotationsByType(new Set(w(vn,this).map(e=>e._editorType)))),null===(c=w(hn,this))||void 0===c||c.showSidebar(w(rn,this));this.setEditingState(!0),await x($n,this,fi).call(this),this.unselectAll();for(const t of w(an,this).values())t.updateMode(e);if(!n)return i&&this.addNewEditorFromKeyboard(),void w(Qn,this).resolve();for(const e of w(sn,this).values())e.annotationElementId===n||e.id===n?(this.setSelected(e),s?e.editComment():r&&e.enterInEditMode()):e.unselect();w(Qn,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==w(Nn,this)&&this._eventBus.dispatch("switchannotationeditormode",c({source:this},e))}updateParams(e,t){if(w(vn,this)){switch(e){case Z.CREATE:return void this.currentLayer.addNewEditor(t);case Z.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(w(Hn,this)||k(Hn,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}if(this.hasSelection)for(const n of w(Bn,this))n.updateParams(e,t);else for(const n of w(vn,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,i;for(const r of w(sn,this).values())r.editorType===e&&r.show(t);(null===(n=null===(i=w(Hn,this))||void 0===i?void 0:i.get(Z.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&x($n,this,pi).call(this,[[Z.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(w(jn,this)!==e){k(jn,this,e);for(const t of w(an,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of w(sn,this).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return w(sn,this).get(e)}addEditor(e){w(sn,this).set(e.id,e)}removeEditor(e){var t,n;(e.div.contains(document.activeElement)&&(w(Sn,this)&&clearTimeout(w(Sn,this)),k(Sn,this,setTimeout(()=>{this.focusMainContainer(),k(Sn,this,null)},0))),w(sn,this).delete(e.id),e.annotationElementId)&&(null===(t=w(Dn,this))||void 0===t||t.delete(e.annotationElementId));(this.unselect(e),e.annotationElementId&&w(gn,this).has(e.annotationElementId))||(null===(n=w(ln,this))||void 0===n||n.remove(e.id))}addDeletedAnnotationElement(e){w(gn,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return w(gn,this).has(e)}removeDeletedAnnotationElement(e){w(gn,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){w(nn,this)!==e&&(k(nn,this,e),e&&x($n,this,pi).call(this,e.propertiesToUpdate))}updateUI(e){y($n,this,vi)===e&&x($n,this,pi).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){x($n,this,pi).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(w(Bn,this).has(e))return w(Bn,this).delete(e),e.unselect(),void x($n,this,ui).call(this,{hasSelectedEditor:this.hasSelection});w(Bn,this).add(e),e.select(),x($n,this,pi).call(this,e.propertiesToUpdate),x($n,this,ui).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),null===(t=w(pn,this))||void 0===t||t.commitOrRemove();for(const n of w(Bn,this))n!==e&&n.unselect();w(Bn,this).clear(),w(Bn,this).add(e),e.select(),x($n,this,pi).call(this,e.propertiesToUpdate),x($n,this,ui).call(this,{hasSelectedEditor:!0})}isSelected(e){return w(Bn,this).has(e)}get firstSelectedEditor(){return w(Bn,this).values().next().value}unselect(e){e.unselect(),w(Bn,this).delete(e),x($n,this,ui).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==w(Bn,this).size}get isEnterHandled(){return 1===w(Bn,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;w(dn,this).undo(),x($n,this,ui).call(this,{hasSomethingToUndo:w(dn,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:x($n,this,bi).call(this)}),null===(e=this._editorUndoBar)||void 0===e||e.hide()}redo(){w(dn,this).redo(),x($n,this,ui).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:w(dn,this).hasSomethingToRedo(),isEmpty:x($n,this,bi).call(this)})}addCommands(e){w(dn,this).add(e),x($n,this,ui).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:x($n,this,bi).call(this)})}cleanUndoStack(e){w(dn,this).cleanType(e)}delete(){var e;this.commitOrRemove();const t=null===(e=this.currentLayer)||void 0===e?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...w(Bn,this)],i=()=>{for(const e of n)x($n,this,mi).call(this,e)};this.addCommands({cmd:()=>{var e;null===(e=this._editorUndoBar)||void 0===e||e.show(i,1===n.length?n[0].editorType:n.length);for(const t of n)t.remove()},undo:i,mustExec:!0})}commitOrRemove(){var e;null===(e=w(nn,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return w(nn,this)||this.hasSelection}selectAll(){for(const e of w(Bn,this))e.commit();x($n,this,xi).call(this,w(sn,this).values())}unselectAll(){var e;if((!w(nn,this)||(w(nn,this).commitOrRemove(),w(Nn,this)===J.NONE))&&(null===(e=w(pn,this))||void 0===e||!e.commitOrRemove())&&this.hasSelection){for(const e of w(Bn,this))e.unselect();w(Bn,this).clear(),x($n,this,ui).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;w(Gn,this)[0]+=e,w(Gn,this)[1]+=t;const[n,i]=w(Gn,this),r=[...w(Bn,this)];w(qn,this)&&clearTimeout(w(qn,this)),k(qn,this,setTimeout(()=>{k(qn,this,null),w(Gn,this)[0]=w(Gn,this)[1]=0,this.addCommands({cmd:()=>{for(const e of r)w(sn,this).has(e.id)&&(e.translateInPage(n,i),e.translationDone())},undo:()=>{for(const e of r)w(sn,this).has(e.id)&&(e.translateInPage(-n,-i),e.translationDone())},mustExec:!1})},1e3));for(const s of r)s.translateInPage(e,t),s.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),k(mn,this,new Map);for(const e of w(Bn,this))w(mn,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!w(mn,this))return!1;this.disableUserSelect(!1);const e=w(mn,this);k(mn,this,null);let t=!1;for(const[{x:i,y:r,pageIndex:s},a]of e)a.newX=i,a.newY=r,a.newPageIndex=s,t||(t=i!==a.savedX||r!==a.savedY||s!==a.savedPageIndex);if(!t)return!1;const n=(e,t,n,i)=>{if(w(sn,this).has(e.id)){const r=w(an,this).get(i);r?e._setParentAndPosition(r,t,n):(e.pageIndex=i,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:i,newY:r,newPageIndex:s}]of e)n(t,i,r,s)},undo:()=>{for(const[t,{savedX:i,savedY:r,savedPageIndex:s}]of e)n(t,i,r,s)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(w(mn,this))for(const n of w(mn,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===w(Bn,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return w(nn,this)===e}getActive(){return w(nn,this)}getMode(){return w(Nn,this)}get imageManager(){return Ee(this,"imageManager",new Vt)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:s}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(e,t,a,o)=>({x:(t-i)/s,y:1-(e+a-n)/r,width:o/s,height:a/r});break;case"180":a=(e,t,a,o)=>({x:1-(e+a-n)/r,y:1-(t+o-i)/s,width:a/r,height:o/s});break;case"270":a=(e,t,a,o)=>({x:1-(t+o-i)/s,y:(e-n)/r,width:o/s,height:a/r});break;default:a=(e,t,a,o)=>({x:(e-n)/r,y:(t-i)/s,width:a/r,height:o/s})}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:i,height:r}of e.getClientRects())0!==i&&0!==r&&o.push(a(t,n,i,r))}return 0===o.length?null:o}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(w(cn,this)||k(cn,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=w(cn,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=w(cn,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const i=w(ln,this).getRawValue(n);i&&(w(Nn,this)!==J.NONE||i.hasBeenModified)&&i.renderAnnotationElement(e)}setMissingCanvas(e,t,n){var i;const r=null===(i=w(Dn,this))||void 0===i?void 0:i.get(e);r&&(r.setCanvas(t,n),w(Dn,this).delete(e))}addMissingCanvas(e,t){(w(Dn,this)||k(Dn,this,new Map)).set(e,t)}}function Zn(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function ei(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of w(an,this).values())if(n.hasTextLayer(e))return n;return null}function ti(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=x($n,this,Zn).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(w(Mn,this)||k(Mn,this,new It(this)),w(Mn,this).show(t,n,"ltr"===this.direction))}function ni(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(w(zn,this))null===(n=w(Mn,this))||void 0===n||n.hide(),k(zn,this,null),x($n,this,ui).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=t;if(i===w(zn,this))return;const r=x($n,this,Zn).call(this,t).closest(".textLayer");var s;if(r){if(null===(e=w(Mn,this))||void 0===e||e.hide(),k(zn,this,i),x($n,this,ui).call(this,{hasSelectedText:!0}),(w(Nn,this)===J.HIGHLIGHT||w(Nn,this)===J.NONE)&&(w(Nn,this)===J.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),k(Cn,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=w(Nn,this)===J.HIGHLIGHT?x($n,this,ei).call(this,r):null;if(null===e||void 0===e||e.toggleDrawing(),w(Rn,this)){const t=new AbortController,n=this.combinedSignal(t),i=n=>{"pointerup"===n.type&&0!==n.button||(t.abort(),null===e||void 0===e||e.toggleDrawing(!0),"pointerup"===n.type&&x($n,this,ii).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}else null===e||void 0===e||e.toggleDrawing(!0),x($n,this,ii).call(this,"main_toolbar")}}else w(zn,this)&&(null===(s=w(Mn,this))||void 0===s||s.hide(),k(zn,this,null),x($n,this,ui).call(this,{hasSelectedText:!1}))}function ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";w(Nn,this)===J.HIGHLIGHT?this.highlightSelection(e):w(xn,this)&&x($n,this,ti).call(this)}function ri(){document.addEventListener("selectionchange",x($n,this,ni).bind(this),{signal:this._signal})}function si(){if(w(_n,this))return;k(_n,this,new AbortController);const e=this.combinedSignal(w(_n,this));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function ai(){var e;null===(e=w(_n,this))||void 0===e||e.abort(),k(_n,this,null)}function oi(){if(w(Pn,this))return;k(Pn,this,new AbortController);const e=this.combinedSignal(w(Pn,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function li(){var e;null===(e=w(Pn,this))||void 0===e||e.abort(),k(Pn,this,null)}function ci(){if(w(un,this))return;k(un,this,new AbortController);const e=this.combinedSignal(w(un,this));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function di(){var e;null===(e=w(un,this))||void 0===e||e.abort(),k(un,this,null)}function hi(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function ui(e){Object.entries(e).some(e=>{let[t,n]=e;return w(Vn,this)[t]!==n})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(w(Vn,this),e)}),w(Nn,this)===J.HIGHLIGHT&&!1===e.hasSelectedEditor&&x($n,this,pi).call(this,[[Z.HIGHLIGHT_FREE,!0]]))}function pi(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function fi(){if(!w(Tn,this)){k(Tn,this,!0);const e=[];for(const t of w(an,this).values())e.push(t.enable());await Promise.all(e);for(const t of w(sn,this).values())t.enable()}}function gi(){if(this.unselectAll(),w(Tn,this)){k(Tn,this,!1);for(const e of w(an,this).values())e.disable();for(const e of w(sn,this).values())e.disable()}}function mi(e){const t=w(an,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function vi(e){let t=null;for(t of w(Bn,e));return t}function bi(){if(0===w(sn,this).size)return!0;if(1===w(sn,this).size)for(const e of w(sn,this).values())return e.isEmpty();return!1}function xi(e){for(const t of w(Bn,this))t.unselect();w(Bn,this).clear();for(const t of e)t.isEmpty()||(w(Bn,this).add(t),t.select());x($n,this,ui).call(this,{hasSelectedEditor:this.hasSelection})}o(Jn,"TRANSLATE_SMALL",1),o(Jn,"TRANSLATE_BIG",10);var yi=new WeakMap,wi=new WeakMap,ki=new WeakMap,Si=new WeakMap,_i=new WeakMap,Ai=new WeakMap,Ci=new WeakMap,Mi=new WeakMap,Ei=new WeakMap,Ti=new WeakMap,Ri=new WeakMap,ji=new WeakMap,Pi=new WeakSet;class Ii{constructor(e){v(this,Pi),b(this,yi,null),b(this,wi,!1),b(this,ki,null),b(this,Si,null),b(this,_i,null),b(this,Ai,null),b(this,Ci,!1),b(this,Mi,null),b(this,Ei,null),b(this,Ti,null),b(this,Ri,null),b(this,ji,!1),k(Ei,this,e),k(ji,this,e._uiManager.useNewAltTextFlow),Fi._||(Fi._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){var t;null!==(t=Ii._l10n)&&void 0!==t||(Ii._l10n=e)}async render(){const e=k(ki,this,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=k(Si,this,document.createElement("span"));e.append(t),w(ji,this)?(e.classList.add("new"),e.setAttribute("data-l10n-id",Fi._.missing),t.setAttribute("data-l10n-id",Fi._["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=w(Ei,this)._uiManager._signal;e.addEventListener("contextmenu",rt,{signal:n}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const i=e=>{e.preventDefault(),w(Ei,this)._uiManager.editAltText(w(Ei,this)),w(ji,this)&&w(Ei,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:y(Pi,this,Li)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(k(Ci,this,!0),i(t))},{signal:n}),await x(Pi,this,Di).call(this),e}finish(){w(ki,this)&&(w(ki,this).focus({focusVisible:w(Ci,this)}),k(Ci,this,!1))}isEmpty(){return w(ji,this)?null===w(yi,this):!w(yi,this)&&!w(wi,this)}hasData(){return w(ji,this)?null!==w(yi,this)||!!w(Ti,this):this.isEmpty()}get guessedText(){return w(Ti,this)}async setGuessedText(e){null===w(yi,this)&&(k(Ti,this,e),k(Ri,this,await Ii._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),x(Pi,this,Di).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;if(!w(ji,this)||w(yi,this))return null===(t=w(Mi,this))||void 0===t||t.remove(),void k(Mi,this,null);if(!w(Mi,this)){const e=k(Mi,this,document.createElement("div"));e.className="noAltTextBadge",w(Ei,this).div.append(e)}w(Mi,this).classList.toggle("hidden",!e)}serialize(e){let t=w(yi,this);return e||w(Ti,this)!==t||(t=w(Ri,this)),{altText:t,decorative:w(wi,this),guessedText:w(Ti,this),textWithDisclaimer:w(Ri,this)}}get data(){return{altText:w(yi,this),decorative:w(wi,this)}}set data(e){let{altText:t,decorative:n,guessedText:i,textWithDisclaimer:r,cancel:s=!1}=e;i&&(k(Ti,this,i),k(Ri,this,r)),w(yi,this)===t&&w(wi,this)===n||(s||(k(yi,this,t),k(wi,this,n)),x(Pi,this,Di).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];w(ki,this)&&(!e&&w(Ai,this)&&(clearTimeout(w(Ai,this)),k(Ai,this,null)),w(ki,this).disabled=!e)}shown(){w(Ei,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:y(Pi,this,Li)}})}destroy(){var e,t;null===(e=w(ki,this))||void 0===e||e.remove(),k(ki,this,null),k(Si,this,null),k(_i,this,null),null===(t=w(Mi,this))||void 0===t||t.remove(),k(Mi,this,null)}}function Li(e){return(w(yi,e)?"added":null===w(yi,e)&&e.guessedText&&"review")||"missing"}async function Di(){const e=w(ki,this);if(!e)return;if(w(ji,this)){var t,n;if(e.classList.toggle("done",!!w(yi,this)),e.setAttribute("data-l10n-id",Fi._[y(Pi,this,Li)]),null===(t=w(Si,this))||void 0===t||t.setAttribute("data-l10n-id",Fi._["".concat(y(Pi,this,Li),"-label")]),!w(yi,this))return void(null===(n=w(_i,this))||void 0===n||n.remove())}else{var i;if(!w(yi,this)&&!w(wi,this))return e.classList.remove("done"),void(null===(i=w(_i,this))||void 0===i||i.remove());e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=w(_i,this);if(!r){k(_i,this,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id="alt-text-tooltip-".concat(w(Ei,this).id);const t=100,n=w(Ei,this)._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(w(Ai,this)),k(Ai,this,null)},{once:!0}),e.addEventListener("mouseenter",()=>{k(Ai,this,setTimeout(()=>{k(Ai,this,null),w(_i,this).classList.add("show"),w(Ei,this)._reportTelemetry({action:"alt_text_tooltip"})},t))},{signal:n}),e.addEventListener("mouseleave",()=>{var e;w(Ai,this)&&(clearTimeout(w(Ai,this)),k(Ai,this,null)),null===(e=w(_i,this))||void 0===e||e.classList.remove("show")},{signal:n})}w(wi,this)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=w(yi,this)),r.parentNode||e.append(r);const s=w(Ei,this).getElementForAltText();null===s||void 0===s||s.setAttribute("aria-describedby",r.id)}var Fi={_:null};o(Ii,"_l10n",null);var Ni=new WeakMap,Bi=new WeakMap,zi=new WeakMap,Wi=new WeakMap,Oi=new WeakMap,Hi=new WeakMap,Ui=new WeakMap;class Vi{constructor(e){b(this,Ni,null),b(this,Bi,!1),b(this,zi,null),b(this,Wi,null),b(this,Oi,null),b(this,Hi,null),b(this,Ui,!1),k(zi,this,e),this.toolbar=null}render(){if(!w(zi,this)._uiManager.hasCommentManager())return null;const e=k(Ni,this,document.createElement("button"));e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const t=w(zi,this)._uiManager._signal;if(!(t instanceof AbortSignal)||t.aborted)return e;e.addEventListener("contextmenu",rt,{signal:t}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:t});const n=e=>{e.preventDefault(),this.edit()};return e.addEventListener("click",n,{capture:!0,signal:t}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(k(Bi,this,!0),n(t))},{signal:t}),e}edit(){const{bottom:e,left:t,right:n}=w(zi,this).getClientDimensions(),i={top:e};"ltr"===w(zi,this)._uiManager.direction?i.right=n:i.left=t,w(zi,this)._uiManager.editComment(w(zi,this),i)}finish(){w(Ni,this)&&(w(Ni,this).focus({focusVisible:w(Bi,this)}),k(Bi,this,!1))}isDeleted(){return w(Ui,this)||""===w(Oi,this)}hasBeenEdited(){return this.isDeleted()||w(Oi,this)!==w(Wi,this)}serialize(){return this.data}get data(){return{text:w(Oi,this),date:w(Hi,this),deleted:w(Ui,this)}}set data(e){if(null===e)return k(Oi,this,""),void k(Ui,this,!0);k(Oi,this,e),k(Hi,this,new Date),k(Ui,this,!1)}setInitialText(e){k(Wi,this,e),this.data=e}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];w(Ni,this)&&(w(Ni,this).disabled=!e)}shown(){}destroy(){var e;null===(e=w(Ni,this))||void 0===e||e.remove(),k(Ni,this,null),k(Oi,this,""),k(Hi,this,null),k(zi,this,null),k(Bi,this,!1),k(Ui,this,!1)}}var Gi=new WeakMap,qi=new WeakMap,Yi=new WeakMap,Xi=new WeakMap,Ki=new WeakMap,Qi=new WeakMap,$i=new WeakMap,Ji=new WeakMap,Zi=new WeakMap,er=new WeakMap,tr=new WeakMap,nr=new WeakMap,ir=new WeakSet;class rr{constructor(e){let{container:t,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:o}=e;v(this,ir),b(this,Gi,void 0),b(this,qi,!1),b(this,Yi,null),b(this,Xi,void 0),b(this,Ki,void 0),b(this,Qi,void 0),b(this,$i,void 0),b(this,Ji,null),b(this,Zi,void 0),b(this,er,null),b(this,tr,void 0),b(this,nr,null),k(Gi,this,t),k(Yi,this,i),k(Xi,this,n),k(Ki,this,r),k(Qi,this,s),k($i,this,a),k(tr,this,new AbortController),k(Zi,this,AbortSignal.any([o,w(tr,this).signal])),t.addEventListener("touchstart",x(ir,this,sr).bind(this),{passive:!1,signal:w(Zi,this)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ut.pixelRatio}destroy(){var e,t;null===(e=w(tr,this))||void 0===e||e.abort(),k(tr,this,null),null===(t=w(Ji,this))||void 0===t||t.abort(),k(Ji,this,null)}}function sr(e){var t,n;if(null!==(t=w(Xi,this))&&void 0!==t&&t.call(this))return;if(1===e.touches.length){if(w(Ji,this))return;const e=k(Ji,this,new AbortController),t=AbortSignal.any([w(Zi,this),e.signal]),n=w(Gi,this),i={capture:!0,signal:t,passive:!1},r=e=>{var t;"touch"===e.pointerType&&(null===(t=w(Ji,this))||void 0===t||t.abort(),k(Ji,this,null))};return n.addEventListener("pointerdown",e=>{"touch"===e.pointerType&&(st(e),r(e))},i),n.addEventListener("pointerup",r,i),void n.addEventListener("pointercancel",r,i)}if(!w(nr,this)){var i;k(nr,this,new AbortController);const e=AbortSignal.any([w(Zi,this),w(nr,this).signal]),t=w(Gi,this),n={signal:e,capture:!1,passive:!1};t.addEventListener("touchmove",x(ir,this,ar).bind(this),n);const r=x(ir,this,or).bind(this);t.addEventListener("touchend",r,n),t.addEventListener("touchcancel",r,n),n.capture=!0,t.addEventListener("pointerdown",st,n),t.addEventListener("pointermove",st,n),t.addEventListener("pointercancel",st,n),t.addEventListener("pointerup",st,n),null===(i=w(Ki,this))||void 0===i||i.call(this)}if(st(e),2!==e.touches.length||null!==(n=w(Yi,this))&&void 0!==n&&n.call(this))return void k(er,this,null);let[r,s]=e.touches;r.identifier>s.identifier&&([r,s]=[s,r]),k(er,this,{touch0X:r.screenX,touch0Y:r.screenY,touch1X:s.screenX,touch1Y:s.screenY})}function ar(e){var t;if(!w(er,this)||2!==e.touches.length)return;st(e);let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:r,screenY:s}=n,{screenX:a,screenY:o}=i,l=w(er,this),{touch0X:c,touch0Y:d,touch1X:h,touch1Y:u}=l,p=h-c,f=u-d,g=a-r,m=o-s,v=Math.hypot(g,m)||1,b=Math.hypot(p,f)||1;if(!w(qi,this)&&Math.abs(b-v)<=M.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!w(qi,this))return void k(qi,this,!0);const x=[(r+a)/2,(s+o)/2];null===(t=w(Qi,this))||void 0===t||t.call(this,x,b,v)}function or(e){if(!(e.touches.length>=2)){var t;if(w(nr,this))w(nr,this).abort(),k(nr,this,null),null===(t=w($i,this))||void 0===t||t.call(this);w(er,this)&&(st(e),k(er,this,null),k(qi,this,!1))}}M=rr;var lr=new WeakMap,cr=new WeakMap,dr=new WeakMap,hr=new WeakMap,ur=new WeakMap,pr=new WeakMap,fr=new WeakMap,gr=new WeakMap,mr=new WeakMap,vr=new WeakMap,br=new WeakMap,xr=new WeakMap,yr=new WeakMap,wr=new WeakMap,kr=new WeakMap,Sr=new WeakMap,_r=new WeakMap,Ar=new WeakMap,Cr=new WeakMap,Mr=new WeakMap,Er=new WeakMap,Tr=new WeakMap,Rr=new WeakMap,jr=new WeakMap,Pr=new WeakMap,Ir=new WeakSet;class Lr{static get _resizerKeyboardManager(){const e=Lr.prototype._resizeWithKeyboard,t=Jn.TRANSLATE_SMALL,n=Jn.TRANSLATE_BIG;return Ee(this,"_resizerKeyboardManager",new Jt([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Lr.prototype._stopResizingWithKeyboard]]))}constructor(e){v(this,Ir),b(this,lr,null),b(this,cr,null),b(this,dr,null),b(this,hr,null),b(this,ur,!1),b(this,pr,null),b(this,fr,""),b(this,gr,!1),b(this,mr,null),b(this,vr,null),b(this,br,null),b(this,xr,null),b(this,yr,""),b(this,wr,!1),b(this,kr,null),b(this,Sr,!1),b(this,_r,!1),b(this,Ar,!1),b(this,Cr,null),b(this,Mr,0),b(this,Er,0),b(this,Tr,null),b(this,Rr,null),o(this,"isSelected",!1),o(this,"_isCopy",!1),o(this,"_editToolbar",null),o(this,"_initialOptions",Object.create(null)),o(this,"_initialData",null),o(this,"_isVisible",!0),o(this,"_uiManager",null),o(this,"_focusEventsAllowed",!0),b(this,jr,!1),b(this,Pr,Lr._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,s];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ee(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new es({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){var n;if(null!==(n=Lr._l10n)&&void 0!==n||(Lr._l10n=e),Lr._l10nResizer||(Lr._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==Lr._borderLineWidth)return;const i=getComputedStyle(document.documentElement);Lr._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){_e("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return w(jr,this)}set _isDraggable(e){var t;k(jr,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=w(Pr,this)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):x(Ir,this,Zr).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(w(wr,this)?k(wr,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[r,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/r,this.y=(t+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){x(Ir,this,Dr).call(this,this.parentDimensions,e,t)}translateInPage(e,t){w(kr,this)||k(kr,this,[this.x,this.y,this.width,this.height]),x(Ir,this,Dr).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){w(kr,this)||k(kr,this,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this;const[o,l]=this.getBaseTranslation();s+=o,a+=l;const{style:c}=n;c.left="".concat((100*s).toFixed(2),"%"),c.top="".concat((100*a).toFixed(2),"%"),this._onTranslating(s,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!w(kr,this)&&(w(kr,this)[0]!==this.x||w(kr,this)[1]!==this.y)}get _hasBeenResized(){return!!w(kr,this)&&(w(kr,this)[2]!==this.width||w(kr,this)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Lr,i=n/e,r=n/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const{div:{style:t},pageDimensions:[n,i]}=this;let{x:r,y:s,width:a,height:o}=this;if(a*=n,o*=i,r*=n,s*=i,this._mustFixPosition)switch(e){case 0:r=Ye(r,0,n-a),s=Ye(s,0,i-o);break;case 90:r=Ye(r,0,n-o),s=Ye(s,a,i);break;case 180:r=Ye(r,a,n),s=Ye(s,o,i);break;case 270:r=Ye(r,o,n),s=Ye(s,0,i-a)}this.x=r/=n,this.y=s/=i;const[l,c]=this.getBaseTranslation();r+=l,s+=c,t.left="".concat((100*r).toFixed(2),"%"),t.top="".concat((100*s).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return Fr.call(Lr,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Fr.call(Lr,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,i]=this.parentDimensions,{style:r}=this.div;r.width="".concat((100*e/n).toFixed(2),"%"),w(gr,this)||(r.height="".concat((100*t/i).toFixed(2),"%"))}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),r=!w(gr,this)&&t.endsWith("%");if(i&&r)return;const[s,a]=this.parentDimensions;i||(e.width="".concat((100*parseFloat(n)/s).toFixed(2),"%")),w(gr,this)||r||(e.height="".concat((100*parseFloat(t)/a).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null===(e=w(dr,this))||void 0===e||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||w(_r,this))return this._editToolbar;this._editToolbar=new kt(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null===(e=w(dr,this))||void 0===e||e.destroy())}addContainer(e){var t;const n=null===(t=this._editToolbar)||void 0===t?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return w(dr,this)||(Ii.initialize(Lr._l10n),k(dr,this,new Ii(this)),w(lr,this)&&(w(dr,this).data=w(lr,this),k(lr,this,null))),w(dr,this)}get altTextData(){var e;return null===(e=w(dr,this))||void 0===e?void 0:e.data}set altTextData(e){w(dr,this)&&(w(dr,this).data=e)}get guessedAltText(){var e;return null===(e=w(dr,this))||void 0===e?void 0:e.guessedText}async setGuessedAltText(e){var t;await(null===(t=w(dr,this))||void 0===t?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null===(t=w(dr,this))||void 0===t?void 0:t.serialize(e)}hasAltText(){return!!w(dr,this)&&!w(dr,this).isEmpty()}hasAltTextData(){var e,t;return null!==(e=null===(t=w(dr,this))||void 0===t?void 0:t.hasData())&&void 0!==e&&e}addCommentButton(){return w(hr,this)?w(hr,this):k(hr,this,new Vi(this))}get commentColor(){return null}get comment(){const e=w(hr,this);return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){w(hr,this)||k(hr,this,new Vi(this)),w(hr,this).data=e}setCommentData(e){w(hr,this)||k(hr,this,new Vi(this)),w(hr,this).setInitialText(e)}get hasEditedComment(){var e;return null===(e=w(hr,this))||void 0===e?void 0:e.hasBeenEdited()}async editComment(){w(hr,this)||k(hr,this,new Vi(this)),w(hr,this).edit()}addComment(e){if(this.hasEditedComment){const t=180,n=100,[,,,i]=e.rect,[r]=this.pageDimensions,[s]=this.pageTranslation,a=s+r+1,o=i-n,l=a+t;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,o,l,i]}}}render(){var e;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=w(ur,this)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),x(Ir,this,Xr).call(this);const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth="".concat((100*i/n).toFixed(2),"%"),t.style.maxHeight="".concat((100*n/i).toFixed(2),"%"));const[r,s]=this.getInitialTranslation();return this.translate(r,s),Nt(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(w(Rr,this)||k(Rr,this,new rr({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:x(Ir,this,Ur).bind(this),onPinching:x(Ir,this,Vr).bind(this),onPinchEnd:x(Ir,this,Gr).bind(this),signal:this._uiManager._signal}))),null===(e=this._uiManager._editorUndoBar)||void 0===e||e.hide(),t}pointerdown(e){const{isMac:t}=Be.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(k(wr,this,!0),this._isDraggable?x(Ir,this,Yr).call(this,e):x(Ir,this,qr).call(this,e))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){w(Cr,this)&&clearTimeout(w(Cr,this)),k(Cr,this,setTimeout(()=>{var e;k(Cr,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[r,s]=this.pageDimensions,[a,o]=this.pageTranslation,l=e/i,c=t/i,d=this.x*r,h=this.y*s,u=this.width*r,p=this.height*s;switch(n){case 0:return[d+l+a,s-h-c-p+o,d+l+u+a,s-h-c+o];case 90:return[d+c+a,s-h+l+o,d+c+p+a,s-h+l+u+o];case 180:return[d-l-u+a,s-h+c+o,d-l+a,s-h+c+p+o];case 270:return[d-c-p+a,s-h-l-u+o,d-c+a,s-h-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,r,s]=e,a=r-n,o=s-i;switch(this.rotation){case 0:return[n,t-s,a,o];case 90:return[n,t-i,o,a];case 180:return[r,t-i,a,o];case 270:return[r,t-s,o,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),k(_r,this,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),k(_r,this,!1),!0)}isInEditMode(){return w(_r,this)}shouldGetKeyboardEvents(){return w(Ar,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:s}=window;return t<s&&i>0&&e<r&&n>0}rebuild(){x(Ir,this,Xr).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}serialize(){_e("An editor must be serializable")}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId});i.rotation=e.rotation,k(lr,i,e.accessibilityData),i._isCopy=e.isCopy||!1;const[r,s]=i.pageDimensions,[a,o,l,c]=i.getRectInCurrentCoords(e.rect,s);return i.x=a/r,i.y=o/s,i.width=l/r,i.height=c/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t;if(null===(e=w(xr,this))||void 0===e||e.abort(),k(xr,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),w(Cr,this)&&(clearTimeout(w(Cr,this)),k(Cr,this,null)),x(Ir,this,Zr).call(this),this.removeEditToolbar(),w(Tr,this)){for(const e of w(Tr,this).values())clearTimeout(e);k(Tr,this,null)}this.parent=null,null===(t=w(Rr,this))||void 0===t||t.destroy(),k(Rr,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(x(Ir,this,Br).call(this),w(mr,this).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),k(br,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=w(mr,this).children;if(!w(cr,this)){k(cr,this,Array.from(t));const e=x(Ir,this,Kr).bind(this),n=x(Ir,this,Qr).bind(this),i=this._uiManager._signal;for(const t of w(cr,this)){const r=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:i}),t.addEventListener("blur",n,{signal:i}),t.addEventListener("focus",x(Ir,this,$r).bind(this,r),{signal:i}),t.setAttribute("data-l10n-id",Lr._l10nResizer[r])}}const n=w(cr,this)[0];let i=0;for(const s of t){if(s===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(w(cr,this).length/4);if(r!==i){if(r<i)for(let t=0;t<i-r;t++)w(mr,this).append(w(mr,this).firstChild);else if(r>i)for(let t=0;t<r-i;t++)w(mr,this).firstChild.before(w(mr,this).lastChild);let e=0;for(const n of t){const t=w(cr,this)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",Lr._l10nResizer[t])}}x(Ir,this,Jr).call(this,0),k(Ar,this,!0),w(mr,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){w(Ar,this)&&x(Ir,this,Hr).call(this,w(yr,this),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){x(Ir,this,Zr).call(this),this.div.focus()}select(){var e,t,n;this.isSelected&&this._editToolbar||(this.isSelected=!0,this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),this._editToolbar?(null===(t=this._editToolbar)||void 0===t||t.show(),null===(n=w(dr,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=this._editToolbar)||void 0===t||t.show())}))}unselect(){var e,t,n,i,r;this.isSelected&&(this.isSelected=!1,null===(e=w(mr,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=this._editToolbar)||void 0===i||i.hide(),null===(r=w(dr,this))||void 0===r||r.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return w(Sr,this)}set isEditing(e){k(Sr,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){k(gr,this,!0);const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){w(Tr,this)||k(Tr,this,new Map);const{action:t}=e;let n=w(Tr,this).get(t);return n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),w(Tr,this).delete(t),0===w(Tr,this).size&&k(Tr,this,null)},Lr._telemetryTimeout),void w(Tr,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),k(ur,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),k(ur,this,!0)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===(null===t||void 0===t?void 0:t.nodeName)&&t.classList.contains("annotationContent")&&t.remove()}}function Dr(e,t,n){let[i,r]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/i,this.y+=n/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function Fr(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function Nr(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function Br(){if(w(mr,this))return;k(mr,this,document.createElement("div")),w(mr,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");w(mr,this).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",x(Ir,this,zr).bind(this,n),{signal:t}),e.addEventListener("contextmenu",rt,{signal:t}),e.tabIndex=-1}this.div.prepend(w(mr,this))}function zr(e,t){var n;t.preventDefault();const{isMac:i}=Be.platform;if(0!==t.button||t.ctrlKey&&i)return;null===(n=w(dr,this))||void 0===n||n.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,k(vr,this,[t.screenX,t.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",x(Ir,this,Hr).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",st,{passive:!1,signal:a}),window.addEventListener("contextmenu",rt,{signal:a}),k(br,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var e;s.abort(),this.parent.togglePointerEvents(!0),null===(e=w(dr,this))||void 0===e||e.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=l,x(Ir,this,Or).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}function Wr(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t;const[r,s]=this.parentDimensions;this.setDims(r*n,s*i),this.fixAndSetPosition(),this._onResized()}function Or(){if(!w(br,this))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=w(br,this);k(br,this,null);const r=this.x,s=this.y,a=this.width,o=this.height;r===e&&s===t&&a===n&&o===i||this.addCommands({cmd:x(Ir,this,Wr).bind(this,r,s,a,o),undo:x(Ir,this,Wr).bind(this,e,t,n,i),mustExec:!0})}function Hr(e,t){const[n,i]=this.parentDimensions,r=this.x,s=this.y,a=this.width,o=this.height,l=E.MIN_SIZE/n,c=E.MIN_SIZE/i,d=x(Ir,this,Nr).call(this,this.rotation),h=(e,t)=>[d[0]*e+d[2]*t,d[1]*e+d[3]*t],u=x(Ir,this,Nr).call(this,360-this.rotation);let p,f,g=!1,m=!1;switch(e){case"topLeft":g=!0,p=(e,t)=>[0,0],f=(e,t)=>[e,t];break;case"topMiddle":p=(e,t)=>[e/2,0],f=(e,t)=>[e/2,t];break;case"topRight":g=!0,p=(e,t)=>[e,0],f=(e,t)=>[0,t];break;case"middleRight":m=!0,p=(e,t)=>[e,t/2],f=(e,t)=>[0,t/2];break;case"bottomRight":g=!0,p=(e,t)=>[e,t],f=(e,t)=>[0,0];break;case"bottomMiddle":p=(e,t)=>[e/2,t],f=(e,t)=>[e/2,0];break;case"bottomLeft":g=!0,p=(e,t)=>[0,t],f=(e,t)=>[e,0];break;case"middleLeft":m=!0,p=(e,t)=>[0,t/2],f=(e,t)=>[e,t/2]}const v=p(a,o),b=f(a,o);let y=h(...b);const S=E._round(r+y[0]),_=E._round(s+y[1]);let A,C,M=1,T=1;if(t.fromKeyboard)({deltaX:A,deltaY:C}=t);else{const{screenX:e,screenY:n}=t,[i,r]=w(vr,this);[A,C]=this.screenToPageTranslation(e-i,n-r),w(vr,this)[0]=e,w(vr,this)[1]=n}var R,j;if([A,C]=(R=A/n,j=C/i,[u[0]*R+u[2]*j,u[1]*R+u[3]*j]),g){const e=Math.hypot(a,o);M=T=Math.max(Math.min(Math.hypot(b[0]-v[0]-A,b[1]-v[1]-C)/e,1/a,1/o),l/a,c/o)}else m?M=Ye(Math.abs(b[0]-v[0]-A),l,1)/a:T=Ye(Math.abs(b[1]-v[1]-C),c,1)/o;const P=E._round(a*M),I=E._round(o*T);y=h(...f(P,I));const L=S-y[0],D=_-y[1];w(kr,this)||k(kr,this,[this.x,this.y,this.width,this.height]),this.width=P,this.height=I,this.x=L,this.y=D,this.setDims(n*P,i*I),this.fixAndSetPosition(),this._onResizing()}function Ur(){var e;k(br,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(e=w(dr,this))||void 0===e||e.toggle(!1),this.parent.togglePointerEvents(!1)}function Vr(e,t,n){let i=n/t*.7+1-.7;if(1===i)return;const r=x(Ir,this,Nr).call(this,this.rotation),s=(e,t)=>[r[0]*e+r[2]*t,r[1]*e+r[3]*t],[a,o]=this.parentDimensions,l=this.x,c=this.y,d=this.width,h=this.height,u=E.MIN_SIZE/a,p=E.MIN_SIZE/o;i=Math.max(Math.min(i,1/d,1/h),u/d,p/h);const f=E._round(d*i),g=E._round(h*i);if(f===d&&g===h)return;w(kr,this)||k(kr,this,[l,c,d,h]);const m=s(d/2,h/2),v=E._round(l+m[0]),b=E._round(c+m[1]),y=s(f/2,g/2);this.x=v-y[0],this.y=b-y[1],this.width=f,this.height=g,this.setDims(a*f,o*g),this.fixAndSetPosition(),this._onResizing()}function Gr(){var e;null===(e=w(dr,this))||void 0===e||e.toggle(!0),this.parent.togglePointerEvents(!0),x(Ir,this,Or).call(this)}function qr(e){const{isMac:t}=Be.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function Yr(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:r},a=e=>{i.abort(),k(pr,this,null),k(wr,this,!1),this._uiManager.endDragSession()||x(Ir,this,qr).call(this,e),n&&this._onStopDragging()};t&&(k(Mr,this,e.clientX),k(Er,this,e.clientY),k(pr,this,e.pointerId),k(fr,this,e.pointerType),window.addEventListener("pointermove",e=>{n||(n=!0,this._onStartDragging());const{clientX:t,clientY:i,pointerId:r}=e;if(r!==w(pr,this))return void st(e);const[s,a]=this.screenToPageTranslation(t-w(Mr,this),i-w(Er,this));k(Mr,this,t),k(Er,this,i),this._uiManager.dragSelectedEditors(s,a)},s),window.addEventListener("touchmove",st,s),window.addEventListener("pointerdown",e=>{e.pointerType===w(fr,this)&&(w(Rr,this)||e.isPrimary)&&a(e),st(e)},s));const o=e=>{w(pr,this)&&w(pr,this)!==e.pointerId?st(e):a(e)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})}function Xr(){if(w(xr,this)||!this.div)return;k(xr,this,new AbortController);const e=this._uiManager.combinedSignal(w(xr,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function Kr(e){E._resizerKeyboardManager.exec(this,e)}function Qr(e){var t;w(Ar,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==w(mr,this)&&x(Ir,this,Zr).call(this)}function $r(e){k(yr,this,w(Ar,this)?e:"")}function Jr(e){if(w(cr,this))for(const t of w(cr,this))t.tabIndex=e}function Zr(){k(Ar,this,!1),x(Ir,this,Jr).call(this,-1),x(Ir,this,Or).call(this)}E=Lr,o(Lr,"_l10n",null),o(Lr,"_l10nResizer",null),o(Lr,"_borderLineWidth",-1),o(Lr,"_colorManager",new en),o(Lr,"_zIndex",1),o(Lr,"_telemetryTimeout",1e3);class es extends Lr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ts=3285377520,ns=4294901760,is=65535;class rs{constructor(e){this.h1=e?4294967295&e:ts,this.h2=e?4294967295&e:ts}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let i=0,r=e.length;i<r;i++){const r=e.charCodeAt(i);r<=255?t[n++]=r:(t[n++]=r>>>8,t[n++]=255&r)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const i=n>>2,r=n-4*i,s=new Uint32Array(t.buffer,0,i);let a=0,o=0,l=this.h1,c=this.h2;const d=3432918353,h=461845907,u=11601,p=13715;for(let f=0;f<i;f++)1&f?(a=s[f],a=a*d&ns|a*u&is,a=a<<15|a>>>17,a=a*h&ns|a*p&is,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=s[f],o=o*d&ns|o*u&is,o=o<<15|o>>>17,o=o*h&ns|o*p&is,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,r){case 3:a^=t[4*i+2]<<16;case 2:a^=t[4*i+1]<<8;case 1:a^=t[4*i],a=a*d&ns|a*u&is,a=a<<15|a>>>17,a=a*h&ns|a*p&is,1&i?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&ns|36045*e&is,t=4283543511*t&ns|(2950163797*(t<<16|e>>>16)&ns)>>>16,e^=t>>>1,e=444984403*e&ns|60499*e&is,t=3301882366*t&ns|(3120437893*(t<<16|e>>>16)&ns)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const ss=Object.freeze({map:null,hash:"",transfer:void 0});var as=new WeakMap,os=new WeakMap,ls=new WeakMap,cs=new WeakSet;class ds{constructor(){v(this,cs),b(this,as,!1),b(this,os,null),b(this,ls,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=w(ls,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return w(ls,this).get(e)}remove(e){if(w(ls,this).delete(e),0===w(ls,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const e of w(ls,this).values())if(e instanceof Lr)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=w(ls,this).get(e);let i=!1;if(void 0!==n)for(const[r,s]of Object.entries(t))n[r]!==s&&(i=!0,n[r]=s);else i=!0,w(ls,this).set(e,t);i&&x(cs,this,hs).call(this),t instanceof Lr&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return w(ls,this).has(e)}get size(){return w(ls,this).size}resetModified(){w(as,this)&&(k(as,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new ps(this)}get serializable(){if(0===w(ls,this).size)return ss;const e=new Map,t=new rs,n=[],i=Object.create(null);let r=!1;for(const[s,a]of w(ls,this)){const n=a instanceof Lr?a.serialize(!1,i):a;n&&(e.set(s,n),t.update("".concat(s,":").concat(JSON.stringify(n))),r||(r=!!n.bitmap))}if(r)for(const s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:ss}get editorStats(){let e=null;const t=new Map;for(const r of w(ls,this).values()){var n;if(!(r instanceof Lr))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:a}=s;t.has(a)||t.set(a,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const o=(n=e)[a]||(n[a]=new Map);for(const[e,t]of Object.entries(s)){var i;if("type"===e)continue;let n=o.get(e);n||(n=new Map,o.set(e,n));const r=null!==(i=n.get(t))&&void 0!==i?i:0;n.set(t,r+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){k(os,this,null)}get modifiedIds(){if(w(os,this))return w(os,this);const e=[];for(const t of w(ls,this).values())t instanceof Lr&&t.annotationElementId&&t.serialize()&&e.push(t.annotationElementId);return k(os,this,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return w(ls,this).entries()}}function hs(){w(as,this)||(k(as,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var us=new WeakMap;class ps extends ds{constructor(e){super(),b(this,us,void 0);const{map:t,hash:n,transfer:i}=e.serializable,r=structuredClone(t,i?{transfer:i}:null);k(us,this,{map:r,hash:n,transfer:i})}get print(){_e("Should not call PrintAnnotationStorage.print")}get serializable(){return w(us,this)}get modifiedIds(){return Ee(this,"modifiedIds",{ids:new Set,hash:""})}}var fs=new WeakMap;class gs{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;b(this,fs,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),w(fs,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,disableFontFace:n,_inspectFont:i}=e;if(t&&!w(fs,this).has(t.loadedName)){if(Ae(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:n,style:s}=t,a=new FontFace(e,n,s);this.addNativeFontFace(a);try{await a.load(),w(fs,this).add(e),null===i||void 0===i||i(t)}catch(r){Se("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}return}_e("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw Se("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var e;return Ee(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){return Ee(this,"isSyncFontLoadingSupported",z||Be.platform.isFirefox)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(Ae(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return Ee(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,i){return e.substring(0,t)+i+e.substring(t+n)}let r,s;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let d=this._loadTestFont;d=i(d,976,c.length,c);const h=1482184792;let u=n(d,16);for(r=0,s=c.length-3;r<s;r+=4)u=u-h+n(c,r)|0;var p;r<c.length&&(u=u-h+n(c+"XXX",r)|0),d=i(d,16,4,(p=u,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f="url(data:font/opentype;base64,".concat(btoa(d),");"),g='@font-face {font-family:"'.concat(c,'";src:').concat(f,"}");this.insertRule(g);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const v of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=v,m.append(e)}this._document.body.append(m),function e(t,n){if(++l>30)return Se("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,()=>{m.remove(),t.complete()})}}class ms{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t="url(data:".concat(this.mimetype,";base64,").concat(Xe(this.data),");");let n;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(t,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(s){Se('getPathGenerator - ignoring character: "'.concat(s,'".'))}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=r}}function vs(e){if("string"!==typeof e)return null;if(e.endsWith("/"))return e;throw new Error('Invalid factory url: "'.concat(e,'" must include trailing slash.'))}const bs=e=>"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0,xs=function(e,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,r,...s]=n;if(!e(i)&&!Number.isInteger(i))return!1;if(!t(r))return!1;const a=s.length;let o=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return 0===a;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(4!==a)return!1;o=!1;break;default:return!1}for(const l of s)if(!("number"===typeof l||o&&null===l))return!1;return!0}.bind(null,bs,e=>"object"===typeof e&&"string"===typeof(null===e||void 0===e?void 0:e.name));var ys=new WeakMap,ws=new WeakMap;class ks{constructor(){b(this,ys,new Map),b(this,ws,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};w(ws,this).then(()=>{for(const[e]of w(ys,this))e.call(this,n)})}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted)return void Se("LoopbackPort - cannot use an `aborted` signal.");const s=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",s),r.addEventListener("abort",s)}w(ys,this).set(t,i)}removeEventListener(e,t){const n=w(ys,this).get(t);null===n||void 0===n||n(),w(ys,this).delete(t)}terminate(){for(const[,e]of w(ys,this))null===e||void 0===e||e();w(ys,this).clear()}}const Ss=1,_s=2,As=1,Cs=2,Ms=3,Es=4,Ts=5,Rs=6,js=7,Ps=8;function Is(){}function Ls(e){if(e instanceof De||e instanceof Pe||e instanceof Re||e instanceof Ie||e instanceof je)return e;switch(e instanceof Error||"object"===typeof e&&null!==e||_e('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new De(e.message);case"InvalidPDFException":return new Pe(e.message);case"PasswordException":return new Re(e.message,e.code);case"ResponseException":return new Ie(e.message,e.status,e.missing);case"UnknownErrorException":return new je(e.message,e.details)}return new je(e.message,e.toString())}var Ds=new WeakMap,Fs=new WeakSet;class Ns{constructor(e,t,n){v(this,Fs),b(this,Ds,new AbortController),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",x(Fs,this,Bs).bind(this),{signal:w(Ds,this).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(s){r.reject(s)}return r.promise}sendWithStream(e,t,n,i){const r=this.streamId++,s=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[r]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:s,targetName:a,action:e,streamId:r,data:t,desiredSize:n.desiredSize},i),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[r].pullCall=t,o.postMessage({sourceName:s,targetName:a,stream:Rs,streamId:r,desiredSize:e.desiredSize}),t.promise},cancel:e=>{Ae(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[r].cancelCall=t,this.streamControllers[r].isClosed=!0,o.postMessage({sourceName:s,targetName:a,stream:As,streamId:r,reason:Ls(e)}),t.promise}},n)}destroy(){var e;null===(e=w(Ds,this))||void 0===e||e.abort(),k(Ds,this,null)}}function Bs(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void x(Fs,this,Ws).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===Ss)n.resolve(t.data);else{if(t.callback!==_s)throw new Error("Unexpected callback case");n.reject(Ls(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,i=t.sourceName,r=this.comObj;return void Promise.try(n,t.data).then(function(n){r.postMessage({sourceName:e,targetName:i,callback:Ss,callbackId:t.callbackId,data:n})},function(n){r.postMessage({sourceName:e,targetName:i,callback:_s,callbackId:t.callbackId,reason:Ls(n)})})}t.streamId?x(Fs,this,zs).call(this,t):n(t.data)}function zs(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,s=this,a=this.actionHandler[e.action],o={enqueue(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=s,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:Es,streamId:t,chunk:e},a)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Ms,streamId:t}),delete s.streamSinks[t])},error(e){Ae(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Ts,streamId:t,reason:Ls(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,Promise.try(a,e.data,o).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ps,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:i,stream:Ps,streamId:t,reason:Ls(e)})})}function Ws(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,s=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Ps:e.success?s.startCall.resolve():s.startCall.reject(Ls(e.reason));break;case js:e.success?s.pullCall.resolve():s.pullCall.reject(Ls(e.reason));break;case Rs:if(!a){r.postMessage({sourceName:n,targetName:i,stream:js,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||Is).then(function(){r.postMessage({sourceName:n,targetName:i,stream:js,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:i,stream:js,streamId:t,reason:Ls(e)})});break;case Es:if(Ae(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case Ms:if(Ae(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),x(Fs,this,Os).call(this,s,t);break;case Ts:Ae(s,"error should have stream controller"),s.controller.error(Ls(e.reason)),x(Fs,this,Os).call(this,s,t);break;case Cs:e.success?s.cancelCall.resolve():s.cancelCall.reject(Ls(e.reason)),x(Fs,this,Os).call(this,s,t);break;case As:if(!a)break;const o=Ls(e.reason);Promise.try(a.onCancel||Is,o).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Cs,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:i,stream:Cs,streamId:t,reason:Ls(e)})}),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function Os(e,t){var n,i,r;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(i=e.pullCall)||void 0===i?void 0:i.promise,null===(r=e.cancelCall)||void 0===r?void 0:r.promise]),delete this.streamControllers[t]}var Hs=new WeakMap;class Us{constructor(e){let{enableHWA:t=!1}=e;b(this,Hs,!1),k(Hs,this,t)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!w(Hs,this)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){_e("Abstract method `_createCanvas` called.")}}class Vs extends Us{constructor(e){let{ownerDocument:t=globalThis.document,enableHWA:n=!1}=e;super({enableHWA:n}),this._document=t}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class Gs{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))})}async _fetch(e){_e("Abstract method `_fetch` called.")}}class qs extends Gs{async _fetch(e){const t=await $e(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Ne(t)}}class Ys{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,r){return"none"}destroy(){}}var Xs=new WeakMap,Ks=new WeakMap,Qs=new WeakMap,$s=new WeakMap,Js=new WeakMap,Zs=new WeakMap,ea=new WeakMap,ta=new WeakSet;class na extends Ys{constructor(e){let{docId:t,ownerDocument:n=globalThis.document}=e;super(),v(this,ta),b(this,Xs,void 0),b(this,Ks,void 0),b(this,Qs,void 0),b(this,$s,void 0),b(this,Js,void 0),b(this,Zs,void 0),b(this,ea,0),k($s,this,t),k(Js,this,n)}addFilter(e){var t,n;if(!e)return"none";let i=y(ta,this,ia).get(e);if(i)return i;const[r,s,a]=x(ta,this,aa).call(this,e),o=1===e.length?r:"".concat(r).concat(s).concat(a);if(i=y(ta,this,ia).get(o),i)return y(ta,this,ia).set(e,i),i;const l="g_".concat(w($s,this),"_transfer_map_").concat((k(ea,this,(t=w(ea,this),n=t++,t)),n)),c=x(ta,this,oa).call(this,l);y(ta,this,ia).set(e,c),y(ta,this,ia).set(o,c);const d=x(ta,this,da).call(this,l);return x(ta,this,ua).call(this,r,s,a,d),c}addHCMFilter(e,t){var n;const i="".concat(e,"-").concat(t),r="base";let s=y(ta,this,ra).get(r);if((null===(n=s)||void 0===n?void 0:n.key)===i)return s.url;var a;s?(null===(a=s.filter)||void 0===a||a.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},y(ta,this,ra).set(r,s));if(!e||!t)return s.url;const o=x(ta,this,fa).call(this,e);e=We.makeHexColor(...o);const l=x(ta,this,fa).call(this,t);if(t=We.makeHexColor(...l),y(ta,this,sa).style.color="","#000000"===e&&"#ffffff"===t||e===t)return s.url;const c=new Array(256);for(let f=0;f<=255;f++){const e=f/255;c[f]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const d=c.join(","),h="g_".concat(w($s,this),"_hcm_filter"),u=s.filter=x(ta,this,da).call(this,h);x(ta,this,ua).call(this,d,d,d,u),x(ta,this,ca).call(this,u);const p=(e,t)=>{const n=o[e]/255,i=l[e]/255,r=new Array(t+1);for(let s=0;s<=t;s++)r[s]=n+s/t*(i-n);return r.join(",")};return x(ta,this,ua).call(this,p(0,5),p(1,5),p(2,5),u),s.url=x(ta,this,oa).call(this,h),s.url}addAlphaFilter(e){var t,n;let i=y(ta,this,ia).get(e);if(i)return i;const[r]=x(ta,this,aa).call(this,[e]),s="alpha_".concat(r);if(i=y(ta,this,ia).get(s),i)return y(ta,this,ia).set(e,i),i;const a="g_".concat(w($s,this),"_alpha_map_").concat((k(ea,this,(t=w(ea,this),n=t++,t)),n)),o=x(ta,this,oa).call(this,a);y(ta,this,ia).set(e,o),y(ta,this,ia).set(s,o);const l=x(ta,this,da).call(this,a);return x(ta,this,pa).call(this,r,l),o}addLuminosityFilter(e){var t,n;let i,r,s=y(ta,this,ia).get(e||"luminosity");if(s)return s;if(e?([i]=x(ta,this,aa).call(this,[e]),r="luminosity_".concat(i)):r="luminosity",s=y(ta,this,ia).get(r),s)return y(ta,this,ia).set(e,s),s;const a="g_".concat(w($s,this),"_luminosity_map_").concat((k(ea,this,(t=w(ea,this),n=t++,t)),n)),o=x(ta,this,oa).call(this,a);y(ta,this,ia).set(e,o),y(ta,this,ia).set(r,o);const l=x(ta,this,da).call(this,a);return x(ta,this,la).call(this,l),e&&x(ta,this,pa).call(this,i,l),o}addHighlightHCMFilter(e,t,n,i,r){var s;const a="".concat(t,"-").concat(n,"-").concat(i,"-").concat(r);let o=y(ta,this,ra).get(e);if((null===(s=o)||void 0===s?void 0:s.key)===a)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},y(ta,this,ra).set(e,o));if(!t||!n)return o.url;const[c,d]=[t,n].map(x(ta,this,fa).bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),u=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,f]=[i,r].map(x(ta,this,fa).bind(this));u<h&&([h,u,p,f]=[u,h,f,p]),y(ta,this,sa).style.color="";const g=(e,t,n)=>{const i=new Array(256),r=(u-h)/n,s=e/255,a=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(h+l*r),t=s+l*a;for(let n=o;n<=e;n++)i[n]=t;o=e+1}for(let l=o;l<256;l++)i[l]=i[o-1];return i.join(",")},m="g_".concat(w($s,this),"_hcm_").concat(e,"_filter"),v=o.filter=x(ta,this,da).call(this,m);return x(ta,this,ca).call(this,v),x(ta,this,ua).call(this,g(p[0],f[0],5),g(p[1],f[1],5),g(p[2],f[2],5),v),o.url=x(ta,this,oa).call(this,m),o.url}destroy(){var e,t,n,i;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(e=w(Zs,this))&&void 0!==e&&e.size||(null===(t=w(Qs,this))||void 0===t||t.parentNode.parentNode.remove(),k(Qs,this,null),null===(n=w(Ks,this))||void 0===n||n.clear(),k(Ks,this,null),null===(i=w(Zs,this))||void 0===i||i.clear(),k(Zs,this,null),k(ea,this,0))}}function ia(e){return w(Ks,e)||k(Ks,e,new Map)}function ra(e){return w(Zs,e)||k(Zs,e,new Map)}function sa(e){if(!w(Qs,e)){const t=w(Js,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=w(Js,e).createElementNS(Ke,"svg");i.setAttribute("width",0),i.setAttribute("height",0),k(Qs,e,w(Js,e).createElementNS(Ke,"defs")),t.append(i),i.append(w(Qs,e)),w(Js,e).body.append(t)}return w(Qs,e)}function aa(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const i=n.join(",");return[i,i,i]}const[t,n,i]=e,r=new Array(256),s=new Array(256),a=new Array(256);for(let o=0;o<256;o++)r[o]=t[o]/255,s[o]=n[o]/255,a[o]=i[o]/255;return[r.join(","),s.join(","),a.join(",")]}function oa(e){if(void 0===w(Xs,this)){k(Xs,this,"");const e=w(Js,this).URL;e!==w(Js,this).baseURI&&(et(e)?Se('#createUrl: ignore "data:"-URL for performance reasons.'):k(Xs,this,Me(e,"")))}return"url(".concat(w(Xs,this),"#").concat(e,")")}function la(e){const t=w(Js,this).createElementNS(Ke,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function ca(e){const t=w(Js,this).createElementNS(Ke,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function da(e){const t=w(Js,this).createElementNS(Ke,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),y(ta,this,sa).append(t),t}function ha(e,t,n){const i=w(Js,this).createElementNS(Ke,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}function ua(e,t,n,i){const r=w(Js,this).createElementNS(Ke,"feComponentTransfer");i.append(r),x(ta,this,ha).call(this,r,"feFuncR",e),x(ta,this,ha).call(this,r,"feFuncG",t),x(ta,this,ha).call(this,r,"feFuncB",n)}function pa(e,t){const n=w(Js,this).createElementNS(Ke,"feComponentTransfer");t.append(n),x(ta,this,ha).call(this,n,"feFuncA",e)}function fa(e){return y(ta,this,sa).style.color=e,lt(getComputedStyle(y(ta,this,sa)).getPropertyValue("color"))}class ga{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load font data at: ".concat(n))})}async _fetch(e){_e("Abstract method `_fetch` called.")}}class ma extends ga{async _fetch(e){const t=await $e(e,"arraybuffer");return new Uint8Array(t)}}class va{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load wasm data at: ".concat(n))})}async _fetch(e){_e("Abstract method `_fetch` called.")}}class ba extends va{async _fetch(e){const t=await $e(e,"arraybuffer");return new Uint8Array(t)}}async function xa(e){const t=process.getBuiltinModule("fs"),n=await t.promises.readFile(e);return new Uint8Array(n)}z&&Se("Please use the `legacy` build in Node.js environments.");class ya extends Ys{}class wa extends Us{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("file:///Users/dev1/Documents/soma-online-demo/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(e,t)}}class ka extends Gs{async _fetch(e){return xa(e)}}class Sa extends ga{async _fetch(e){return xa(e)}}class _a extends va{async _fetch(e){return xa(e)}}const Aa="__forcedDependency";var Ca=new WeakMap,Ma=new WeakMap,Ea=new WeakMap,Ta=new WeakMap,Ra=new WeakMap,ja=new WeakMap,Pa=new WeakMap,Ia=new WeakMap,La=new WeakMap,Da=new WeakMap,Fa=new WeakMap,Na=new WeakMap,Ba=new WeakMap,za=new WeakMap;class Wa{constructor(e){b(this,Ca,{__proto__:null}),b(this,Ma,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Aa]:[]}),b(this,Ea,new Map),b(this,Ta,[]),b(this,Ra,[]),b(this,ja,[[1,0,0,1,0,0]]),b(this,Pa,[-1/0,-1/0,1/0,1/0]),b(this,Ia,new Float64Array([1/0,1/0,-1/0,-1/0])),b(this,La,-1),b(this,Da,new Set),b(this,Fa,new Map),b(this,Na,new Map),b(this,Ba,void 0),b(this,za,void 0),k(Ba,this,e.width),k(za,this,e.height)}save(e){return k(Ca,this,{__proto__:w(Ca,this)}),k(Ma,this,{__proto__:w(Ma,this),transform:{__proto__:w(Ma,this).transform},moveText:{__proto__:w(Ma,this).moveText},sameLineText:{__proto__:w(Ma,this).sameLineText},[Aa]:{__proto__:w(Ma,this)[Aa]}}),k(Pa,this,{__proto__:w(Pa,this)}),w(Ta,this).push([e,null]),this}restore(e){const t=Object.getPrototypeOf(w(Ca,this));if(null===t)return this;k(Ca,this,t),k(Ma,this,Object.getPrototypeOf(w(Ma,this))),k(Pa,this,Object.getPrototypeOf(w(Pa,this)));const n=w(Ta,this).pop();return void 0!==n&&(n[1]=e),this}recordOpenMarker(e){return w(Ta,this).push([e,null]),this}getOpenMarker(){return 0===w(Ta,this).length?null:w(Ta,this).at(-1)[0]}recordCloseMarker(e){const t=w(Ta,this).pop();return void 0!==t&&(t[1]=e),this}beginMarkedContent(e){return w(Ra,this).push([e,null]),this}endMarkedContent(e){const t=w(Ra,this).pop();return void 0!==t&&(t[1]=e),this}pushBaseTransform(e){return w(ja,this).push(We.multiplyByDOMMatrix(w(ja,this).at(-1),e.getTransform())),this}popBaseTransform(){return w(ja,this).length>1&&w(ja,this).pop(),this}recordSimpleData(e,t){return w(Ca,this)[e]=t,this}recordIncrementalData(e,t){return w(Ma,this)[e].push(t),this}resetIncrementalData(e,t){return w(Ma,this)[e].length=0,this}recordNamedData(e,t){return w(Ea,this).set(e,t),this}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Aa,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in w(Ca,this)&&this.recordFutureForcedDependency(t,w(Ca,this)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of w(Da,this))this.recordFutureForcedDependency(Aa,e);return this}resetBBox(e){return k(La,this,e),w(Ia,this)[0]=1/0,w(Ia,this)[1]=1/0,w(Ia,this)[2]=-1/0,w(Ia,this)[3]=-1/0,this}get hasPendingBBox(){return-1!==w(La,this)}recordClipBox(e,t,n,i,r,s){const a=We.multiplyByDOMMatrix(w(ja,this).at(-1),t.getTransform()),o=[1/0,1/0,-1/0,-1/0];We.axialAlignedBoundingBox([n,r,i,s],a,o);const l=We.intersect(w(Pa,this),o);return l?(w(Pa,this)[0]=l[0],w(Pa,this)[1]=l[1],w(Pa,this)[2]=l[2],w(Pa,this)[3]=l[3]):(w(Pa,this)[0]=w(Pa,this)[1]=1/0,w(Pa,this)[2]=w(Pa,this)[3]=-1/0),this}recordBBox(e,t,n,i,r,s){const a=w(Pa,this);if(a[0]===1/0)return this;const o=We.multiplyByDOMMatrix(w(ja,this).at(-1),t.getTransform());if(a[0]===-1/0)return We.axialAlignedBoundingBox([n,r,i,s],o,w(Ia,this)),this;const l=[1/0,1/0,-1/0,-1/0];return We.axialAlignedBoundingBox([n,r,i,s],o,l),w(Ia,this)[0]=Math.min(w(Ia,this)[0],Math.max(l[0],a[0])),w(Ia,this)[1]=Math.min(w(Ia,this)[1],Math.max(l[1],a[1])),w(Ia,this)[2]=Math.max(w(Ia,this)[2],Math.min(l[2],a[2])),w(Ia,this)[3]=Math.max(w(Ia,this)[3],Math.min(l[3],a[3])),this}recordCharacterBBox(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;const o=n.bbox;let l,c;if(o&&(l=o[2]!==o[0]&&o[3]!==o[1]&&w(Na,this).get(n),!1!==l&&(c=[0,0,0,0],We.axialAlignedBoundingBox(o,n.fontMatrix,c),1===i&&0===r&&0===s||We.scaleMinMax([i,0,0,-i,r,s],c),l)))return this.recordBBox(e,t,c[0],c[2],c[1],c[3]);if(!a)return this.recordFullPageBBox(e);const d=a();return o&&c&&void 0===l&&(l=c[0]<=r-d.actualBoundingBoxLeft&&c[2]>=r+d.actualBoundingBoxRight&&c[1]<=s-d.actualBoundingBoxAscent&&c[3]>=s+d.actualBoundingBoxDescent,w(Na,this).set(n,l),l)?this.recordBBox(e,t,c[0],c[2],c[1],c[3]):this.recordBBox(e,t,r-d.actualBoundingBoxLeft,r+d.actualBoundingBoxRight,s-d.actualBoundingBoxAscent,s+d.actualBoundingBoxDescent)}recordFullPageBBox(e){return w(Ia,this)[0]=Math.max(0,w(Pa,this)[0]),w(Ia,this)[1]=Math.max(0,w(Pa,this)[1]),w(Ia,this)[2]=Math.min(w(Ba,this),w(Pa,this)[2]),w(Ia,this)[3]=Math.min(w(za,this),w(Pa,this)[3]),this}getSimpleIndex(e){return w(Ca,this)[e]}recordDependencies(e,t){const n=w(Da,this),i=w(Ca,this),r=w(Ma,this);for(const s of t)s in w(Ca,this)?n.add(i[s]):s in r&&r[s].forEach(n.add,n);return this}copyDependenciesFromIncrementalOperation(e,t){const n=w(Fa,this),i=w(Da,this);for(const r of w(Ma,this)[t])n.get(r).dependencies.forEach(i.add,i.add(r));return this}recordNamedDependency(e,t){return w(Ea,this).has(t)&&w(Da,this).add(w(Ea,this).get(t)),this}recordOperation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recordDependencies(e,[Aa]);const n=new Set(w(Da,this)),i=w(Ta,this).concat(w(Ra,this)),r=w(La,this)===e?{minX:w(Ia,this)[0],minY:w(Ia,this)[1],maxX:w(Ia,this)[2],maxY:w(Ia,this)[3]}:null;return w(Fa,this).set(e,{bbox:r,pairs:i,dependencies:n}),t||k(La,this,-1),w(Da,this).clear(),this}bboxToClipBoxDropOperation(e){return-1!==w(La,this)&&(k(La,this,-1),w(Pa,this)[0]=Math.max(w(Pa,this)[0],w(Ia,this)[0]),w(Pa,this)[1]=Math.max(w(Pa,this)[1],w(Ia,this)[1]),w(Pa,this)[2]=Math.min(w(Pa,this)[2],w(Ia,this)[2]),w(Pa,this)[3]=Math.min(w(Pa,this)[3],w(Ia,this)[3])),w(Da,this).clear(),this}_takePendingDependencies(){const e=w(Da,this);return k(Da,this,new Set),e}_extractOperation(e){const t=w(Fa,this).get(e);return w(Fa,this).delete(e),t}_pushPendingDependencies(e){for(const t of e)w(Da,this).add(t)}take(){return w(Na,this).clear(),Array.from(w(Fa,this),e=>{var t,n,i,r;let[s,{bbox:a,pairs:o,dependencies:l}]=e;return o.forEach(e=>e.forEach(l.add,l)),l.delete(s),{minX:(null!==(t=null===a||void 0===a?void 0:a.minX)&&void 0!==t?t:0)/w(Ba,this),maxX:(null!==(n=null===a||void 0===a?void 0:a.maxX)&&void 0!==n?n:w(Ba,this))/w(Ba,this),minY:(null!==(i=null===a||void 0===a?void 0:a.minY)&&void 0!==i?i:0)/w(za,this),maxY:(null!==(r=null===a||void 0===a?void 0:a.maxY)&&void 0!==r?r:w(za,this))/w(za,this),dependencies:Array.from(l).sort((e,t)=>e-t),idx:s}})}}var Oa=new WeakMap,Ha=new WeakMap,Ua=new WeakMap,Va=new WeakMap,Ga=new WeakMap;class qa{constructor(e,t){if(b(this,Oa,void 0),b(this,Ha,void 0),b(this,Ua,0),b(this,Va,void 0),b(this,Ga,0),e instanceof qa)return e;k(Oa,this,e),k(Va,this,e._takePendingDependencies()),k(Ha,this,t)}save(e){var t;return k(Ga,this,(t=w(Ga,this),t++,t)),w(Oa,this).save(w(Ha,this)),this}restore(e){var t;w(Ga,this)>0&&(w(Oa,this).restore(w(Ha,this)),k(Ga,this,(t=w(Ga,this),t--,t)));return this}recordOpenMarker(e){var t;return k(Ua,this,(t=w(Ua,this),t++,t)),this}getOpenMarker(){return w(Ua,this)>0?w(Ha,this):w(Oa,this).getOpenMarker()}recordCloseMarker(e){var t;return k(Ua,this,(t=w(Ua,this),t--,t)),this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return w(Oa,this).pushBaseTransform(e),this}popBaseTransform(){return w(Oa,this).popBaseTransform(),this}recordSimpleData(e,t){return w(Oa,this).recordSimpleData(e,w(Ha,this)),this}recordIncrementalData(e,t){return w(Oa,this).recordIncrementalData(e,w(Ha,this)),this}resetIncrementalData(e,t){return w(Oa,this).resetIncrementalData(e,w(Ha,this)),this}recordNamedData(e,t){return this}recordFutureForcedDependency(e,t){return w(Oa,this).recordFutureForcedDependency(e,w(Ha,this)),this}inheritSimpleDataAsFutureForcedDependencies(e){return w(Oa,this).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return w(Oa,this).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return w(Oa,this).hasPendingBBox||w(Oa,this).resetBBox(w(Ha,this)),this}get hasPendingBBox(){return w(Oa,this).hasPendingBBox}recordClipBox(e,t,n,i,r,s){return w(Oa,this).recordClipBox(w(Ha,this),t,n,i,r,s),this}recordBBox(e,t,n,i,r,s){return w(Oa,this).recordBBox(w(Ha,this),t,n,i,r,s),this}recordCharacterBBox(e,t,n,i,r,s,a){return w(Oa,this).recordCharacterBBox(w(Ha,this),t,n,i,r,s,a),this}recordFullPageBBox(e){return w(Oa,this).recordFullPageBBox(w(Ha,this)),this}getSimpleIndex(e){return w(Oa,this).getSimpleIndex(e)}recordDependencies(e,t){return w(Oa,this).recordDependencies(w(Ha,this),t),this}copyDependenciesFromIncrementalOperation(e,t){return w(Oa,this).copyDependenciesFromIncrementalOperation(w(Ha,this),t),this}recordNamedDependency(e,t){return w(Oa,this).recordNamedDependency(w(Ha,this),t),this}recordOperation(e){w(Oa,this).recordOperation(w(Ha,this),!0);const t=w(Oa,this)._extractOperation(w(Ha,this));for(const n of t.dependencies)w(Va,this).add(n);return w(Va,this).delete(w(Ha,this)),w(Va,this).delete(null),this}bboxToClipBoxDropOperation(e){return w(Oa,this).bboxToClipBoxDropOperation(w(Ha,this)),this}recordNestedDependencies(){w(Oa,this)._pushPendingDependencies(w(Va,this))}take(){throw new Error("Unreachable")}}const Ya=["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],Xa=["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],Ka=["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],Qa=["filter","fillColor","fillAlpha"],$a=["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation"],Ja=["transform"],Za=["transform","fillColor"],eo="Fill",to="Stroke",no="Shading";function io(e,t){if(!t)return;const n=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],n,i),e.clip(r)}class ro{isModifyingCurrentTransform(){return!1}getPattern(){_e("Abstract method `getPattern` called.")}}class so extends ro{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let r;if(i===to||i===eo){const s=t.current.getClippedPathBoundingBox(i,ct(e))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,o=Math.ceil(s[3]-s[1])||1,l=t.cachedCanvases.getCanvas("pattern",a,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),n=We.transform(n,[1,0,0,1,s[0],s[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),io(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=e.createPattern(l.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else io(e,this._bbox),r=this._createGradient(e);return r}}function ao(e,t,n,i,r,s,a,o){const l=t.coords,c=t.colors,d=e.data,h=4*e.width;let u;l[n+1]>l[i+1]&&(u=n,n=i,i=u,u=s,s=a,a=u),l[i+1]>l[r+1]&&(u=i,i=r,r=u,u=a,a=o,o=u),l[n+1]>l[i+1]&&(u=n,n=i,i=u,u=s,s=a,a=u);const p=(l[n]+t.offsetX)*t.scaleX,f=(l[n+1]+t.offsetY)*t.scaleY,g=(l[i]+t.offsetX)*t.scaleX,m=(l[i+1]+t.offsetY)*t.scaleY,v=(l[r]+t.offsetX)*t.scaleX,b=(l[r+1]+t.offsetY)*t.scaleY;if(f>=b)return;const x=c[s],y=c[s+1],w=c[s+2],k=c[a],S=c[a+1],_=c[a+2],A=c[o],C=c[o+1],M=c[o+2],E=Math.round(f),T=Math.round(b);let R,j,P,I,L,D,F,N;for(let B=E;B<=T;B++){if(B<m){const e=B<f?0:(f-B)/(f-m);R=p-(p-g)*e,j=x-(x-k)*e,P=y-(y-S)*e,I=w-(w-_)*e}else{let e;e=B>b?1:m===b?0:(m-B)/(m-b),R=g-(g-v)*e,j=k-(k-A)*e,P=S-(S-C)*e,I=_-(_-M)*e}let e;e=B<f?0:B>b?1:(f-B)/(f-b),L=p-(p-v)*e,D=x-(x-A)*e,F=y-(y-C)*e,N=w-(w-M)*e;const t=Math.round(Math.min(R,L)),n=Math.round(Math.max(R,L));let i=h*B+4*t;for(let r=t;r<=n;r++)e=(R-r)/(R-L),e<0?e=0:e>1&&(e=1),d[i++]=j-(j-D)*e|0,d[i++]=P-(P-F)*e|0,d[i++]=I-(I-N)*e|0,d[i++]=255}}function oo(e,t,n){const i=t.coords,r=t.colors;let s,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(s=0;s<l;s++){let t=s*o;for(let s=0;s<c;s++,t++)ao(e,n,i[t],i[t+1],i[t+o],r[t],r[t+1],r[t+o]),ao(e,n,i[t+o+1],i[t+1],i[t+o],r[t+o+1],r[t+1],r[t+o])}break;case"triangles":for(s=0,a=i.length;s<a;s+=3)ao(e,n,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class lo extends ro{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const i=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-i,a=Math.ceil(this._bounds[3])-r,o=Math.min(Math.ceil(Math.abs(s*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*e[1]*1.1)),3e3),c=s/o,d=a/l,h={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-r,scaleX:1/c,scaleY:1/d},u=o+4,p=l+4,f=n.getCanvas("mesh",u,p),g=f.context,m=g.createImageData(o,l);if(t){const e=m.data;for(let n=0,i=e.length;n<i;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)oo(m,v,h);g.putImageData(m,2,2);return{canvas:f.canvas,offsetX:i-2*c,offsetY:r-2*d,scaleX:c,scaleY:d}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){io(e,this._bbox);const r=new Float32Array(2);if(i===no)We.singularValueDecompose2dScale(ct(e),r);else if(this.matrix){We.singularValueDecompose2dScale(this.matrix,r);const[e,n]=r;We.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=e,r[1]*=n}else We.singularValueDecompose2dScale(t.baseTransform,r);const s=this._createMeshCanvas(r,i===no?null:this._background,t.cachedCanvases);return i!==no&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class co extends ro{getPattern(){return"hotpink"}}const ho=1,uo=2;class po{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e){var t,n,i,r;const{bbox:s,operatorList:a,paintType:o,tilingType:l,color:c,canvasGraphicsFactory:d}=this;let{xstep:h,ystep:u}=this;h=Math.abs(h),u=Math.abs(u),ke("TilingType: "+l);const p=s[0],f=s[1],g=s[2],m=s[3],v=g-p,b=m-f,x=new Float32Array(2);We.singularValueDecompose2dScale(this.matrix,x);const[y,w]=x;We.singularValueDecompose2dScale(this.baseTransform,x);const k=y*x[0],S=w*x[1];let _=v,A=b,C=!1,M=!1;const E=Math.ceil(h*k),T=Math.ceil(u*S);E>=Math.ceil(v*k)?_=h:C=!0,T>=Math.ceil(b*S)?A=u:M=!0;const R=this.getSizeAndScale(_,this.ctx.canvas.width,k),j=this.getSizeAndScale(A,this.ctx.canvas.height,S),P=e.cachedCanvases.getCanvas("pattern",R.size,j.size),I=P.context,L=d.createCanvasGraphics(I);if(L.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(L,o,c),I.translate(-R.scale*p,-j.scale*f),L.transform(0,R.scale,0,0,j.scale,0,0),I.save(),null===(t=L.dependencyTracker)||void 0===t||t.save(),this.clipBbox(L,p,f,g,m),L.baseTransform=ct(L.ctx),L.executeOperatorList(a),L.endDrawing(),null===(n=L.dependencyTracker)||void 0===n||null===(i=(r=n.restore()).recordNestedDependencies)||void 0===i||i.call(r),I.restore(),C||M){const t=P.canvas;C&&(_=h),M&&(A=u);const n=this.getSizeAndScale(_,this.ctx.canvas.width,k),i=this.getSizeAndScale(A,this.ctx.canvas.height,S),r=n.size,s=i.size,a=e.cachedCanvases.getCanvas("pattern-workaround",r,s),o=a.context,l=C?Math.floor(v/h):0,c=M?Math.floor(b/u):0;for(let e=0;e<=l;e++)for(let n=0;n<=c;n++)o.drawImage(t,r*e,s*n,r,s,0,0,r,s);return{canvas:a.canvas,scaleX:n.scale,scaleY:i.scale,offsetX:p,offsetY:f}}return{canvas:P.canvas,scaleX:R.scale,scaleY:j.scale,offsetX:p,offsetY:f}}getSizeAndScale(e,t,n){const i=Math.max(po.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=i?r=i:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,i,r){const s=i-t,a=r-n;e.ctx.rect(t,n,s,a),We.axialAlignedBoundingBox([t,n,i,r],ct(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,r=e.current;switch(t){case ho:const{fillStyle:e,strokeStyle:s}=this.ctx;i.fillStyle=r.fillColor=e,i.strokeStyle=r.strokeColor=s;break;case uo:i.fillStyle=i.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new Le("Unsupported paint type: ".concat(t))}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i){let r=n;i!==no&&(r=We.transform(r,t.baseTransform),this.matrix&&(r=We.transform(r,this.matrix)));const s=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(s.offsetX,s.offsetY),a=a.scale(1/s.scaleX,1/s.scaleY);const o=e.createPattern(s.canvas,"repeat");return o.setTransform(a),o}}function fo(e){let{src:t,srcPos:n=0,dest:i,width:r,height:s,nonBlackColor:a=4294967295,inverseDecode:o=!1}=e;const l=Be.isLittleEndian?4278190080:255,[c,d]=o?[a,l]:[l,a],h=r>>3,u=7&r,p=t.length;i=new Uint32Array(i.buffer);let f=0;for(let g=0;g<s;g++){for(const r=n+h;n<r;n++){const e=n<p?t[n]:255;i[f++]=128&e?d:c,i[f++]=64&e?d:c,i[f++]=32&e?d:c,i[f++]=16&e?d:c,i[f++]=8&e?d:c,i[f++]=4&e?d:c,i[f++]=2&e?d:c,i[f++]=1&e?d:c}if(0===u)continue;const e=n<p?t[n++]:255;for(let t=0;t<u;t++)i[f++]=e&1<<7-t?d:c}return{srcPos:n,destPos:f}}o(po,"MAX_PATTERN_SIZE",3e3);const go=16,mo=new DOMMatrix,vo=new Float32Array(2),bo=new Float32Array([1/0,1/0,-1/0,-1/0]);class xo{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function yo(e,t,n,i,r,s,a,o,l,c){const[d,h,u,p,f,g]=ct(e);if(0===h&&0===u){const m=a*d+f,v=Math.round(m),b=o*p+g,x=Math.round(b),y=(a+l)*d+f,w=Math.abs(Math.round(y)-v)||1,k=(o+c)*p+g,S=Math.abs(Math.round(k)-x)||1;return e.setTransform(Math.sign(d),0,0,Math.sign(p),v,x),e.drawImage(t,n,i,r,s,0,0,w,S),e.setTransform(d,h,u,p,f,g),[w,S]}if(0===d&&0===p){const m=o*u+f,v=Math.round(m),b=a*h+g,x=Math.round(b),y=(o+c)*u+f,w=Math.abs(Math.round(y)-v)||1,k=(a+l)*h+g,S=Math.abs(Math.round(k)-x)||1;return e.setTransform(0,Math.sign(h),Math.sign(u),0,v,x),e.drawImage(t,n,i,r,s,0,0,S,w),e.setTransform(d,h,u,p,f,g),[S,w]}e.drawImage(t,n,i,r,s,a,o,l,c);return[Math.hypot(d,h)*l,Math.hypot(u,p)*c]}class wo{constructor(e,t,n){o(this,"alphaIsShape",!1),o(this,"fontSize",0),o(this,"fontSizeScale",1),o(this,"textMatrix",null),o(this,"textMatrixScale",1),o(this,"fontMatrix",W),o(this,"leading",0),o(this,"x",0),o(this,"y",0),o(this,"lineX",0),o(this,"lineY",0),o(this,"charSpacing",0),o(this,"wordSpacing",0),o(this,"textHScale",1),o(this,"textRenderingMode",ee),o(this,"textRise",0),o(this,"fillColor","#000000"),o(this,"strokeColor","#000000"),o(this,"patternFill",!1),o(this,"patternStroke",!1),o(this,"fillAlpha",1),o(this,"strokeAlpha",1),o(this,"lineWidth",1),o(this,"activeSMask",null),o(this,"transferMaps","none"),null===n||void 0===n||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=bo.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.minMax.slice();if(e===to){t||_e("Stroke bounding box must include transform."),We.singularValueDecompose2dScale(t,vo);const e=vo[0]*this.lineWidth/2,i=vo[1]*this.lineWidth/2;n[0]-=e,n[1]-=i,n[2]+=e,n[3]+=i}return n}updateClipFromPath(){const e=We.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(bo,0)}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return We.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function ko(e,t){if(t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,i=t.width,r=n%go,s=(n-r)/go,a=0===r?s:s+1,o=e.createImageData(i,go);let l,c=0;const d=t.data,h=o.data;let u,p,f,g;if(t.kind===ae.GRAYSCALE_1BPP){const t=d.byteLength,n=new Uint32Array(h.buffer,0,h.byteLength>>2),g=n.length,m=i+7>>3,v=4294967295,b=Be.isLittleEndian?4278190080:255;for(u=0;u<a;u++){for(f=u<s?go:r,l=0,p=0;p<f;p++){const e=t-c;let r=0;const s=e>m?i:8*e-7,a=-8&s;let o=0,h=0;for(;r<a;r+=8)h=d[c++],n[l++]=128&h?v:b,n[l++]=64&h?v:b,n[l++]=32&h?v:b,n[l++]=16&h?v:b,n[l++]=8&h?v:b,n[l++]=4&h?v:b,n[l++]=2&h?v:b,n[l++]=1&h?v:b;for(;r<s;r++)0===o&&(h=d[c++],o=128),n[l++]=h&o?v:b,o>>=1}for(;l<g;)n[l++]=0;e.putImageData(o,0,u*go)}}else if(t.kind===ae.RGBA_32BPP){for(p=0,g=i*go*4,u=0;u<s;u++)h.set(d.subarray(c,c+g)),c+=g,e.putImageData(o,0,p),p+=go;u<a&&(g=i*r*4,h.set(d.subarray(c,c+g)),e.putImageData(o,0,p))}else{if(t.kind!==ae.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(f=go,g=i*f,u=0;u<a;u++){for(u>=s&&(f=r,g=i*f),l=0,p=g;p--;)h[l++]=d[c++],h[l++]=d[c++],h[l++]=d[c++],h[l++]=255;e.putImageData(o,0,u*go)}}}function So(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,i=t.width,r=n%go,s=(n-r)/go,a=0===r?s:s+1,o=e.createImageData(i,go);let l=0;const c=t.data,d=o.data;for(let h=0;h<a;h++){const t=h<s?go:r;({srcPos:l}=fo({src:c,srcPos:l,dest:d,width:i,height:t,nonBlackColor:0})),e.putImageData(o,0,h*go)}}function _o(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==e[i]&&(t[i]=e[i]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function Ao(e){e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0);const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}function Co(e,t){if(t)return!0;We.singularValueDecompose2dScale(e,vo);const n=Math.fround(ut.pixelRatio*Qe.PDF_TO_CSS_UNITS);return vo[0]<=n&&vo[1]<=n}const Mo=["butt","round","square"],Eo=["miter","round","bevel"],To={},Ro={};var jo=new WeakSet;class Po{constructor(e,t,n,i,r,s,a,o,l){let{optionalContentConfig:c,markedContentStack:d=null}=s;v(this,jo),this.ctx=e,this.current=new wo(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=c,this.cachedCanvases=new xo(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=null!==l&&void 0!==l?l:null}getObject(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var i;return"string"===typeof t?(null===(i=this.dependencyTracker)||void 0===i||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing(e){let{transform:t,viewport:n,transparency:i=!1,background:r=null}=e;const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const e=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...ct(this.compositeCtx))}this.ctx.save(),Ao(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=ct(this.ctx)}executeOperatorList(e,t,n,i,r){const s=e.argsArray,a=e.fnArray;let o=t||0;const l=s.length;if(l===o)return o;const c=l-o>10&&"function"===typeof n,d=c?Date.now()+15:0;let h=0;const u=this.commonObjs,p=this.objs;let f,g;for(;;){if(void 0!==i&&o===i.nextBreakPoint)return i.breakIt(o,n),o;var m;if(!r||r.has(o))if(f=a[o],g=null!==(m=s[o])&&void 0!==m?m:null,f!==fe.dependency)null===g?this[f](o):this[f](o,...g);else for(const e of g){var v;null===(v=this.dependencyTracker)||void 0===v||v.recordNamedData(e,o);const t=e.startsWith("g_")?u:p;if(!t.has(e))return t.get(e,n),o}if(o++,o===l)return o;if(c&&++h>10){if(Date.now()>d)return n(),o;h=0}}}endDrawing(){x(jo,this,Io).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),x(jo,this,Lo).call(this)}_scaleImage(e,t){var n,i;const r=null!==(n=e.width)&&void 0!==n?n:e.displayWidth,s=null!==(i=e.height)&&void 0!==i?i:e.displayHeight;let a,o,l=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),d=r,h=s,u="prescale1";for(;l>2&&d>1||c>2&&h>1;){let t=d,n=h;l>2&&d>1&&(t=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),l/=d/t),c>2&&h>1&&(n=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/n),a=this.cachedCanvases.getCanvas(u,t,n),o=a.context,o.clearRect(0,0,t,n),o.drawImage(e,0,0,d,h,0,0,t,n),e=a.canvas,d=t,h=n,u="prescale1"===u?"prescale2":"prescale1"}return{img:e,paintWidth:d,paintHeight:h}}_createMaskCanvas(e,t){var n;const i=this.ctx,{width:r,height:s}=t,a=this.current.fillColor,o=this.current.patternFill,l=ct(i);let c,d,h,u;if((t.bitmap||t.data)&&t.count>1){const n=t.bitmap||t.data.buffer;d=JSON.stringify(o?l:[l.slice(0,4),a]),c=this._cachedBitmapsMap.get(n),c||(c=new Map,this._cachedBitmapsMap.set(n,c));const i=c.get(d);if(i&&!o){var p;const t=Math.round(Math.min(l[0],l[2])+l[4]),n=Math.round(Math.min(l[1],l[3])+l[5]);return null===(p=this.dependencyTracker)||void 0===p||p.recordDependencies(e,Za),{canvas:i,offsetX:t,offsetY:n}}h=i}h||(u=this.cachedCanvases.getCanvas("maskCanvas",r,s),So(u.context,t));let f=We.transform(l,[1/r,0,0,-1/s,0,0]);f=We.transform(f,[1,0,0,1,0,-s]);const g=bo.slice();We.axialAlignedBoundingBox([0,0,r,s],f,g);const[m,v,b,x]=g,y=Math.round(b-m)||1,w=Math.round(x-v)||1,k=this.cachedCanvases.getCanvas("fillCanvas",y,w),S=k.context,_=m,A=v;S.translate(-_,-A),S.transform(...f),h||(h=this._scaleImage(u.canvas,dt(S)),h=h.img,c&&o&&c.set(d,h)),S.imageSmoothingEnabled=Co(ct(S),t.interpolate),yo(S,h,0,0,h.width,h.height,0,0,r,s),S.globalCompositeOperation="source-in";const C=We.transform(dt(S),[1,0,0,1,-_,-A]);return S.fillStyle=o?a.getPattern(i,this,C,eo):a,S.fillRect(0,0,r,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,k.canvas)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,Za),{canvas:k.canvas,offsetX:Math.round(_),offsetY:Math.round(A)}}setLineWidth(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineCap",e),this.ctx.lineCap=Mo[t]}setLineJoin(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=Eo[t]}setMiterLimit(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("dash",e);const r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(t),r.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,i,r,s,a;for(const[o,l]of t)switch(o){case"LW":this.setLineWidth(e,l);break;case"LC":this.setLineCap(e,l);break;case"LJ":this.setLineJoin(e,l);break;case"ML":this.setMiterLimit(e,l);break;case"D":this.setDash(e,l[0],l[1]);break;case"RI":this.setRenderingIntent(e,l);break;case"FL":this.setFlatness(e,l);break;case"Font":this.setFont(e,l[0],l[1]);break;case"CA":null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=l;break;case"ca":null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=l;break;case"BM":null===(r=this.dependencyTracker)||void 0===r||r.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=l;break;case"SMask":null===(s=this.dependencyTracker)||void 0===s||s.recordSimpleData("SMask",e),this.current.activeSMask=l?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":null===(a=this.dependencyTracker)||void 0===a||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(l)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const s=this.ctx=r.context;s.setTransform(this.suspendedCtx.getTransform()),_o(this.suspendedCtx,s),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,i,r,s,a){t.transform(e,n,i,r,s,a),this.__originalTransform(e,n,i,r,s,a)},e.setTransform=function(e,n,i,r,s,a){t.setTransform(e,n,i,r,s,a),this.__originalSetTransform(e,n,i,r,s,a)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,i,r,s,a){t.bezierCurveTo(e,n,i,r,s,a),this.__originalBezierCurveTo(e,n,i,r,s,a)},e.rect=function(e,n,i,r){t.rect(e,n,i,r),this.__originalRect(e,n,i,r)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),_o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const r=i[0],s=i[1],a=i[2]-r,o=i[3]-s;0!==a&&0!==o&&(this.genericComposeSMask(t.context,n,a,o,t.subtype,t.backdrop,t.transferMap,r,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,r,s,a,o,l,c,d){let h=e.canvas,u=o-c,p=l-d;if(s)if(u<0||p<0||u+n>h.width||p+i>h.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,i),t=e.context;t.drawImage(h,-u,-p),t.globalCompositeOperation="destination-atop",t.fillStyle=s,t.fillRect(0,0,n,i),t.globalCompositeOperation="source-over",h=e.canvas,u=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(u,p,n,i),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(u,p,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===r&&a?t.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===r&&(t.filter=this.filterFactory.addLuminosityFilter(a));const f=new Path2D;f.rect(o,l,n,i),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(h,u,p,n,i,o,l,n,i),t.restore()}save(e){var t;this.inSMaskMode&&_o(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),null===(t=this.dependencyTracker)||void 0===t||t.save(e)}restore(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.restore(e),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&_o(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(e,t,n,i,r,s,a){var o;null===(o=this.dependencyTracker)||void 0===o||o.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,r,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[r]=n;if(!i)return r||(r=n[0]=new Path2D),void this[t](e,r);if(null!==this.dependencyTracker){const n=t===fe.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-n,i[2]+n,i[1]-n,i[3]+n).recordDependencies(e,["transform"])}if(!(r instanceof Path2D)){const e=n[0]=new Path2D;for(let t=0,n=r.length;t<n;)switch(r[t++]){case ge:e.moveTo(r[t++],r[t++]);break;case me:e.lineTo(r[t++],r[t++]);break;case ve:e.bezierCurveTo(r[t++],r[t++],r[t++],r[t++],r[t++],r[t++]);break;case be:e.closePath();break;default:Se("Unrecognized drawing path operator: ".concat(r[t-1]))}r=e}We.axialAlignedBoundingBox(i,ct(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t){var n;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===typeof s&&null!==s&&void 0!==s&&s.getPattern){const e=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,dt(r),to),e){const n=new Path2D;n.addPath(t,r.getTransform().invertSelf().multiplySelf(e)),t=n}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,Ya),i&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(to,ct(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t){var n;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.ctx,s=this.current.fillColor;let a=!1;if(this.current.patternFill){var o;const n=s.isModifyingCurrentTransform()?r.getTransform():null;if(null===(o=this.dependencyTracker)||void 0===o||o.save(e),r.save(),r.fillStyle=s.getPattern(r,this,dt(r),eo),n){const e=new Path2D;e.addPath(t,r.getTransform().invertSelf().multiplySelf(n)),t=e}a=!0}const l=this.current.getClippedPathBoundingBox();var c;(this.contentVisible&&null!==l&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,Xa),a)&&(r.restore(),null===(c=this.dependencyTracker)||void 0===c||c.restore(e));i&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,Qa).recordOperation(e)}clip(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=To}eoClip(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=Ro}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,null===(t=this.dependencyTracker)||void 0===t||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:n}=this;void 0!==t&&n.recordFutureForcedDependency("textClip",n.getOpenMarker()).recordFutureForcedDependency("textClip",e),n.recordCloseMarker(e)}if(void 0!==t){const e=new Path2D,i=n.getTransform().invertSelf();for(const{transform:n,x:r,y:s,fontSize:a,path:o}of t)o&&e.addPath(o,new DOMMatrix(n).preMultiplySelf(i).translate(r,s).scale(a,-a));n.clip(e)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var i,r;null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("font",e).recordNamedDependency(e,t);const s=this.commonObjs.get(t),a=this.current;if(!s)throw new Error("Can't find font for ".concat(t));if(a.fontMatrix=s.fontMatrix||W,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||Se("Invalid font matrix for font "+t),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const o=s.loadedName||"sans-serif",l=(null===(r=s.systemFontInfo)||void 0===r?void 0:r.css)||'"'.concat(o,'", ').concat(s.fallbackName);let c="normal";s.black?c="900":s.bold&&(c="bold");const d=s.italic?"italic":"normal";let h=n;n<16?h=16:n>100&&(h=100),this.current.fontSizeScale=n/h,this.ctx.font="".concat(d," ").concat(c," ").concat(h,"px ").concat(l)}setTextRenderingMode(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textMatrix",e);const{current:i}=this;i.textMatrix=t,i.textMatrixScale=Math.hypot(t[0],t[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(e){var t,n;this.moveText(e,0,this.current.leading),null===(t=this.dependencyTracker)||void 0===t||t.recordIncrementalData("moveText",null!==(n=this.dependencyTracker.getSimpleIndex("leading"))&&void 0!==n?n:e)}paintChar(e,t,n,i,r,s){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,d=o.fontSize/o.fontSizeScale,h=c&re,u=!!(c&se),p=o.patternFill&&!l.missingFile,f=o.patternStroke&&!l.missingFile;let g;if((l.disableFontFace||u||p||f)&&!l.missingFile&&(g=l.getPathGenerator(this.commonObjs,t)),g&&(l.disableFontFace||p||f)){var m;let t;if(a.save(),a.translate(n,i),a.scale(d,-d),null===(m=this.dependencyTracker)||void 0===m||m.recordCharacterBBox(e,a,l),h===ee||h===ne)if(r){t=a.getTransform(),a.setTransform(...r);const e=x(jo,this,Do).call(this,g,t,r);a.fill(e)}else a.fill(g);if(h===te||h===ne)if(s){t||(t=a.getTransform()),a.setTransform(...s);const{a:e,b:n,c:i,d:r}=t,o=We.inverseTransform(s),l=We.transform([e,n,i,r,0,0],o);We.singularValueDecompose2dScale(l,vo),a.lineWidth*=Math.max(vo[0],vo[1])/d,a.stroke(x(jo,this,Do).call(this,g,t,s))}else a.lineWidth/=d,a.stroke(g);a.restore()}else{var v;if(h===ee||h===ne)a.fillText(t,n,i),null===(v=this.dependencyTracker)||void 0===v||v.recordCharacterBBox(e,a,l,d,n,i,()=>a.measureText(t));if(h===te||h===ne){var b;if(this.dependencyTracker)null===(b=this.dependencyTracker)||void 0===b||b.recordCharacterBBox(e,a,l,d,n,i,()=>a.measureText(t)).recordDependencies(e,Ya);a.strokeText(t,n,i)}}if(u){var y;(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ct(a),x:n,y:i,fontSize:d,path:g}),null===(y=this.dependencyTracker)||void 0===y||y.recordCharacterBBox(e,a,l,d,n,i)}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Ee(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var n;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,$a).copyDependenciesFromIncrementalOperation(e,"sameLineText").resetBBox(e),this.current.textRenderingMode&se&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;var s;if(r.isType3Font)return this.showType3Text(e,t),void(null===(s=this.dependencyTracker)||void 0===s||s.recordOperation(e).recordIncrementalData("sameLineText",e));const a=i.fontSize;var o;if(0===a)return void(null===(o=this.dependencyTracker)||void 0===o||o.recordOperation(e));const l=this.ctx,c=i.fontSizeScale,d=i.charSpacing,h=i.wordSpacing,u=i.fontDirection,p=i.textHScale*u,f=t.length,g=r.vertical,m=g?1:-1,v=r.defaultVMetrics,b=a*i.fontMatrix[0],x=i.textRenderingMode===ee&&!r.disableFontFace&&!i.patternFill;let y,w;if(l.save(),i.textMatrix&&l.transform(...i.textMatrix),l.translate(i.x,i.y+i.textRise),u>0?l.scale(p,-1):l.scale(p,1),i.patternFill){l.save();const e=i.fillColor.getPattern(l,this,dt(l),eo);y=ct(l),l.restore(),l.fillStyle=e}if(i.patternStroke){l.save();const e=i.strokeColor.getPattern(l,this,dt(l),to);w=ct(l),l.restore(),l.strokeStyle=e}let k=i.lineWidth;const S=i.textMatrixScale;if(0===S||0===k){const e=i.textRenderingMode&re;e!==te&&e!==ne||(k=this.getSinglePixelWidth())}else k/=S;if(1!==c&&(l.scale(c,c),k/=c),l.lineWidth=k,r.isInvalidPDFjsFont){const n=[];let r=0;for(const e of t)n.push(e.unicode),r+=e.width;const s=n.join("");if(l.fillText(s,0,0),null!==this.dependencyTracker){const t=l.measureText(s);this.dependencyTracker.recordBBox(e,this.ctx,-t.actualBoundingBoxLeft,t.actualBoundingBoxRight,-t.actualBoundingBoxAscent,t.actualBoundingBoxDescent).recordOperation(e).recordIncrementalData("sameLineText",e)}return i.x+=r*b*p,l.restore(),void this.compose()}let _,A=0;for(_=0;_<f;++_){const n=t[_];if("number"===typeof n){A+=m*n*a/1e3;continue}let i=!1;const s=(n.isSpace?h:0)+d,o=n.fontChar,p=n.accent;let f,k,S,M=n.width;if(g){const e=n.vmetric||v,t=-(n.vmetric?e[1]:.5*M)*b,i=e[2]*b;M=e?-e[0]:M,f=t/c,k=(A+i)/c}else f=A/c,k=0;if(r.remeasure&&M>0){S=l.measureText(o);const e=1e3*S.width/a*c;if(M<e&&this.isFontSubpixelAAEnabled){const t=M/e;i=!0,l.save(),l.scale(t,1),f/=t}else M!==e&&(f+=(M-e)/2e3*a/c)}var C;if(this.contentVisible&&(n.isInFont||r.missingFile))if(x&&!p)l.fillText(o,f,k),null===(C=this.dependencyTracker)||void 0===C||C.recordCharacterBBox(e,l,S?{bbox:null}:r,a/c,f,k,()=>null!==S&&void 0!==S?S:l.measureText(o));else if(this.paintChar(e,o,f,k,y,w),p){const t=f+a*p.offset.x/c,n=k-a*p.offset.y/c;this.paintChar(e,p.fontChar,t,n,y,w)}A+=g?M*b-s*u:M*b+s*u,i&&l.restore()}g?i.y-=A:i.x+=A*p,l.restore(),this.compose(),null===(n=this.dependencyTracker)||void 0===n||n.recordOperation(e).recordIncrementalData("sameLineText",e)}showType3Text(e,t){const n=this.ctx,i=this.current,r=i.font,s=i.fontSize,a=i.fontDirection,o=r.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,d=i.textHScale*a,h=i.fontMatrix||W,u=t.length;let p,f,g,m;if(i.textRenderingMode===ie||0===s)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(d,a);const v=this.dependencyTracker;for(this.dependencyTracker=v?new qa(v,e):null,p=0;p<u;++p){if(f=t[p],"number"===typeof f){m=o*f*s/1e3,this.ctx.translate(m,0),i.x+=m*d;continue}const e=(f.isSpace?c:0)+l,a=r.charProcOperatorList[f.operatorListId];a?this.contentVisible&&(this.save(),n.scale(s,s),n.transform(...h),this.executeOperatorList(a),this.restore()):Se('Type3 character "'.concat(f.operatorListId,'" is not available.'));const u=[f.width,0];We.applyTransform(u,h),g=u[0]*s+e,n.translate(g,0),i.x+=g*d}n.restore(),v&&(this.dependencyTracker.recordNestedDependencies(),this.dependencyTracker=v)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,r,s,a){var o;const l=new Path2D;l.rect(i,r,s-i,a-r),this.ctx.clip(l),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(e,this.ctx,i,s,r,a).recordClipBox(e,this.ctx,i,s,r,a),this.endPath(e)}getColorN_Pattern(e,t){let n;if("TilingPattern"===t[0]){const i=this.baseTransform||ct(this.ctx),r={createCanvasGraphics:t=>new Po(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new qa(this.dependencyTracker,e):null)};n=new po(t,this.ctx,r,i)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("strokeColor",e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.current.strokeColor=this.getColorN_Pattern(e,i),this.current.patternStroke=!0}setFillColorN(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("fillColor",e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.current.fillColor=this.getColorN_Pattern(e,i),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=function(e){switch(e[0]){case"RadialAxial":return new so(e);case"Mesh":return new lo(e);case"Dummy":return new co}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e,t)),this.cachedPatterns.set(t,n)),i&&(n.matrix=i),n}shadingFill(e,t){var n;if(!this.contentVisible)return;const i=this.ctx;this.save(e);const r=this._getPattern(e,t);i.fillStyle=r.getPattern(i,this,dt(i),no);const s=dt(i);if(s){const{width:e,height:t}=i.canvas,n=bo.slice();We.axialAlignedBoundingBox([0,0,e,t],s,n);const[r,a,o,l]=n;this.ctx.fillRect(r,a,o-r,l-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Ja).recordDependencies(e,Xa).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){_e("Should not call beginInlineImage")}beginImageData(){_e("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=ct(this.ctx),n)){var i;We.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[t,r,s,a]=n,o=new Path2D;o.rect(t,r,s-t,a-r),this.ctx.clip(o),null===(i=this.dependencyTracker)||void 0===i||i.recordClipBox(e,this.ctx,t,s,r,a),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var n;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||ke("TODO: Support non-isolated groups."),t.knockout&&Se("Knockout groups not supported.");const r=ct(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=bo.slice();We.axialAlignedBoundingBox(t.bbox,ct(i),s);const a=[0,0,i.canvas.width,i.canvas.height];s=We.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),d=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(h,c,d),p=u.context;p.translate(-o,-l),p.transform(...r);let f=new Path2D;const[g,m,v,b]=t.bbox;if(f.rect(g,m,v-g,b-m),t.matrix){const e=new Path2D;e.addPath(f,new DOMMatrix(t.matrix)),f=e}p.clip(f),t.smask&&this.smaskStack.push({canvas:u.canvas,context:p,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),t.smask&&!this.dependencyTracker||(i.setTransform(1,0,0,1,0,0),i.translate(o,l),i.save()),_o(i,p),this.ctx=p,null===(n=this.dependencyTracker)||void 0===n||n.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(e,t){var n;if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,null===(n=this.dependencyTracker)||void 0===n||n.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const t=ct(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...t);const n=bo.slice();We.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],t,n),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,i,r,s){if(x(jo,this,Io).call(this),Ao(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const r=n[2]-n[0],a=n[3]-n[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=n[0],i[5]-=n[1],(n=n.slice())[0]=n[1]=0,n[2]=r,n[3]=a,We.singularValueDecompose2dScale(ct(this.ctx),vo);const{viewportScale:e}=this,s=Math.ceil(r*this.outputScaleX*e),o=Math.ceil(a*this.outputScaleY*e);this.annotationCanvas=this.canvasFactory.create(s,o);const{canvas:l,context:c}=this.annotationCanvas;this.annotationCanvasMap.set(t,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(vo[0],0,0,-vo[1],0,a*vo[1]),Ao(this.ctx)}else{Ao(this.ctx),this.endPath(e);const t=new Path2D;t.rect(n[0],n[1],r,a),this.ctx.clip(t)}}this.current=new wo(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),x(jo,this,Lo).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var n;if(!this.contentVisible)return;const i=t.count;(t=this.getObject(e,t.data,t)).count=i;const r=this.ctx,s=this._createMaskCanvas(e,t),a=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,s.offsetX,s.offsetY),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n){var i,r;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const d=ct(c);c.transform(n,s,a,o,0,0);const h=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,h.offsetX-d[4],h.offsetY-d[5]),null===(i=this.dependencyTracker)||void 0===i||i.resetBBox(e);for(let p=0,f=l.length;p<f;p+=2){var u;const t=We.transform(d,[n,s,a,o,l[p],l[p+1]]);c.drawImage(h.canvas,t[4],t[5]),null===(u=this.dependencyTracker)||void 0===u||u.recordBBox(e,this.ctx,t[4],t[4]+h.canvas.width,t[5],t[5]+h.canvas.height)}c.restore(),this.compose(),null===(r=this.dependencyTracker)||void 0===r||r.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var n,i;if(!this.contentVisible)return;const r=this.ctx,s=this.current.fillColor,a=this.current.patternFill;null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordDependencies(e,Za);for(const l of t){var o;const{data:t,width:n,height:i,transform:c}=l,d=this.cachedCanvases.getCanvas("maskCanvas",n,i),h=d.context;h.save();So(h,this.getObject(e,t,l)),h.globalCompositeOperation="source-in",h.fillStyle=a?s.getPattern(h,this,dt(r),eo):s,h.fillRect(0,0,n,i),h.restore(),r.save(),r.transform(...c),r.scale(1,-1),yo(r,d.canvas,0,0,n,i,0,-1,1,1),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(e,r,0,n,0,i),r.restore()}this.compose(),null===(i=this.dependencyTracker)||void 0===i||i.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);n?this.paintInlineImageXObject(e,n):Se("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i,r){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s)return void Se("Dependent image isn't ready yet");const a=s.width,o=s.height,l=[];for(let c=0,d=r.length;c<d;c+=2)l.push({transform:[n,0,0,i,r[c],r[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(e,s,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,i),s=r.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",r.canvas}paintInlineImageXObject(e,t){var n;if(!this.contentVisible)return;const i=t.width,r=t.height,s=this.ctx;this.save(e);const{filter:a}=s;let o;if("none"!==a&&""!==a&&(s.filter="none"),s.scale(1/i,-1/r),t.bitmap)o=this.applyTransferMapsToBitmap(t);else if("function"===typeof HTMLElement&&t instanceof HTMLElement||!t.data)o=t;else{const e=this.cachedCanvases.getCanvas("inlineImage",i,r).context;ko(e,t),o=this.applyTransferMapsToCanvas(e)}const l=this._scaleImage(o,dt(s));s.imageSmoothingEnabled=Co(ct(s),t.interpolate),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordBBox(e,s,0,i,-r,0).recordDependencies(e,Ka).recordOperation(e),yo(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-r,i,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var i,r;if(!this.contentVisible)return;const s=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const e=t.width,n=t.height,i=this.cachedCanvases.getCanvas("inlineImage",e,n).context;ko(i,t),a=this.applyTransferMapsToCanvas(i)}null===(i=this.dependencyTracker)||void 0===i||i.resetBBox(e);for(const l of n){var o;s.save(),s.transform(...l.transform),s.scale(1,-1),yo(s,a,l.x,l.y,l.w,l.h,0,-1,1,1),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(e,s,0,1,-1,0),s.restore()}null===(r=this.dependencyTracker)||void 0===r||r.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&(null===(t=this.dependencyTracker)||void 0===t||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Xa).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.beginMarkedContent(e),"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;var s,a;this.pendingClip?(i||(this.pendingClip===Ro?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,null===(s=this.dependencyTracker)||void 0===s||s.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):null===(a=this.dependencyTracker)||void 0===a||a.recordOperation(e);this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ct(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:r}=this.ctx.getTransform();let s,a;if(0===n&&0===i){const n=Math.abs(t),i=Math.abs(r);if(n===i)if(0===e)s=a=1/n;else{const t=n*e;s=a=t<1?1/t:1}else if(0===e)s=1/n,a=1/i;else{const t=n*e,r=i*e;s=t<1?1/t:1,a=r<1?1/r:1}}else{const o=Math.abs(t*r-n*i),l=Math.hypot(t,n),c=Math.hypot(i,r);if(0===e)s=c/o,a=l/o;else{const t=e*o;s=c>t?c/t:1,a=l>t?l/t:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[r,s]=this.getScaleForStroking();if(r===s)return n.lineWidth=(i||1)*r,void n.stroke(e);const a=n.getLineDash();t&&n.save(),n.scale(r,s),mo.a=1/r,mo.d=1/s;const o=new Path2D;if(o.addPath(e,mo),a.length>0){const e=Math.max(r,s);n.setLineDash(a.map(t=>t/e)),n.lineDashOffset/=e}n.lineWidth=i||1,n.stroke(o),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function Io(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function Lo(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function Do(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i}for(const Gm in fe)void 0!==Po.prototype[Gm]&&(Po.prototype[fe[Gm]]=Po.prototype[Gm]);class Fo{static get workerPort(){return x(Fo,this,No)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");No._=x(Fo,this,e)}static get workerSrc(){return x(Fo,this,Bo)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");Bo._=x(Fo,this,e)}}var No={_:null},Bo={_:""},zo=new WeakMap,Wo=new WeakMap;class Oo{constructor(e){let{parsedData:t,rawData:n}=e;b(this,zo,void 0),b(this,Wo,void 0),k(zo,this,t),k(Wo,this,n)}getRaw(){return w(Wo,this)}get(e){var t;return null!==(t=w(zo,this).get(e))&&void 0!==t?t:null}[Symbol.iterator](){return w(zo,this).entries()}}const Ho=Symbol("INTERNAL");var Uo=new WeakMap,Vo=new WeakMap,Go=new WeakMap,qo=new WeakMap;class Yo{constructor(e,t){let{name:n,intent:i,usage:r,rbGroups:s}=t;b(this,Uo,!1),b(this,Vo,!1),b(this,Go,!1),b(this,qo,!0),k(Uo,this,!!(e&U)),k(Vo,this,!!(e&V)),this.name=n,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(w(Go,this))return w(qo,this);if(!w(qo,this))return!1;const{print:e,view:t}=this.usage;return w(Uo,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!w(Vo,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==Ho&&_e("Internal method `_setVisible` called."),k(Go,this,n),k(qo,this,t)}}var Xo=new WeakMap,Ko=new WeakMap,Qo=new WeakMap,$o=new WeakMap,Jo=new WeakSet;class Zo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U;if(v(this,Jo),b(this,Xo,null),b(this,Ko,new Map),b(this,Qo,null),b(this,$o,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,k($o,this,e.order);for(const n of e.groups)w(Ko,this).set(n.id,new Yo(t,n));if("OFF"===e.baseState)for(const e of w(Ko,this).values())e._setVisible(Ho,!1);for(const t of e.on)w(Ko,this).get(t)._setVisible(Ho,!0);for(const t of e.off)w(Ko,this).get(t)._setVisible(Ho,!1);k(Qo,this,this.getHash())}}isVisible(e){if(0===w(Ko,this).size)return!0;if(!e)return ke("Optional content group not defined."),!0;if("OCG"===e.type)return w(Ko,this).has(e.id)?w(Ko,this).get(e.id).visible:(Se("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return x(Jo,this,el).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!w(Ko,this).has(t))return Se("Optional content group not found: ".concat(t)),!0;if(w(Ko,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!w(Ko,this).has(t))return Se("Optional content group not found: ".concat(t)),!0;if(!w(Ko,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!w(Ko,this).has(t))return Se("Optional content group not found: ".concat(t)),!0;if(!w(Ko,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!w(Ko,this).has(t))return Se("Optional content group not found: ".concat(t)),!0;if(w(Ko,this).get(t).visible)return!1}return!0}return Se("Unknown optional content policy ".concat(e.policy,".")),!0}return Se("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=w(Ko,this).get(e);if(i){if(n&&t&&i.rbGroups.length)for(const t of i.rbGroups)for(const n of t){var r;if(n!==e)null===(r=w(Ko,this).get(n))||void 0===r||r._setVisible(Ho,!1,!0)}i._setVisible(Ho,!!t,!0),k(Xo,this,null)}else Se("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:i}=e;for(const r of n){switch(r){case"ON":case"OFF":case"Toggle":t=r;continue}const e=w(Ko,this).get(r);if(e)switch(t){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!e.visible,i)}}k(Xo,this,null)}get hasInitialVisibility(){return null===w(Qo,this)||this.getHash()===w(Qo,this)}getOrder(){return w(Ko,this).size?w($o,this)?w($o,this).slice():[...w(Ko,this).keys()]:null}getGroup(e){return w(Ko,this).get(e)||null}getHash(){if(null!==w(Xo,this))return w(Xo,this);const e=new rs;for(const[t,n]of w(Ko,this))e.update("".concat(t,":").concat(n.visible));return k(Xo,this,e.hexdigest())}[Symbol.iterator](){return w(Ko,this).entries()}}function el(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let r;if(Array.isArray(t))r=x(Jo,this,el).call(this,t);else{if(!w(Ko,this).has(t))return Se("Optional content group not found: ".concat(t)),!0;r=w(Ko,this).get(t).visible}switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===n}class tl{constructor(e,t){let{disableRange:n=!1,disableStream:i=!1}=t;Ae(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===s||void 0===s?void 0:s.length)>0){const e=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{Ae(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,i,r;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(r=i.onProgress)||void 0===r||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ae(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new nl(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new il(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class nl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=tt(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class il{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function rl(e,t){const n=new Headers;if(!e||!t||"object"!==typeof t)return n;for(const i in t){const e=t[i];void 0!==e&&n.append(i,e)}return n}function sl(e){var t,n;return null!==(t=null===(n=URL.parse(e))||void 0===n?void 0:n.origin)&&void 0!==t?t:null}function al(e){let{responseHeaders:t,isHttp:n,rangeChunkSize:i,disableRange:r}=e;const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);if(!Number.isInteger(a))return s;if(s.suggestedLength=a,a<=2*i)return s;if(r||!n)return s;if("bytes"!==t.get("Accept-Ranges"))return s;return"identity"!==(t.get("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s}function ol(e){const t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=a(n);return e=unescape(e),e=o(e),e=l(e),s(e)}if(n=function(e){const t=[];let n;const r=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=r.exec(e));){let[,e,i,r]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[i,r]}const s=[];for(let i=0;i<t.length&&i in t;++i){let[e,n]=t[i];n=a(n),e&&(n=unescape(n),0===i&&(n=o(n))),s.push(n)}return s.join("")}(e),n)return s(l(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=a(n);return e=l(e),s(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function r(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),r=Ne(n);n=i.decode(r),t=!1}catch(i){}}return n}function s(e){return t&&/[\x80-\xff]/.test(e)&&(e=r("utf-8",e),t&&(e=r("iso-8859-1",e))),e}function a(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:r(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,i){if("q"===n||"Q"===n)return r(t,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{i=atob(i)}catch(s){}return r(t,i)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if(tt(e))return e}return null}function ll(e,t){return new Ie("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e,404===e||0===e&&t.startsWith("file:"))}function cl(e){return 200===e||206===e}function dl(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function hl(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(Se("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class ul{constructor(e){o(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=rl(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return Ae(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new pl(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new fl(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class pl{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,dl(n,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=sl(t.url),!cl(t.status))throw ll(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const n=t.headers,{allowRangeRequests:r,suggestedLength:s}=al({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=s||this._contentLength,this._filename=ol(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new De("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:hl(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class fl{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range","bytes=".concat(t,"-").concat(n-1));const s=i.url;fetch(s,dl(r,this._withCredentials,this._abortController)).then(t=>{const n=sl(t.url);if(n!==e._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(e._responseOrigin,'".'));if(!cl(t.status))throw ll(t.status,s);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:hl(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class gl{constructor(e){let{url:t,httpHeaders:n,withCredentials:i}=e;o(this,"_responseOrigin",null),this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=rl(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,s]of this.headers)t.setRequestHeader(r,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),i.expectedStatus=206):i.expectedStatus=200,t.responseType="arraybuffer",Ae(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const i=this.pendingRequests[e];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void n.onError(i.status);const r=i.status||200;if(!(200===r&&206===n.expectedStatus)&&r!==n.expectedStatus)return void n.onError(i.status);const s=function(e){const t=e.response;return"string"!==typeof t?t:Ne(t).buffer}(i);if(206===r){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?n.onDone({begin:parseInt(t[1],10),chunk:s}):(Se('Missing or invalid "Content-Range" header.'),n.onError(0))}else s?n.onDone({begin:0,chunk:s}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class ml{constructor(e){this._source=e,this._manager=new gl(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ae(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new vl(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new bl(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class vl{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=sl(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{const[t,...n]=e.split(": ");return[t,n.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:s}=al({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=ol(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=ll(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class bl{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=sl(null===(e=this._manager.getRequestXhr(this._requestId))||void 0===e?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){var t;null!==(t=this._storedError)&&void 0!==t||(this._storedError=ll(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const xl=/^[a-z][a-z0-9\-+.]+:/i;class yl{constructor(e){this.source=e,this.url=function(e){if(xl.test(e))return new URL(e);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(e))}(e.url),Ae("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return Ae(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new wl(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new kl(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class wl{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=ll(0,this._url.href)),this._storedError=e,this._headersCapability.reject(e)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new De("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class kl{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Sl=Symbol("INITIAL_DATA");var _l=new WeakMap,Al=new WeakSet;class Cl{constructor(){v(this,Al),b(this,_l,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=x(Al,this,Ml).call(this,e);return n.promise.then(()=>t(n.data)),null}const n=w(_l,this)[e];if(!n||n.data===Sl)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=w(_l,this)[e];return!!t&&t.data!==Sl}delete(e){const t=w(_l,this)[e];return!(!t||t.data===Sl)&&(delete w(_l,this)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=x(Al,this,Ml).call(this,e);n.data=t,n.resolve()}clear(){for(const t in w(_l,this)){var e;const{data:n}=w(_l,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}k(_l,this,Object.create(null))}*[Symbol.iterator](){for(const e in w(_l,this)){const{data:t}=w(_l,this)[e];t!==Sl&&(yield[e,t])}}}function Ml(e){var t;return(t=w(_l,this))[e]||(t[e]=c(c({},Promise.withResolvers()),{},{data:Sl}))}var El=new WeakMap,Tl=new WeakMap,Rl=new WeakMap,jl=new WeakMap,Pl=new WeakMap,Il=new WeakMap,Ll=new WeakMap,Dl=new WeakMap,Fl=new WeakMap,Nl=new WeakMap,Bl=new WeakMap,zl=new WeakMap,Wl=new WeakMap,Ol=new WeakMap,Hl=new WeakMap,Ul=new WeakMap,Vl=new WeakMap,Gl=new WeakMap,ql=new WeakSet;class Yl{constructor(e){var t;let{textContentSource:n,container:i,viewport:r}=e;if(v(this,ql),b(this,El,Promise.withResolvers()),b(this,Tl,null),b(this,Rl,!1),b(this,jl,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),b(this,Pl,null),b(this,Il,null),b(this,Ll,0),b(this,Dl,0),b(this,Fl,null),b(this,Nl,null),b(this,Bl,0),b(this,zl,0),b(this,Wl,Object.create(null)),b(this,Ol,[]),b(this,Hl,null),b(this,Ul,[]),b(this,Vl,new WeakMap),b(this,Gl,null),n instanceof ReadableStream)k(Hl,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');k(Hl,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}k(Tl,this,k(Nl,this,i)),k(zl,this,r.scale*ut.pixelRatio),k(Bl,this,r.rotation),k(Il,this,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:o,pageY:l}=r.rawDims;k(Gl,this,[1,0,0,-1,-o,l+a]),k(Dl,this,s),k(Ll,this,a),Zl.call(Yl),ht(i,r),w(El,this).promise.finally(()=>{sc._.delete(this),k(Il,this,null),k(Wl,this,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Be.platform;return Ee(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){const e=()=>{w(Fl,this).read().then(t=>{var n;let{value:i,done:r}=t;r?w(El,this).resolve():(null!==(n=w(Pl,this))&&void 0!==n||k(Pl,this,i.lang),Object.assign(w(Wl,this),i.styles),x(ql,this,Xl).call(this,i.items),e())},w(El,this).reject)};return k(Fl,this,w(Hl,this).getReader()),sc._.add(this),e(),w(El,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const i=t.scale*ut.pixelRatio,r=t.rotation;if(r!==w(Bl,this)&&(null===n||void 0===n||n(),k(Bl,this,r),ht(w(Nl,this),{rotation:r})),i!==w(zl,this)){null===n||void 0===n||n(),k(zl,this,i);const e={div:null,properties:null,ctx:$l.call(Yl,w(Pl,this))};for(const t of w(Ul,this))e.properties=w(Vl,this).get(t),e.div=t,x(ql,this,Ql).call(this,e)}}cancel(){var e;const t=new De("TextLayer task cancelled.");null===(e=w(Fl,this))||void 0===e||e.cancel(t).catch(()=>{}),k(Fl,this,null),w(El,this).reject(t)}get textDivs(){return w(Ul,this)}get textContentItemsStr(){return w(Ol,this)}static cleanup(){if(!(x(Yl,this,sc)._.size>0)){x(Yl,this,tc)._.clear();for(const{canvas:e}of x(Yl,this,nc)._.values())e.remove();x(Yl,this,nc)._.clear()}}}function Xl(e){var t,n;if(w(Rl,this))return;null!==(n=(t=w(Il,this)).ctx)&&void 0!==n||(t.ctx=$l.call(T,w(Pl,this)));const i=w(Ul,this),r=w(Ol,this);for(const s of e){if(i.length>1e5)return Se("Ignoring additional textDivs for performance reasons."),void k(Rl,this,!0);if(void 0!==s.str)r.push(s.str),x(ql,this,Kl).call(this,s);else if("beginMarkedContentProps"===s.type||"beginMarkedContent"===s.type){const e=w(Tl,this);k(Tl,this,document.createElement("span")),w(Tl,this).classList.add("markedContent"),s.id&&w(Tl,this).setAttribute("id","".concat(s.id)),e.append(w(Tl,this))}else"endMarkedContent"===s.type&&k(Tl,this,w(Tl,this).parentNode)}}function Kl(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};w(Ul,this).push(t);const i=We.transform(w(Gl,this),e.transform);let r=Math.atan2(i[1],i[0]);const s=w(Wl,this)[e.fontName];s.vertical&&(r+=Math.PI/2);let a=w(jl,this)&&s.fontSubstitution||s.fontFamily;a=T.fontFamilyMap.get(a)||a;const o=Math.hypot(i[2],i[3]),l=o*ec.call(T,a,s,w(Pl,this));let c,d;0===r?(c=i[4],d=i[5]-l):(c=i[4]+l*Math.sin(r),d=i[5]-l*Math.cos(r));const h="calc(var(--total-scale-factor) *",u=t.style;w(Tl,this)===w(Nl,this)?(u.left="".concat((100*c/w(Dl,this)).toFixed(2),"%"),u.top="".concat((100*d/w(Ll,this)).toFixed(2),"%")):(u.left="".concat(h).concat(c.toFixed(2),"px)"),u.top="".concat(h).concat(d.toFixed(2),"px)")),u.fontSize="".concat(h).concat((rc._*o).toFixed(2),"px)"),u.fontFamily=a,n.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,w(jl,this)&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),0!==r&&(n.angle=r*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(p=!0)}if(p&&(n.canvasWidth=s.vertical?e.height:e.width),w(Vl,this).set(t,n),w(Il,this).div=t,w(Il,this).properties=n,x(ql,this,Ql).call(this,w(Il,this)),n.hasText&&w(Tl,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),w(Tl,this).append(e)}}function Ql(e){const{div:t,properties:n,ctx:i}=e,{style:r}=t;let s="";if(rc._>1&&(s="scale(".concat(1/rc._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:e}=r,{canvasWidth:a,fontSize:o}=n;Jl.call(T,i,o*w(zl,this),e);const{width:l}=i.measureText(t.textContent);l>0&&(s="scaleX(".concat(a*w(zl,this)/l,") ").concat(s))}0!==n.angle&&(s="rotate(".concat(n.angle,"deg) ").concat(s)),s.length>0&&(r.transform=s)}function $l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=x(T,this,nc)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),x(T,this,nc)._.set(e,t),x(T,this,ic)._.set(t,{size:0,family:""})}return t}function Jl(e,t,n){const i=x(T,this,ic)._.get(e);t===i.size&&n===i.family||(e.font="".concat(t,"px ").concat(n),i.size=t,i.family=n)}function Zl(){if(null!==x(T,this,rc)._)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),rc._=x(T,this,e.getBoundingClientRect().height),e.remove()}function ec(e,t,n){const i=x(T,this,tc)._.get(e);if(i)return i;const r=x(T,this,$l).call(this,n);r.canvas.width=r.canvas.height=30,x(T,this,Jl).call(this,r,30,e);const s=r.measureText(""),a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let l=.8;return a?l=a/(a+o):(Be.platform.isFirefox&&Se("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?l=t.ascent:t.descent&&(l=1+t.descent)),x(T,this,tc)._.set(e,l),l}T=Yl;var tc={_:new Map},nc={_:new Map},ic={_:new WeakMap},rc={_:null},sc={_:new Set};class ac{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var i;if(!n)return;let r=null;const s=n.name;if("#text"===s)r=n.value;else{if(!ac.shouldBuildText(s))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?r=n.attributes.textContent:n.value&&(r=n.value)}if(null!==r&&t.push({str:r}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}function oc(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const i=new lc,{docId:r}=i,s=n.url?function(e){if(e instanceof URL)return e.href;if("string"===typeof e){if(z)return e;const t=URL.parse(e,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,a=n.data?function(e){if(z&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return Ne(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,l=!0===n.withCredentials,c=null!==(e=n.password)&&void 0!==e?e:null,d=n.range instanceof gc?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let u=n.worker instanceof Cc?n.worker:null;const p=n.verbosity,f="string"!==typeof n.docBaseUrl||et(n.docBaseUrl)?null:n.docBaseUrl,g=vs(n.cMapUrl),m=!1!==n.cMapPacked,v=n.CMapReaderFactory||(z?ka:qs),b=vs(n.iccUrl),x=vs(n.standardFontDataUrl),y=n.StandardFontDataFactory||(z?Sa:ma),w=vs(n.wasmUrl),k=n.WasmFactory||(z?_a:ba),S=!0!==n.stopAtErrors,_=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,A=!1!==n.isEvalSupported,C="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!z,M="boolean"===typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!z&&(Be.platform.isFirefox||!globalThis.chrome),E=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,T="boolean"===typeof n.disableFontFace?n.disableFontFace:z,R=!0===n.fontExtraProperties,j=!0===n.enableXfa,P=n.ownerDocument||globalThis.document,I=!0===n.disableRange,L=!0===n.disableStream,D=!0===n.disableAutoFetch,F=!0===n.pdfBug,N=n.CanvasFactory||(z?wa:Vs),B=n.FilterFactory||(z?ya:na),W=!0===n.enableHWA,O=!1!==n.useWasm,H=d?d.length:null!==(t=n.length)&&void 0!==t?t:NaN,U="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!z&&!T,V="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===qs&&y===ma&&k===ba&&g&&x&&w&&it(g,document.baseURI)&&it(x,document.baseURI)&&it(w,document.baseURI));ye(p);const G={canvasFactory:new N({ownerDocument:P,enableHWA:W}),filterFactory:new B({docId:r,ownerDocument:P}),cMapReaderFactory:V?null:new v({baseUrl:g,isCompressed:m}),standardFontDataFactory:V?null:new y({baseUrl:x}),wasmFactory:V?null:new k({baseUrl:w})};u||(u=Cc.create({verbosity:p,port:Fo.workerPort}),i._worker=u);const q={docId:r,apiVersion:"5.4.149",data:a,password:c,disableAutoFetch:D,rangeChunkSize:h,length:H,docBaseUrl:f,enableXfa:j,evaluatorOptions:{maxImageSize:_,disableFontFace:T,ignoreErrors:S,isEvalSupported:A,isOffscreenCanvasSupported:C,isImageDecoderSupported:M,canvasMaxAreaInBytes:E,fontExtraProperties:R,useSystemFonts:U,useWasm:O,useWorkerFetch:V,cMapUrl:g,iccUrl:b,standardFontDataUrl:x,wasmUrl:w}},Y={ownerDocument:P,pdfBug:F,styleElement:null,loadingParams:{disableAutoFetch:D,enableXfa:j}};return u.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const e=u.messageHandler.sendWithPromise("GetDocRequest",q,a?[a.buffer]:null);let t;if(d)t=new tl(d,{disableRange:I,disableStream:L});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const e=it(s)?ul:z?yl:ml;t=new e({url:s,length:H,httpHeaders:o,withCredentials:l,rangeChunkSize:h,disableRange:I,disableStream:L})}return e.then(e=>{if(i.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const n=new Ns(r,e,u.port),s=new Oc(n,i,t,Y,G,W);i._transport=s,n.send("Ready",null)})}).catch(i._capability.reject),i}class lc{constructor(){o(this,"_capability",Promise.withResolvers()),o(this,"_transport",null),o(this,"_worker",null),o(this,"docId","d".concat((cc._=(R=cc._,j=R++,R),j))),o(this,"destroyed",!1),o(this,"onPassword",null),o(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0;try{var t,n;null!==(t=this._worker)&&void 0!==t&&t.port&&(this._worker._pendingDestroy=!0),await(null===(n=this._transport)||void 0===n?void 0:n.destroy())}catch(r){var i;throw null!==(i=this._worker)&&void 0!==i&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,null===(e=this._worker)||void 0===e||e.destroy(),this._worker=null}async getData(){return this._transport.getData()}}var cc={_:0},dc=new WeakMap,hc=new WeakMap,uc=new WeakMap,pc=new WeakMap,fc=new WeakMap;class gc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;b(this,dc,Promise.withResolvers()),b(this,hc,[]),b(this,uc,[]),b(this,pc,[]),b(this,fc,[]),this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){w(fc,this).push(e)}addProgressListener(e){w(pc,this).push(e)}addProgressiveReadListener(e){w(uc,this).push(e)}addProgressiveDoneListener(e){w(hc,this).push(e)}onDataRange(e,t){for(const n of w(fc,this))n(e,t)}onDataProgress(e,t){w(dc,this).promise.then(()=>{for(const n of w(pc,this))n(e,t)})}onDataProgressiveRead(e){w(dc,this).promise.then(()=>{for(const t of w(uc,this))t(e)})}onDataProgressiveDone(){w(dc,this).promise.then(()=>{for(const e of w(hc,this))e()})}transportReady(){w(dc,this).resolve()}requestDataRange(e,t){_e("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class mc{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ee(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var vc=new WeakMap,bc=new WeakSet;class xc{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];v(this,bc),b(this,vc,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new nt:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Cl,this._intentStates=new Map,this.destroyed=!1,this.recordedGroups=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Je({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ee(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n,i;let{canvasContext:r,canvas:s=r.canvas,viewport:a,intent:o="display",annotationMode:l=Q.ENABLE,transform:c=null,background:d=null,optionalContentConfigPromise:h=null,annotationCanvasMap:u=null,pageColors:p=null,printAnnotationStorage:f=null,isEditing:g=!1,recordOperations:m=!1,filteredOperationIndexes:v=null}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const b=this._transport.getRenderingIntent(o,l,f,g),{renderingIntent:y,cacheKey:w}=b;k(vc,this,!1),h||(h=this._transport.getOptionalContentConfig(y));let S=this._intentStates.get(w);S||(S=Object.create(null),this._intentStates.set(w,S)),S.streamReaderCancelTimeout&&(clearTimeout(S.streamReaderCancelTimeout),S.streamReaderCancelTimeout=null);const _=!!(y&V);var A;S.displayReadyCapability||(S.displayReadyCapability=Promise.withResolvers(),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(A=this._stats)||void 0===A||A.time("Page Request"),this._pumpOperatorList(b));const C=!this.recordedGroups&&(m||this._pdfBug&&(null===(n=globalThis.StepperManager)||void 0===n?void 0:n.enabled)),M=e=>{if(S.renderTasks.delete(E),C){var t;const e=null===(t=E.gfx)||void 0===t?void 0:t.dependencyTracker.take();var n;if(e)null===(n=E.stepper)||void 0===n||n.setOperatorGroups(e),m&&(this.recordedGroups=e);else m&&(this.recordedGroups=[])}var i;(_&&k(vc,this,!0),x(bc,this,yc).call(this),e?(E.capability.reject(e),this._abortOperatorList({intentState:S,reason:e instanceof Error?e:new Error(e)})):E.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(i=globalThis.Stats)&&void 0!==i&&i.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},E=new qc({callback:M,params:{canvas:s,canvasContext:r,dependencyTracker:C?new Wa(s):null,viewport:a,transform:c,background:d},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:S.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,filteredOperationIndexes:v});((i=S).renderTasks||(i.renderTasks=new Set)).add(E);const T=E.task;return Promise.all([S.displayReadyCapability.promise,h]).then(e=>{var t;let[n,i]=e;if(this.destroyed)M();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(i.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");E.initializeGraphics({transparency:n,optionalContentConfig:i}),E.operatorListChanged()}}).catch(M),T}getOperatorList(){let{intent:e="display",annotationMode:t=Q.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this._transport.getRenderingIntent(e,t,n,i,!0);let s,a=this._intentStates.get(r.cacheKey);var o,l;(a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a)),a.opListReadCapability)||(s=Object.create(null),s.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(s))},a.opListReadCapability=Promise.withResolvers(),((o=a).renderTasks||(o.renderTasks=new Set)).add(s),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(r));return a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>ac.textContent(e));const t=this.streamTextContent(e);return new Promise(function(e,n){const i=t.getReader(),r={items:[],styles:Object.create(null),lang:null};!function t(){i.read().then(function(n){var i;let{value:s,done:a}=n;a?e(r):(null!==(i=r.lang)&&void 0!==i||(r.lang=s.lang),Object.assign(r.styles,s.styles),r.items.push(...s.items),t())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),k(vc,this,!1),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];k(vc,this,!0);const t=x(bc,this,yc).call(this);return e&&t&&this._stats&&(this._stats=new nt),t}_startRenderPage(e,t){var n,i;const r=this._intentStates.get(t);r&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=r.displayReadyCapability)||void 0===i||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&x(bc,this,yc).call(this)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:i,modifiedIds:r}=e;const{map:s,transfer:a}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:s,modifiedIds:r},a).getReader(),l=this._intentStates.get(n);l.streamReader=o;const c=()=>{o.read().then(e=>{let{value:t,done:n}=e;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,l),c())},e=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const e of l.renderTasks)e.operatorListChanged();x(bc,this,yc).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(e);else{if(!l.opListReadCapability)throw e;l.opListReadCapability.reject(e)}}})};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:i=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(n instanceof Ze){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},e))}}if(t.streamReader.cancel(new De(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function yc(){if(!w(vc,this)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),k(vc,this,!1),!0}var wc=new WeakMap,kc=new WeakMap,Sc=new WeakMap,_c=new WeakMap,Ac=new WeakSet;class Cc{constructor(){let{name:e=null,port:t=null,verbosity:n=we()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(v(this,Ac),b(this,wc,Promise.withResolvers()),b(this,kc,null),b(this,Sc,null),b(this,_c,null),this.name=e,this.destroyed=!1,this.verbosity=n,t){if(Lc._.has(t))throw new Error("Cannot use more than one PDFWorker per port.");Lc._.set(t,this),x(Ac,this,Ec).call(this,t)}else x(Ac,this,Tc).call(this)}get promise(){return w(wc,this).promise}get port(){return w(Sc,this)}get messageHandler(){return w(kc,this)}destroy(){var e,t;this.destroyed=!0,null===(e=w(_c,this))||void 0===e||e.terminate(),k(_c,this,null),Lc._.delete(w(Sc,this)),k(Sc,this,null),null===(t=w(kc,this))||void 0===t||t.destroy(),k(kc,this,null)}static create(e){const t=x(Cc,this,Lc)._.get(null===e||void 0===e?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Cc(e)}static get workerSrc(){if(Fo.workerSrc)return Fo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ee(this,"_setupFakeWorkerGlobal",(async()=>{if(y(Cc,this,jc))return y(Cc,this,jc);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function Mc(){w(wc,this).resolve(),w(kc,this).send("configure",{verbosity:this.verbosity})}function Ec(e){k(Sc,this,e),k(kc,this,new Ns("main","worker",e)),w(kc,this).on("ready",()=>{}),x(Ac,this,Mc).call(this)}function Tc(){if(Ic._||jc(P))return void x(Ac,this,Rc).call(this);let{workerSrc:e}=P;try{P._isSameOrigin(window.location,e)||(e=P._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Ns("main","worker",t),i=()=>{r.abort(),n.destroy(),t.terminate(),this.destroyed?w(wc,this).reject(new Error("Worker was destroyed")):x(Ac,this,Rc).call(this)},r=new AbortController;t.addEventListener("error",()=>{w(_c,this)||i()},{signal:r.signal}),n.on("test",e=>{r.abort(),!this.destroyed&&e?(k(kc,this,n),k(Sc,this,t),k(_c,this,t),x(Ac,this,Mc).call(this)):i()}),n.on("ready",e=>{if(r.abort(),this.destroyed)i();else try{s()}catch(t){x(Ac,this,Rc).call(this)}});const s=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void s()}catch(t){ke("The worker has been disabled.")}x(Ac,this,Rc).call(this)}function Rc(){Ic._||(Se("Setting up fake worker."),Ic._=!0),P._setupFakeWorkerGlobal.then(e=>{var t,n;if(this.destroyed)return void w(wc,this).reject(new Error("Worker was destroyed"));const i=new ks;k(Sc,this,i);const r="fake".concat((Pc._=(t=Pc._,n=t++,t),n)),s=new Ns(r+"_worker",r,i);e.setup(s,i),k(kc,this,new Ns(r,r+"_worker",i)),x(Ac,this,Mc).call(this)}).catch(e=>{w(wc,this).reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}function jc(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(n){return null}}P=Cc;var Pc={_:0},Ic={_:!1},Lc={_:new WeakMap};z&&(Ic._=x(P,P,!0),Fo.workerSrc||(Fo.workerSrc="./pdf.worker.mjs")),P._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(null===n||void 0===n||!n.origin||"null"===n.origin)return!1;const i=new URL(t,n);return n.origin===i.origin},P._createCDNWrapper=e=>{const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},P.fromPort=e=>{var t;if(t="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+t),null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return P.create(e)};var Dc=new WeakMap,Fc=new WeakMap,Nc=new WeakMap,Bc=new WeakMap,zc=new WeakMap,Wc=new WeakSet;class Oc{constructor(e,t,n,i,r,s){v(this,Wc),b(this,Dc,new Map),b(this,Fc,new Map),b(this,Nc,new Map),b(this,Bc,new Map),b(this,zc,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Cl,this.fontLoader=new gs({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return Ee(this,"annotationStorage",new ds)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=U,a=ss;switch(e){case"any":s=H;break;case"display":break;case"print":s=V;break;default:Se("getRenderingIntent - invalid intent: ".concat(e))}const o=s&V&&n instanceof ps?n:this.annotationStorage;switch(t){case Q.DISABLE:s+=Y;break;case Q.ENABLE:break;case Q.ENABLE_FORMS:s+=G;break;case Q.ENABLE_STORAGE:s+=q,a=o.serializable;break;default:Se("getRenderingIntent - invalid annotationMode: ".concat(t))}i&&(s+=X),r&&(s+=K);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:s,cacheKey:[s,a.hash,c].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=w(zc,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of w(Fc,this).values())t.push(i._destroy());w(Fc,this).clear(),w(Nc,this).clear(),w(Bc,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),w(Dc,this).clear(),this.filterFactory.destroy(),Yl.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new De("Worker was terminated.")),null===(t=this.messageHandler)||void 0===t||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{Ae(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:n,done:i}=e;i?t.close():(Ae(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:r}=this._fullReader;if(!n||!i){var s;if(this._lastProgress)null===(s=t.onProgress)||void 0===s||s.call(t,this._lastProgress);this._fullReader.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:n,isRangeSupported:i,contentLength:r}}),e.on("GetRangeReader",(e,t)=>{Ae(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then(function(e){let{value:n,done:i}=e;i?t.close():(Ae(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}):t.close()}),e.on("GetDoc",e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new mc(n,this))}),e.on("DocException",e=>{t._capability.reject(Ls(e))}),e.on("PasswordRequest",e=>{k(zc,this,Promise.withResolvers());try{if(!t.onPassword)throw Ls(e);const n=e=>{e instanceof Error?w(zc,this).reject(e):w(zc,this).resolve({password:e})};t.onPassword(n,e.code)}catch(n){w(zc,this).reject(n)}return w(zc,this).promise}),e.on("DataLoaded",e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{if(this.destroyed)return;w(Fc,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{var n;let[i,r,s]=t;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in s){const e=s.error;Se("Error during font loading: ".concat(e)),this.commonObjs.resolve(i,e);break}const t=this._params.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,a=new ms(s,t);this.fontLoader.bind(a).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!a.fontExtraProperties&&a.data&&(a.data=null),this.commonObjs.resolve(i,a)});break;case"CopyLocalImage":const{imageRef:o}=s;Ae(o,"The imageRef must be defined.");for(const e of w(Fc,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===o)return t.dataLen?(this.commonObjs.resolve(i,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error("Got unknown common object type ".concat(r))}return null}),e.on("obj",e=>{let[t,n,i,r]=e;if(this.destroyed)return;const s=w(Fc,this).get(n);var a;if(!s.objs.has(t))if(0!==s._intentStates.size)switch(i){case"Image":case"Pattern":s.objs.resolve(t,r);break;default:throw new Error("Got unknown object type ".concat(i))}else null===r||void 0===r||null===(a=r.bitmap)||void 0===a||a.close()}),e.on("DocProgress",e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBinaryData",async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");const t=this[e.type];if(!t)throw new Error("".concat(e.type," not initialized, see the `useWorkerFetch` parameter."));return t.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&Se("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=w(Nc,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&w(Bc,this).set(n.refStr,e);const i=new xc(t,n,this,this._params.pdfBug);return w(Fc,this).set(t,i),i});return w(Nc,this).set(t,i),i}getPageIndex(e){return bs(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return x(Wc,this,Hc).call(this,"GetFieldObjects")}hasJSActions(){return x(Wc,this,Hc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return x(Wc,this,Hc).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return x(Wc,this,Hc).call(this,"GetOptionalContentConfig").then(t=>new Zo(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=w(Dc,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,n,i,r;return{info:e[0],metadata:e[1]?new Oo(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(i=null===(r=this._fullReader)||void 0===r?void 0:r.contentLength)&&void 0!==i?i:null}});return w(Dc,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of w(Fc,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),w(Dc,this).clear(),this.filterFactory.destroy(!0),Yl.cleanup()}}cachedPageNumber(e){var t;if(!bs(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=w(Bc,this).get(n))&&void 0!==t?t:null}}function Hc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=w(Dc,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return w(Dc,this).set(e,i),i}var Uc=new WeakMap;class Vc{constructor(e){b(this,Uc,null),o(this,"onContinue",null),o(this,"onError",null),k(Uc,this,e)}get promise(){return w(Uc,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;w(Uc,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=w(Uc,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=w(Uc,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}var Gc=new WeakMap;class qc{constructor(e){let{callback:t,params:n,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:u=null,enableHWA:p=!1,filteredOperationIndexes:f=null}=e;b(this,Gc,null),this.callback=t,this.params=n,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Vc(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=p,this._dependencyTracker=n.dependencyTracker,this._filteredOperationIndexes=f}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,n;let{transparency:i=!1,optionalContentConfig:r}=e;if(this.cancelled)return;if(this._canvas){if(Yc._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Yc._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Po(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:s,transparency:i,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e,t,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),w(Gc,this)&&(window.cancelAnimationFrame(w(Gc,this)),k(Gc,this,null)),Yc._.delete(this._canvas),i||(i=new Ze("Rendering cancelled, page ".concat(this._pageIndex+1),r)),this.callback(i),null===(t=(n=this.task).onError)||void 0===t||t.call(n,i)}operatorListChanged(){var e;this.graphicsReady?(null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?k(Gc,this,window.requestAnimationFrame(()=>{k(Gc,this,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._filteredOperationIndexes),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Yc._.delete(this._canvas),this.callback())))}}var Yc={_:new WeakSet};var Xc=new WeakMap,Kc=new WeakMap,Qc=new WeakMap,$c=new WeakMap,Jc=new WeakMap,Zc=new WeakMap,ed=new WeakMap,td=new WeakMap,nd=new WeakMap,id=new WeakMap,rd=new WeakSet;class sd{static get _keyboardManager(){return Ee(this,"_keyboardManager",new Jt([[["Escape","mac+Escape"],sd.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],sd.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],sd.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],sd.prototype._moveToPrevious],[["Home","mac+Home"],sd.prototype._moveToBeginning],[["End","mac+End"],sd.prototype._moveToEnd]]))}constructor(e){var t,n;let{editor:i=null,uiManager:r=null}=e;v(this,rd),b(this,Xc,null),b(this,Kc,null),b(this,Qc,void 0),b(this,$c,null),b(this,Jc,!1),b(this,Zc,!1),b(this,ed,null),b(this,td,void 0),b(this,nd,null),b(this,id,null),i?(k(Zc,this,!1),k(ed,this,i)):k(Zc,this,!0),k(id,this,(null===i||void 0===i?void 0:i._uiManager)||r),k(td,this,w(id,this)._eventBus),k(Qc,this,(null===i||void 0===i||null===(t=i.color)||void 0===t?void 0:t.toUpperCase())||(null===(n=w(id,this))||void 0===n?void 0:n.highlightColors.values().next().value)||"#FFFF98"),ud._||(ud._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const e=k(Xc,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",w(ed,this)&&(e.ariaControls="".concat(w(ed,this).id,"_colorpicker_dropdown"));const t=w(id,this)._signal;e.addEventListener("click",x(rd,this,cd).bind(this),{signal:t}),e.addEventListener("keydown",x(rd,this,ld).bind(this),{signal:t});const n=k(Kc,this,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=w(Qc,this),e.append(n),e}renderMainDropdown(){const e=k($c,this,x(rd,this,ad).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===w(Xc,this))return void x(rd,this,cd).call(this,e);const t=e.target.getAttribute("data-color");t&&x(rd,this,od).call(this,t,e)}_moveToNext(e){var t,n;y(rd,this,hd)?e.target!==w(Xc,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=w($c,this).firstChild)||void 0===n||n.focus():x(rd,this,cd).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=w($c,this))||void 0===t?void 0:t.firstChild)&&e.target!==w(Xc,this)?(y(rd,this,hd)||x(rd,this,cd).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):y(rd,this,hd)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;y(rd,this,hd)?null===(t=w($c,this).firstChild)||void 0===t||t.focus():x(rd,this,cd).call(this,e)}_moveToEnd(e){var t;y(rd,this,hd)?null===(t=w($c,this).lastChild)||void 0===t||t.focus():x(rd,this,cd).call(this,e)}hideDropdown(){var e,t;null===(e=w($c,this))||void 0===e||e.classList.add("hidden"),w(Xc,this).ariaExpanded="false",null===(t=w(nd,this))||void 0===t||t.abort(),k(nd,this,null)}_hideDropdownFromKeyboard(){var e;w(Zc,this)||(y(rd,this,hd)?(this.hideDropdown(),w(Xc,this).focus({preventScroll:!0,focusVisible:w(Jc,this)})):null===(e=w(ed,this))||void 0===e||e.unselect())}updateColor(e){if(w(Kc,this)&&(w(Kc,this).style.backgroundColor=e),!w($c,this))return;const t=w(id,this).highlightColors.values();for(const n of w($c,this).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;null===(e=w(Xc,this))||void 0===e||e.remove(),k(Xc,this,null),k(Kc,this,null),null===(t=w($c,this))||void 0===t||t.remove(),k($c,this,null)}}function ad(){const e=document.createElement("div"),t=w(id,this)._signal;e.addEventListener("contextmenu",rt,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),w(ed,this)&&(e.id="".concat(w(ed,this).id,"_colorpicker_dropdown"));for(const[n,i]of w(id,this).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",ud._[n]);const s=document.createElement("span");r.append(s),s.className="swatch",s.style.backgroundColor=i,r.ariaSelected=i===w(Qc,this),r.addEventListener("click",x(rd,this,od).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",x(rd,this,ld).bind(this),{signal:t}),e}function od(e,t){t.stopPropagation(),w(td,this).dispatch("switchannotationeditorparams",{source:this,type:Z.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}function ld(e){I._keyboardManager.exec(this,e)}function cd(e){if(y(rd,this,hd))return void this.hideDropdown();if(k(Jc,this,0===e.detail),w(nd,this)||(k(nd,this,new AbortController),window.addEventListener("pointerdown",x(rd,this,dd).bind(this),{signal:w(id,this).combinedSignal(w(nd,this))})),w(Xc,this).ariaExpanded="true",w($c,this))return void w($c,this).classList.remove("hidden");const t=k($c,this,x(rd,this,ad).call(this));w(Xc,this).append(t)}function dd(e){var t;null!==(t=w($c,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function hd(e){return w($c,e)&&!w($c,e).classList.contains("hidden")}I=sd;var ud={_:null},pd=new WeakMap,fd=new WeakMap,gd=new WeakMap;class md{constructor(e){b(this,pd,null),b(this,fd,null),b(this,gd,null),k(fd,this,e),k(gd,this,e._uiManager),vd._||(vd._=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(w(pd,this))return w(pd,this);const{editorType:e,colorType:t,colorValue:n}=w(fd,this),i=k(pd,this,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",vd._[e]),i.addEventListener("input",()=>{w(gd,this).updateParams(t,i.value)},{signal:w(gd,this)._signal}),i}update(e){w(pd,this)&&(w(pd,this).value=e)}destroy(){var e;null===(e=w(pd,this))||void 0===e||e.remove(),k(pd,this,null)}hideDropdown(){}}var vd={_:null};function bd(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function xd(e){return Math.max(0,Math.min(255,255*e))}class yd{static CMYK_G(e){let[t,n,i,r]=e;return["G",1-Math.min(1,.3*t+.59*i+.11*n+r)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=xd(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=bd(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,i]=e;return["G",.3*t+.59*n+.11*i]}static RGB_rgb(e){return e.map(xd)}static RGB_HTML(e){return"#".concat(e.map(bd).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,i,r]=e;return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,n+r)]}static CMYK_rgb(e){let[t,n,i,r]=e;return[xd(1-Math.min(1,t+r)),xd(1-Math.min(1,i+r)),xd(1-Math.min(1,n+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,i]=e;const r=1-t,s=1-n,a=1-i;return["CMYK",r,s,a,Math.min(r,s,a)]}}class wd{create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(e,"px")),i.setAttribute("height","".concat(t,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),i}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){_e("Abstract method `_createSVG` called.")}}class kd extends wd{_createSVG(e){return document.createElementNS(Ke,e)}}class Sd{static setupStorage(e,t,n,i,r){const s=i.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==s.value&&(e.textContent=s.value),"print"===r)break;e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===r)break;e.addEventListener("change",e=>{i.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==s.value&&e.setAttribute("value",s.value),"print"===r)break;e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})})}break;case"select":if(null!==s.value){e.setAttribute("value",s.value);for(const e of n.children)e.attributes.value===s.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",e=>{const n=e.target.options,r=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(t,{value:r})})}}static setAttributes(e){let{html:t,element:n,storage:i=null,intent:r,linkService:s}=e;const{attributes:a}=n,o=t instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(r));for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&s.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,n,i)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,r=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:r,linkService:n});const a="richText"!==r,o=e.div;if(o.append(s),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");o.style.transform=t}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const e=document.createTextNode(i.value);s.append(e),a&&ac.shouldBuildText(i.name)&&l.push(e)}return{textDivs:l}}const c=[[i,-1,s]];for(;c.length>0;){var d,h;const[e,i,s]=c.at(-1);if(i+1===e.children.length){c.pop();continue}const o=e.children[++c.at(-1)[1]];if(null===o)continue;const{name:u}=o;if("#text"===u){const e=document.createTextNode(o.value);l.push(e),s.append(e);continue}const p=null!==o&&void 0!==o&&null!==(d=o.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(o.attributes.xmlns,u):document.createElement(u);if(s.append(p),o.attributes&&this.setAttributes({html:p,element:o,storage:t,intent:r,linkService:n}),(null===(h=o.children)||void 0===h?void 0:h.length)>0)c.push([o,-1,p]);else if(o.value){const e=document.createTextNode(o.value);a&&ac.shouldBuildText(u)&&l.push(e),p.append(e)}}for(const u of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const _d=new WeakSet,Ad=60*(new Date).getTimezoneOffset()*1e3;class Cd{static create(e){switch(e.data.annotationType){case oe.LINK:return new Dd(e);case oe.TEXT:return new zd(e);case oe.WIDGET:switch(e.data.fieldType){case"Tx":return new Od(e);case"Btn":return e.data.radioButton?new Vd(e):e.data.checkBox?new Ud(e):new Gd(e);case"Ch":return new qd(e);case"Sig":return new Hd(e)}return new Wd(e);case oe.POPUP:return new Yd(e);case oe.FREETEXT:return new Ph(e);case oe.LINE:return new Lh(e);case oe.SQUARE:return new Fh(e);case oe.CIRCLE:return new Bh(e);case oe.POLYLINE:return new Wh(e);case oe.CARET:return new Hh(e);case oe.INK:return new qh(e);case oe.POLYGON:return new Oh(e);case oe.HIGHLIGHT:return new Xh(e);case oe.UNDERLINE:return new Kh(e);case oe.SQUIGGLY:return new Qh(e);case oe.STRIKEOUT:return new $h(e);case oe.STAMP:return new Jh(e);case oe.FILEATTACHMENT:return new tu(e);default:return new jd(e)}}}var Md=new WeakMap,Ed=new WeakMap,Td=new WeakMap,Rd=new WeakSet;class jd{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,Rd),b(this,Md,null),b(this,Ed,!1),b(this,Td,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(e){let{contentsObj:t,richText:n}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return jd._hasPopupData(this.data)}get hasCommentButton(){return this.enableComment&&this._isEditable&&this.hasPopupElement}get commentButtonPosition(){const{quadPoints:e,rect:t}=this.data;let n=-1/0,i=-1/0;if((null===e||void 0===e?void 0:e.length)>=8){for(let t=0;t<e.length;t+=8)e[t+1]>i?(i=e[t+1],n=e[t+2]):e[t+1]===i&&(n=Math.max(n,e[t+2]));return[n,i]}return t?[t[2],t[3]]:null}get commentButtonColor(){var e;if(!this.data.color)return null;const[t,n,i]=this.data.color,r=255*(1-(null!==(e=this.data.opacity)&&void 0!==e?e:1));return x(Rd,this,Pd).call(this,Math.min(t+r,255),Math.min(n+r,255),Math.min(i+r,255))}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/n,e[1]=100*(e[1]-s)/i,e}updateEdited(e){var t;if(!this.container)return;e.rect&&(w(Md,this)||k(Md,this,{rect:this.data.rect.slice(0)}));const{rect:n,popup:i}=e;n&&x(Rd,this,Id).call(this,n);let r=(null===(t=w(Td,this))||void 0===t?void 0:t.popup)||this.popup;!r&&null!==i&&void 0!==i&&i.text&&(this._createPopup(i),r=w(Td,this).popup),r&&(r.updateEdited(e),null!==i&&void 0!==i&&i.deleted&&(r.remove(),k(Td,this,null),this.popup=null))}resetEdited(){var e;w(Md,this)&&(x(Rd,this,Id).call(this,w(Md,this).rect),null===(e=w(Td,this))||void 0===e||e.popup.resetEdited(),k(Md,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Wd||this instanceof Dd||(r.tabIndex=0);const{style:s}=r;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Yd){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,r),r}const{width:a,height:o}=this;if(!e&&t.borderStyle.width>0){s.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--total-scale-factor)) / calc(").concat(n,"px * var(--total-scale-factor))");s.borderRadius=t}else if(this instanceof Vd){const e="calc(".concat(a,"px * var(--total-scale-factor)) / calc(").concat(o,"px * var(--total-scale-factor))");s.borderRadius=e}switch(t.borderStyle.style){case le:s.borderStyle="solid";break;case ce:s.borderStyle="dashed";break;case de:Se("Unimplemented border style: beveled");break;case he:Se("Unimplemented border style: inset");break;case ue:s.borderBottomStyle="solid"}const i=t.borderColor||null;i?(k(Ed,this,!0),s.borderColor=We.makeHexColor(0|i[0],0|i[1],0|i[2])):s.borderWidth=0}const l=We.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:d,pageX:h,pageY:u}=i.rawDims;s.left="".concat(100*(l[0]-h)/c,"%"),s.top="".concat(100*(l[1]-u)/d,"%");const{rotation:p}=t;return t.hasOwnCanvas||0===p?(s.width="".concat(100*a/c,"%"),s.height="".concat(100*o/d,"%")):this.setRotation(p,r),r}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:s}=this;e%180!==0&&([r,s]=[s,r]),t.style.width="".concat(100*r/n,"%"),t.style.height="".concat(100*s/i,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const i=n.detail[e],r=i[0],s=i.slice(1);n.target.style[t]=yd["".concat(r,"_HTML")](s),this.annotationStorage.setValue(this.data.id,{[t]:yd["".concat(r,"_rgb")](s)})};return Ee(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||n[i];null===r||void 0===r||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,r]of Object.entries(t)){const s=n[i];if(s){s({detail:{[i]:r},target:e}),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,r]=this.data.rect.map(e=>Math.fround(e));if(8===e.length){const[s,a,o,l]=e.subarray(2,6);if(i===s&&r===a&&t===o&&n===l)return}const{style:s}=this.container;let a;if(w(Ed,this)){const{borderColor:e,borderWidth:t}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=i-t,l=r-n,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const h=c.createElement("defs");d.append(h);const u=c.createElement("clipPath"),p="clippath_".concat(this.data.id);u.setAttribute("id",p),u.setAttribute("clipPathUnits","objectBoundingBox"),h.append(u);for(let g=2,m=e.length;g<m;g+=8){var f;const n=e[g],i=e[g+1],s=e[g+2],d=e[g+3],h=c.createElement("rect"),p=(s-t)/o,m=(r-i)/l,v=(n-s)/o,b=(i-d)/l;h.setAttribute("x",p),h.setAttribute("y",m),h.setAttribute("width",v),h.setAttribute("height",b),u.append(h),null===(f=a)||void 0===f||f.push('<rect vector-effect="non-scaling-stroke" x="'.concat(p,'" y="').concat(m,'" width="').concat(v,'" height="').concat(b,'"/>'))}w(Ed,this)&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate);const r=k(Td,this,new Yd({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:"popup_".concat(t.id),rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(r.render())}get hasPopupElement(){return!!(w(Td,this)||this.popup||this.data.popupRef)}render(){_e("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:r,exportValues:s}of i){if(-1===e)continue;if(r===t)continue;const i="string"===typeof s?s:null,a=document.querySelector('[data-element-id="'.concat(r,'"]'));!a||_d.has(a)?n.push({id:r,exportValue:i,domElement:a}):Se("_getElementsByName - element not allowed: ".concat(r))}return n}for(const i of document.getElementsByName(e)){const{exportValue:e}=i,r=i.getAttribute("data-element-id");r!==t&&(_d.has(i)&&n.push({id:r,exportValue:e,domElement:i}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}function Pd(e,t,n){e/=255,t/=255,n/=255;const i=Math.max(e,t,n),r=Math.min(e,t,n),s=(i+r)/2,a=((1+Math.sqrt(s))/2*100).toFixed(2);if(i===r)return"hsl(0, 0%, ".concat(a,"%)");const o=i-r;let l;l=i===e?(t-n)/o+(t<n?6:0):i===t?(n-e)/o+2:(e-t)/o+4,l=(60*l).toFixed(2);const c=(o/(1-Math.abs(2*s-1))*100).toFixed(2);return"hsl(".concat(l,", ").concat(c,"%, ").concat(a,"%)")}function Id(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...e),t.left="".concat(100*(e[0]-a)/r,"%"),t.top="".concat(100*(s-e[3]+o)/s,"%"),0===i?(t.width="".concat(100*(e[2]-e[0])/r,"%"),t.height="".concat(100*(e[3]-e[1])/s,"%")):this.setRotation(i)}var Ld=new WeakSet;class Dd extends jd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),v(this,Ld),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),i=!0):e.attachment?(x(Ld,this,Nd).call(this,n,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(x(Ld,this,Bd).call(this,n,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&x(Ld,this,Fd).call(this),n&&(e.title=n)}_bindNamedAction(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),x(Ld,this,Fd).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const r=n.get(i);r&&(e[r]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1})}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),x(Ld,this,Fd).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),x(Ld,this,Fd).call(this),!this._fieldObjects)return Se('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:i,include:r}=t,s=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===r&&s.push(n)}else for(const t of Object.values(this._fieldObjects))s.push(...t);const a=this.annotationStorage,o=[];for(const t of s){const{id:e}=t;switch(o.push(e),t.type){case"text":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;a.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(_d.has(n)?n.dispatchEvent(new Event("resetform")):Se("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function Fd(){this.container.setAttribute("data-internal-link","")}function Nd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,i),!1},x(Ld,this,Fd).call(this)}function Bd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),x(Ld,this,Fd).call(this)}class zd extends jd{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Wd extends jd{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Be.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,r){n.includes("mouse")?e.addEventListener(n,e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{var s;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}r&&(null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(e)}}))})}_setEventListeners(e,t,n,i){for(const[o,l]of n){var r,s,a;if("Action"===l||null!==(r=this.data.actions)&&void 0!==r&&r[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,i),"Focus"!==l||null!==(s=this.data.actions)&&void 0!==s&&s.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":We.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,r=e.style;let s;const a=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(O*i))||1);s=Math.min(i,a(t/O))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(i,a(e/O))}r.fontSize="calc(".concat(s,"px * var(--total-scale-factor))"),r.color=We.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Od extends Wd{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,i){const r=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),r.setValue(s.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const s=e.getValue(t,{value:this.data.fieldValue});let a=s.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=s.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",null!==l&&void 0!==l?l:a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),_d.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:d,datetimeType:h,timeStep:u}=this.data,p=!!h&&this.enableScripting;d&&(n.title=d),this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",i=>{e.setValue(t,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",e=>{var t;const i=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=c.userValue=i,c.formattedValue=null});let f=e=>{const{formattedValue:t}=c;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var r;n.addEventListener("focus",e=>{var t;if(c.focused)return;const{target:n}=e;if(p&&(n.type=h,u&&(n.step=u)),c.userValue){const e=c.userValue;if(p)if("time"===h){const t=new Date(e),i=[t.getHours(),t.getMinutes(),t.getSeconds()];n.value=i.map(e=>e.toString().padStart(2,"0")).join(":")}else n.value=new Date(e-Ad).toISOString().split("date"===h?"T":".",1)[0];else n.value=e}c.lastCommittedValue=n.value,c.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;c.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",p||e.setValue(t,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:i}=n.detail;c.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i);const r={formattedValue:i};p&&(r.value=i),e.setValue(t,r)},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var i;const{charLimit:r}=n.detail,{target:s}=n;if(0===r)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",r);let a=c.userValue;!a||a.length<=r||(a=a.slice(0,r),s.value=c.userValue=a,e.setValue(t,{value:a}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)}),n.addEventListener("keydown",e=>{var n;c.commitKey=1;let i=-1;if("Escape"===e.key?i=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):i=2,-1===i)return;const{value:r}=e.target;c.lastCommittedValue!==r&&(c.lastCommittedValue=r,c.userValue=r,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:i,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});const i=f;f=null,n.addEventListener("blur",e=>{var n;if(!c.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{target:r}=e;let{value:s}=r;if(p){if(s&&"time"===h){const e=s.split(":").map(e=>parseInt(e,10));s=new Date(2e3,0,1,e[0],e[1],e[2]||0).valueOf(),r.step=""}else s=new Date(s).valueOf();r.type="text"}var a;(c.userValue=s,c.lastCommittedValue!==s)&&(null===(a=this.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:c.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));i(e)}),null!==(r=this.data.actions)&&void 0!==r&&r.Keystroke&&n.addEventListener("beforeinput",e=>{var n;c.lastCommittedValue=null;const{data:i,target:r}=e,{value:s,selectionStart:a,selectionEnd:o}=r;let l=a,d=o;switch(e.inputType){case"deleteWordBackward":{const e=s.substring(0,a).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=s.substring(a).match(/^[^\w]*\w*/);e&&(d+=e[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(d+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,change:i||"",willCommit:!1,selStart:l,selEnd:d}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--total-scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Hd extends Wd{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Ud extends Wd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return _d.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",i=>{const{name:r,checked:s}=i.target;for(const a of this._getElementsByName(r,n)){const n=s&&a.exportValue===t.exportValue;a.domElement&&(a.domElement.checked=n),e.setValue(a.id,{value:n})}e.setValue(n,{value:s})}),r.addEventListener("resetform",e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",t=>{const i={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(i,t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Vd extends Wd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof i&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});const r=document.createElement("input");if(_d.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",t=>{const{name:i,checked:r}=t.target;for(const s of this._getElementsByName(i,n))e.setValue(s.id,{value:!1});e.setValue(n,{value:r})}),r.addEventListener("resetform",e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){const i=t.buttonValue;r.addEventListener("updatefromsandbox",t=>{const r={value:t=>{const r=i===t.detail.value;for(const i of this._getElementsByName(t.target.name)){const t=r&&i.id===n;i.domElement&&(i.domElement.checked=t),e.setValue(i.id,{value:t})}}};this._dispatchEventFromSandbox(r,t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Gd extends Dd{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class qd extends Wd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");_d.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===t});for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),r=!1),i.append(e)}let s=null;if(r){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),i.prepend(e),s=()=>{e.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const a=e=>{const t=e?"value":"textContent",{options:n,multiple:r}=i;return r?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=a(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",n=>{const r={value(n){var r;null===(r=s)||void 0===r||r();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of i.options)e.selected=c.has(e.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(e){i.multiple=!0},remove(n){const r=i.options,s=n.detail.remove;if(r[s].selected=!1,i.remove(s),r.length>0){-1===Array.prototype.findIndex.call(r,e=>e.selected)&&(r[0].selected=!0)}e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==i.length;)i.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(n){const{index:r,displayValue:s,exportValue:c}=n.detail.insert,d=i.children[r],h=document.createElement("option");h.textContent=s,h.value=c,d?d.before(h):i.append(h),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:r}=n.detail;for(;0!==i.length;)i.remove(0);for(const e of r){const{displayValue:t,exportValue:n}=e,r=document.createElement("option");r.textContent=t,r.value=n,i.append(r)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const i=new Set(n.detail.indices);for(const e of n.target.options)e.selected=i.has(e.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(r,n)}),i.addEventListener("input",n=>{var i;const r=a(!0),s=a(!1);e.setValue(t,{value:r}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:s,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):i.addEventListener("input",function(n){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Yd extends jd{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:jd._hasPopupData(t)}),this.elements=n,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new xh({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,eventBus:this.linkService.eventBus}),n=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(e=>"".concat(qe).concat(e)).join(",")),this.container}}var Xd=new WeakMap,Kd=new WeakMap,Qd=new WeakMap,$d=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,eh=new WeakMap,th=new WeakMap,nh=new WeakMap,ih=new WeakMap,rh=new WeakMap,sh=new WeakMap,ah=new WeakMap,oh=new WeakMap,lh=new WeakMap,ch=new WeakMap,dh=new WeakMap,hh=new WeakMap,uh=new WeakMap,ph=new WeakMap,fh=new WeakMap,gh=new WeakMap,mh=new WeakMap,vh=new WeakMap,bh=new WeakSet;class xh{constructor(e){let{container:t,color:n,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:d,open:h,eventBus:u=null}=e;v(this,bh),b(this,Xd,x(bh,this,Mh).bind(this)),b(this,Kd,x(bh,this,jh).bind(this)),b(this,Qd,x(bh,this,Rh).bind(this)),b(this,$d,x(bh,this,Th).bind(this)),b(this,Jd,null),b(this,Zd,null),b(this,eh,null),b(this,th,null),b(this,nh,null),b(this,ih,null),b(this,rh,null),b(this,sh,null),b(this,ah,!1),b(this,oh,null),b(this,lh,null),b(this,ch,null),b(this,dh,null),b(this,hh,null),b(this,uh,null),b(this,ph,null),b(this,fh,null),b(this,gh,null),b(this,mh,null),b(this,vh,!1),k(Zd,this,t),k(gh,this,r),k(eh,this,a),k(fh,this,o),k(rh,this,l),k(Jd,this,n),k(ph,this,c),k(sh,this,d),k(nh,this,i),k(ih,this,u),k(th,this,at.toDateObject(s)),this.trigger=i.flatMap(e=>e.getElementsToTriggerPopup()),x(bh,this,yh).call(this),w(Zd,this).hidden=!0,h&&x(bh,this,Th).call(this)}render(){var e;if(w(oh,this))return;const t=k(oh,this,document.createElement("div"));if(t.className="popup",w(Jd,this)){const e=t.style.outlineColor=We.makeHexColor(...w(Jd,this));t.style.backgroundColor="color-mix(in srgb, ".concat(e," 30%, white)")}const n=document.createElement("span");if(n.className="header",null!==(e=w(gh,this))&&void 0!==e&&e.str){const e=document.createElement("span");e.className="title",n.append(e),({dir:e.dir,str:e.textContent}=w(gh,this))}if(t.append(n),w(th,this)){const e=document.createElement("time");e.className="popupDate",e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:w(th,this).valueOf()})),e.dateTime=w(th,this).toISOString(),n.append(e)}const i=y(bh,this,Sh);if(i)Sd.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const e=this._formatContents(w(eh,this));t.append(e)}w(Zd,this).append(t)}_formatContents(e){let{str:t,dir:n}=e;const i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;const r=t.split(/(?:\r\n?|\n)/);for(let s=0,a=r.length;s<a;++s){const e=r[s];i.append(document.createTextNode(e)),s<a-1&&i.append(document.createElement("br"))}return i}updateEdited(e){var t;let{rect:n,popup:i,deleted:r}=e;r||null!==i&&void 0!==i&&i.deleted?this.remove():(x(bh,this,yh).call(this),w(mh,this)||k(mh,this,{contentsObj:w(eh,this),richText:w(fh,this)}),n&&k(ch,this,null),i&&(k(fh,this,x(bh,this,Ch).call(this,i.text)),k(th,this,at.toDateObject(i.date)),k(eh,this,null)),null===(t=w(oh,this))||void 0===t||t.remove(),k(oh,this,null))}resetEdited(){var e;w(mh,this)&&(({contentsObj:g(k,[eh,this])._,richText:g(k,[fh,this])._}=w(mh,this)),k(mh,this,null),null===(e=w(oh,this))||void 0===e||e.remove(),k(oh,this,null),k(ch,this,null))}remove(){var e,t;null===(e=w(lh,this))||void 0===e||e.abort(),k(lh,this,null),null===(t=w(oh,this))||void 0===t||t.remove(),k(oh,this,null),k(vh,this,!1),k(ah,this,!1);for(const n of this.trigger)n.classList.remove("popupTriggerArea")}forceHide(){k(vh,this,this.isVisible),w(vh,this)&&(w(Zd,this).hidden=!0)}maybeShow(){x(bh,this,yh).call(this),w(vh,this)&&(w(oh,this)||x(bh,this,Rh).call(this),k(vh,this,!1),w(Zd,this).hidden=!1)}get isVisible(){return!1===w(Zd,this).hidden}}function yh(){if(w(lh,this))return;k(lh,this,new AbortController);const{signal:e}=w(lh,this);for(const n of this.trigger)n.addEventListener("click",w($d,this),{signal:e}),n.addEventListener("mouseenter",w(Qd,this),{signal:e}),n.addEventListener("mouseleave",w(Kd,this),{signal:e}),n.classList.add("popupTriggerArea");for(const n of w(nh,this)){var t;null===(t=n.container)||void 0===t||t.addEventListener("keydown",w(Xd,this),{signal:e})}x(bh,this,kh).call(this)}function wh(){const e=w(nh,this).find(e=>e.hasCommentButton);e&&(k(hh,this,e._normalizePoint(e.commentButtonPosition)),k(uh,this,e.commentButtonColor))}function kh(){if(w(dh,this))return;if(w(hh,this)||x(bh,this,wh).call(this),!w(hh,this))return;const e=k(dh,this,document.createElement("button"));e.className="annotationCommentButton";const t=w(nh,this)[0].container;e.style.zIndex=t.style.zIndex+1,e.tabIndex=0;const{signal:n}=w(lh,this);e.addEventListener("hover",w($d,this),{signal:n}),e.addEventListener("keydown",w(Xd,this),{signal:n}),e.addEventListener("click",()=>{var e;const[{data:{id:t},annotationEditorType:n}]=w(nh,this);null===(e=w(ih,this))||void 0===e||e.dispatch("switchannotationeditormode",{source:this,editId:t,mode:n,editComment:!0})},{signal:n});const{style:i}=e;i.left="calc(".concat(w(hh,this)[0],"%)"),i.top="calc(".concat(w(hh,this)[1],"% - var(--comment-button-dim))"),w(uh,this)&&(i.backgroundColor=w(uh,this)),t.after(e)}function Sh(e){const t=w(fh,e),n=w(eh,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:w(fh,e).html||null}function _h(e){var t;return(null===(t=y(bh,e,Sh))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function Ah(e){var t;return(null===(t=y(bh,e,Sh))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function Ch(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:y(bh,this,Ah),fontSize:y(bh,this,_h)?"calc(".concat(y(bh,this,_h),"px * var(--total-scale-factor))"):""}};for(const r of e.split("\n"))t.push({name:"span",value:r,attributes:i});return n}function Mh(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&w(ah,this))&&x(bh,this,Th).call(this)}function Eh(){if(null!==w(ch,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:r}}}=w(rh,this);let s=!!w(sh,this),a=w(s?sh:ph,this);for(const u of w(nh,this))if(!a||null!==We.intersect(u.data.rect,a)){a=u.data.rect,s=!0;break}const o=We.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),l=s?a[2]-a[0]+5:0,c=o[0]+l,d=o[1];k(ch,this,[100*(c-i)/t,100*(d-r)/n]);const{style:h}=w(Zd,this);h.left="".concat(w(ch,this)[0],"%"),h.top="".concat(w(ch,this)[1],"%")}function Th(){k(ah,this,!w(ah,this)),w(ah,this)?(x(bh,this,Rh).call(this),w(Zd,this).addEventListener("click",w($d,this)),w(Zd,this).addEventListener("keydown",w(Xd,this))):(x(bh,this,jh).call(this),w(Zd,this).removeEventListener("click",w($d,this)),w(Zd,this).removeEventListener("keydown",w(Xd,this)))}function Rh(){w(oh,this)||this.render(),this.isVisible?w(ah,this)&&w(Zd,this).classList.add("focused"):(x(bh,this,Eh).call(this),w(Zd,this).hidden=!1,w(Zd,this).style.zIndex=parseInt(w(Zd,this).style.zIndex)+1e3)}function jh(){w(Zd,this).classList.remove("focused"),!w(ah,this)&&this.isVisible&&(w(Zd,this).hidden=!0,w(Zd,this).style.zIndex=parseInt(w(Zd,this).style.zIndex)-1e3)}class Ph extends jd{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=J.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ih=new WeakMap;class Lh extends jd{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),b(this,Ih,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),r=k(Ih,this,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return w(Ih,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Dh=new WeakMap;class Fh extends jd{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),b(this,Dh,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,s=k(Dh,this,this.svgFactory.createElement("svg:rect"));return s.setAttribute("x",r/2),s.setAttribute("y",r/2),s.setAttribute("width",t-r),s.setAttribute("height",n-r),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return w(Dh,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Nh=new WeakMap;class Bh extends jd{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),b(this,Nh,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,s=k(Nh,this,this.svgFactory.createElement("svg:ellipse"));return s.setAttribute("cx",t/2),s.setAttribute("cy",n/2),s.setAttribute("rx",t/2-r/2),s.setAttribute("ry",n/2-r/2),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return w(Nh,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var zh=new WeakMap;class Wh extends jd{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),b(this,zh,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i},width:r,height:s}=this;if(!t)return this.container;const a=this.svgFactory.create(r,s,!0);let o=[];for(let c=0,d=t.length;c<d;c+=2){const n=t[c]-e[0],i=e[3]-t[c+1];o.push("".concat(n,",").concat(i))}o=o.join(" ");const l=k(zh,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return w(zh,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class Oh extends Wh{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Hh extends jd{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Uh=new WeakMap,Vh=new WeakMap,Gh=new WeakSet;class qh extends jd{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),v(this,Gh),b(this,Uh,null),b(this,Vh,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?J.HIGHLIGHT:J.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:i,popupRef:r}}=this,{transform:s,width:a,height:o}=x(Gh,this,Yh).call(this,t,e),l=this.svgFactory.create(a,o,!0),c=k(Uh,this,this.svgFactory.createElement("svg:g"));l.append(c),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",s);for(let d=0,h=n.length;d<h;d++){const e=this.svgFactory.createElement(this.svgElementName);w(Vh,this).push(e),e.setAttribute("points",n[d].join(",")),c.append(e)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:i}=e,r=w(Uh,this);if(t>=0&&r.setAttribute("stroke-width",t||1),n)for(let s=0,a=w(Vh,this).length;s<a;s++)w(Vh,this)[s].setAttribute("points",n[s].join(","));if(i){const{transform:e,width:t,height:n}=x(Gh,this,Yh).call(this,this.data.rotation,i);r.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),r.setAttribute("transform",e)}}getElementsToTriggerPopup(){return w(Vh,this)}addHighlightArea(){this.container.classList.add("highlightArea")}get commentButtonPosition(){const{inkLists:e,rect:t}=this.data;if((null===e||void 0===e?void 0:e.length)>=1){let t=-1/0,n=-1/0;for(const i of e)for(let e=0,r=i.length;e<r;e+=2)i[e+1]>n?(n=i[e+1],t=i[e]):i[e+1]===n&&(t=Math.max(t,i[e]));if(t!==1/0)return[t,n]}return t?[t[2],t[3]]:null}}function Yh(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class Xh extends jd{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=J.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const t=document.createElement("mark");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Kh extends jd{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Qh extends jd{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class $h extends jd{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const t=document.createElement("s");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Jh extends jd{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=J.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Zh=new WeakMap,eu=new WeakSet;class tu extends jd{constructor(e){var t;super(e,{isRenderable:!0}),v(this,eu),b(this,Zh,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",c({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",x(eu,this,nu).bind(this)),k(Zh,this,n);const{isMac:i}=Be.platform;return e.addEventListener("keydown",e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&x(eu,this,nu).call(this)}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return w(Zh,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function nu(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var iu=new WeakMap,ru=new WeakMap,su=new WeakMap,au=new WeakMap,ou=new WeakSet;class lu{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o}=e;v(this,ou),b(this,iu,null),b(this,ru,null),b(this,su,new Map),b(this,au,null),this.div=t,k(iu,this,n),k(ru,this,i),k(au,this,o||null),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return w(su,this).size>0}async render(e){const{annotations:t}=e,n=this.div;ht(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new kd,annotationStorage:e.annotationStorage||new ds,enableComment:!0===e.enableComment,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const e=a.annotationType===oe.POPUP;if(e){const e=i.get(a.id);if(!e)continue;r.elements=e}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;r.data=a;const t=Cd.create(r);if(!t.isRenderable)continue;if(!e&&a.popupRef){const e=i.get(a.popupRef);e?e.push(t):i.set(a.popupRef,[t])}const n=t.render();var s;if(a.hidden&&(n.style.visibility="hidden"),await x(ou,this,cu).call(this,n,a.id,r.elements),t._isEditable)w(su,this).set(t.data.id,t),null===(s=this._annotationEditorUIManager)||void 0===s||s.renderAnnotationElement(t)}x(ou,this,du).call(this)}async addLinkAnnotations(e,t){const n={data:null,layer:this.div,linkService:t,svgFactory:new kd,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=lu._defaultBorderStyle),n.data=i;const e=Cd.create(n);if(!e.isRenderable)continue;const t=e.render();await x(ou,this,cu).call(this,t,i.id,null)}}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,ht(n,{rotation:t.rotation}),x(ou,this,du).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(w(su,this).values())}getEditableAnnotation(e){return w(su,this).get(e)}static get _defaultBorderStyle(){return Ee(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:le,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}async function cu(e,t,n){var i;const r=e.firstChild||e,s=r.id="".concat(qe).concat(t),a=await(null===(i=w(au,this))||void 0===i?void 0:i.getAriaAttributes(s));if(a)for(const[l,c]of a)r.setAttribute(l,c);var o;n?n.at(-1).container.after(e):(this.div.append(e),null===(o=w(iu,this))||void 0===o||o.moveElementInDOM(this.div,e,r,!1))}function du(){if(!w(ru,this))return;const e=this.div;for(const[n,i]of w(ru,this)){const r=e.querySelector('[data-annotation-id="'.concat(n,'"]'));if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?"CANVAS"===s.nodeName?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i);const a=w(su,this).get(n);var t;if(a)if(a._hasNoCanvas)null===(t=this._annotationEditorUIManager)||void 0===t||t.setMissingCanvas(n,r.id,i),a._hasNoCanvas=!1;else a.canvas=i}w(ru,this).clear()}const hu=/\r\n?|\n/g;var uu=new WeakMap,pu=new WeakMap,fu=new WeakMap,gu=new WeakMap,mu=new WeakMap,vu=new WeakSet;class bu extends Lr{static get _keyboardManager(){const e=bu.prototype,t=e=>e.isEmpty(),n=Jn.TRANSLATE_SMALL,i=Jn.TRANSLATE_BIG;return Ee(this,"_keyboardManager",new Jt([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}constructor(e){super(c(c({},e),{},{name:"freeTextEditor"})),v(this,vu),b(this,uu,void 0),b(this,pu,""),b(this,fu,"".concat(this.id,"-editor")),b(this,gu,null),b(this,mu,void 0),o(this,"_colorPicker",null),k(uu,this,e.color||bu._defaultColor||Lr._defaultLineColor),k(mu,this,e.fontSize||bu._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){Lr.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Z.FREETEXT_SIZE:bu._defaultFontSize=t;break;case Z.FREETEXT_COLOR:bu._defaultColor=t}}updateParams(e,t){switch(e){case Z.FREETEXT_SIZE:x(vu,this,xu).call(this,t);break;case Z.FREETEXT_COLOR:x(vu,this,yu).call(this,t)}}static get defaultPropertiesToUpdate(){return[[Z.FREETEXT_SIZE,bu._defaultFontSize],[Z.FREETEXT_COLOR,bu._defaultColor||Lr._defaultLineColor]]}get propertiesToUpdate(){return[[Z.FREETEXT_SIZE,w(mu,this)],[Z.FREETEXT_COLOR,w(uu,this)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new md(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Z.FREETEXT_COLOR}get colorValue(){return w(uu,this)}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-bu._internalPadding*e,-(bu._internalPadding+w(mu,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),k(gu,this,new AbortController);const e=this._uiManager.combinedSignal(w(gu,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",w(fu,this)),this._isDraggable=!0,null===(e=w(gu,this))||void 0===e||e.abort(),k(gu,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=w(pu,this),t=k(pu,this,x(vu,this,wu).call(this).trimEnd());if(e===t)return;const n=e=>{k(pu,this,e),e?(x(vu,this,_u).call(this),this._uiManager.rebuild(this),x(vu,this,ku).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),x(vu,this,ku).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){bu._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",w(fu,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(w(mu,this),"px * var(--total-scale-factor))"),n.color=w(uu,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:r}=this._initialData;let[s,a]=this.getInitialTranslation();[s,a]=this.pageTranslationToScreen(s,a);const[o,l]=this.pageDimensions,[c,d]=this.pageTranslation;let h,u;switch(this.rotation){case 0:h=e+(r[0]-c)/o,u=t+this.height-(r[1]-d)/l;break;case 90:h=e+(r[0]-c)/o,u=t-(r[1]-d)/l,[s,a]=[a,-s];break;case 180:h=e-this.width+(r[0]-c)/o,u=t-(r[1]-d)/l,[s,a]=[-s,-a];break;case 270:h=e+(r[0]-c-this.height*l)/o,u=t+(r[1]-d-this.width*o)/l,[s,a]=[-a,s]}this.setAt(h*n,u*i,s,a)}else this._moveAfterPaste(e,t);x(vu,this,_u).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const i=Cu.call(bu,t.getData("text")||"").replaceAll(hu,"\n");if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const s=r.getRangeAt(0);if(!i.includes("\n"))return s.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void r.collapseToStart();const{startContainer:a,startOffset:o}=s,l=[],c=[];if(a.nodeType===Node.TEXT_NODE){const e=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(hu,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(Su.call(bu,n)):t=c}l.push(a.nodeValue.slice(0,o).replaceAll(hu,""))}else if(a===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===o&&(e=c),e.push(Su.call(bu,n))}k(pu,this,"".concat(l.join("\n")).concat(i).concat(c.join("\n"))),x(vu,this,_u).call(this);const d=new Range;let h=Math.sumPrecise(l.map(e=>e.length));for(const{firstChild:u}of this.editorDiv.childNodes)if(u.nodeType===Node.TEXT_NODE){const e=u.nodeValue.length;if(h<=e){d.setStart(u,h),d.setEnd(u,h);break}h-=e}r.removeAllRanges(),r.addRange(d)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=bu._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,n){let i=null;if(e instanceof Ph){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:r,rotation:s,id:a,popupRef:o,contentsObj:l},textContent:c,textPosition:d,parent:{page:{pageNumber:h}}}=e;if(!c||0===c.length)return null;i=e={annotationType:J.FREETEXT,color:Array.from(n),fontSize:t,value:c.join("\n"),position:d,pageIndex:h-1,rect:r.slice(0),rotation:s,annotationElementId:a,id:a,deleted:!1,popupRef:o,comment:(null===l||void 0===l?void 0:l.str)||null}}const r=await super.deserialize(e,t,n);return k(mu,r,e.fontSize),k(uu,r,We.makeHexColor(...e.color)),k(pu,r,Cu.call(bu,e.value)),r._initialData=i,e.comment&&r.setCommentData(e.comment),r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=this.getPDFRect(),n=Lr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:w(uu,this)),i={annotationType:J.FREETEXT,color:n,fontSize:w(mu,this),value:x(vu,this,Au).call(this),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(i),e?(i.isCopy=!0,i):this.annotationElementId&&!x(vu,this,Mu).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize="calc(".concat(w(mu,this),"px * var(--total-scale-factor))"),n.color=w(uu,this),t.replaceChildren();for(const r of w(pu,this).split("\n")){const e=document.createElement("div");e.append(r?document.createTextNode(r):document.createElement("br")),t.append(e)}const i={rect:this.getPDFRect()};return i.popup=this.hasEditedComment?this.comment:{text:w(pu,this)},e.updateEdited(i),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function xu(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--total-scale-factor))"),this.translate(0,-(e-w(mu,this))*this.parentScale),k(mu,this,e),x(vu,this,ku).call(this)},n=w(mu,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function yu(e){const t=e=>{var t;k(uu,this,this.editorDiv.style.color=e),null===(t=this._colorPicker)||void 0===t||t.update(e)},n=w(uu,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function wu(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes){var n;(null===(n=t)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===i.nodeName||(e.push(Su.call(L,i)),t=i)}return e.join("\n")}function ku(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,i=t.style.display,r=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=i,t.classList.toggle("hidden",r)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function Su(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(hu,"")}function _u(){if(this.editorDiv.replaceChildren(),w(pu,this))for(const e of w(pu,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function Au(){return w(pu,this).replaceAll("\xa0"," ")}function Cu(e){return e.replaceAll(" ","\xa0")}function Mu(e){const{value:t,fontSize:n,color:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((e,t)=>e!==i[t])||e.pageIndex!==r}L=bu,o(bu,"_freeTextDefaultContent",""),o(bu,"_internalPadding",0),o(bu,"_defaultColor",null),o(bu,"_defaultFontSize",10),o(bu,"_type","freetext"),o(bu,"_editorType",J.FREETEXT);class Eu{toSVGPath(){_e("Abstract method `toSVGPath` must be implemented.")}get box(){_e("Abstract getter `box` must be implemented.")}serialize(e,t){_e("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,r,s){s||(s=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)s[a]=t+e[a]*i,s[a+1]=n+e[a+1]*r;return s}static _rescaleAndSwap(e,t,n,i,r,s){s||(s=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)s[a]=t+e[a+1]*i,s[a+1]=n+e[a]*r;return s}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let r=0,s=e.length;r<s;r+=2)i[r]=t+e[r],i[r+1]=n+e[r+1];return i}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,n,i,r){switch(r){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,r,s){return[(e+5*n)/6,(t+5*i)/6,(5*n+r)/6,(5*i+s)/6,(n+r)/2,(i+s)/2]}}o(Eu,"PRECISION",1e-4);var Tu=new WeakMap,Ru=new WeakMap,ju=new WeakMap,Pu=new WeakMap,Iu=new WeakMap,Lu=new WeakMap,Du=new WeakMap,Fu=new WeakMap,Nu=new WeakMap,Bu=new WeakMap,zu=new WeakMap,Wu=new WeakMap,Ou=new WeakMap,Hu=new WeakSet;class Uu{constructor(e,t,n,i,r){let{x:s,y:a}=e,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;v(this,Hu),b(this,Tu,void 0),b(this,Ru,[]),b(this,ju,void 0),b(this,Pu,void 0),b(this,Iu,[]),b(this,Lu,new Float32Array(18)),b(this,Du,void 0),b(this,Fu,void 0),b(this,Nu,void 0),b(this,Bu,void 0),b(this,zu,void 0),b(this,Wu,void 0),b(this,Ou,[]),k(Tu,this,t),k(Wu,this,i*n),k(Pu,this,r),w(Lu,this).set([NaN,NaN,NaN,NaN,s,a],6),k(ju,this,o),k(Bu,this,$u._*n),k(Nu,this,Ju._*n),k(zu,this,n),w(Ou,this).push(s,a)}isEmpty(){return isNaN(w(Lu,this)[8])}add(e){var t;let{x:n,y:i}=e;k(Du,this,n),k(Fu,this,i);const[r,s,a,o]=w(Tu,this);let[l,c,d,h]=w(Lu,this).subarray(8,12);const u=n-d,p=i-h,f=Math.hypot(u,p);if(f<w(Nu,this))return!1;const g=f-w(Bu,this),m=g/f,v=m*u,b=m*p;let x=l,y=c;l=d,c=h,d+=v,h+=b,null===(t=w(Ou,this))||void 0===t||t.push(n,i);const S=v/g,_=-b/g*w(Wu,this),A=S*w(Wu,this);if(w(Lu,this).set(w(Lu,this).subarray(2,8),0),w(Lu,this).set([d+_,h+A],4),w(Lu,this).set(w(Lu,this).subarray(14,18),12),w(Lu,this).set([d-_,h-A],16),isNaN(w(Lu,this)[6]))return 0===w(Iu,this).length&&(w(Lu,this).set([l+_,c+A],2),w(Iu,this).push(NaN,NaN,NaN,NaN,(l+_-r)/a,(c+A-s)/o),w(Lu,this).set([l-_,c-A],14),w(Ru,this).push(NaN,NaN,NaN,NaN,(l-_-r)/a,(c-A-s)/o)),w(Lu,this).set([x,y,l,c,d,h],6),!this.isEmpty();w(Lu,this).set([x,y,l,c,d,h],6);return Math.abs(Math.atan2(y-c,x-l)-Math.atan2(b,v))<Math.PI/2?([l,c,d,h]=w(Lu,this).subarray(2,6),w(Iu,this).push(NaN,NaN,NaN,NaN,((l+d)/2-r)/a,((c+h)/2-s)/o),[l,c,x,y]=w(Lu,this).subarray(14,18),w(Ru,this).push(NaN,NaN,NaN,NaN,((x+l)/2-r)/a,((y+c)/2-s)/o),!0):([x,y,l,c,d,h]=w(Lu,this).subarray(0,6),w(Iu,this).push(((x+5*l)/6-r)/a,((y+5*c)/6-s)/o,((5*l+d)/6-r)/a,((5*c+h)/6-s)/o,((l+d)/2-r)/a,((c+h)/2-s)/o),[d,h,l,c,x,y]=w(Lu,this).subarray(12,18),w(Ru,this).push(((x+5*l)/6-r)/a,((y+5*c)/6-s)/o,((5*l+d)/6-r)/a,((5*c+h)/6-s)/o,((l+d)/2-r)/a,((c+h)/2-s)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const e=w(Iu,this),t=w(Ru,this);if(isNaN(w(Lu,this)[6])&&!this.isEmpty())return x(Hu,this,Gu).call(this);const n=[];n.push("M".concat(e[4]," ").concat(e[5]));for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push("L".concat(e[i+4]," ").concat(e[i+5])):n.push("C".concat(e[i]," ").concat(e[i+1]," ").concat(e[i+2]," ").concat(e[i+3]," ").concat(e[i+4]," ").concat(e[i+5]));x(Hu,this,Yu).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push("L".concat(t[i+4]," ").concat(t[i+5])):n.push("C".concat(t[i]," ").concat(t[i+1]," ").concat(t[i+2]," ").concat(t[i+3]," ").concat(t[i+4]," ").concat(t[i+5]));return x(Hu,this,qu).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,r,s){return new op(e,t,n,i,r,s)}getOutlines(){var e,t;const n=w(Iu,this),i=w(Ru,this),r=w(Lu,this),[s,a,o,l]=w(Tu,this),c=new Float32Array((null!==(e=null===(t=w(Ou,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let u=0,p=c.length-2;u<p;u+=2)c[u]=(w(Ou,this)[u]-s)/o,c[u+1]=(w(Ou,this)[u+1]-a)/l;if(c[c.length-2]=(w(Du,this)-s)/o,c[c.length-1]=(w(Fu,this)-a)/l,isNaN(r[6])&&!this.isEmpty())return x(Hu,this,Xu).call(this,c);const d=new Float32Array(w(Iu,this).length+24+w(Ru,this).length);let h=n.length;for(let u=0;u<h;u+=2)isNaN(n[u])?d[u]=d[u+1]=NaN:(d[u]=n[u],d[u+1]=n[u+1]);h=x(Hu,this,Qu).call(this,d,h);for(let u=i.length-6;u>=6;u-=6)for(let e=0;e<6;e+=2)isNaN(i[u+e])?(d[h]=d[h+1]=NaN,h+=2):(d[h]=i[u+e],d[h+1]=i[u+e+1],h+=2);return x(Hu,this,Ku).call(this,d,h),this.newFreeDrawOutline(d,c,w(Tu,this),w(zu,this),w(ju,this),w(Pu,this))}}function Vu(){const e=w(Lu,this).subarray(4,6),t=w(Lu,this).subarray(16,18),[n,i,r,s]=w(Tu,this);return[(w(Du,this)+(e[0]-t[0])/2-n)/r,(w(Fu,this)+(e[1]-t[1])/2-i)/s,(w(Du,this)+(t[0]-e[0])/2-n)/r,(w(Fu,this)+(t[1]-e[1])/2-i)/s]}function Gu(){const[e,t,n,i]=w(Tu,this),[r,s,a,o]=x(Hu,this,Vu).call(this);return"M".concat((w(Lu,this)[2]-e)/n," ").concat((w(Lu,this)[3]-t)/i," L").concat((w(Lu,this)[4]-e)/n," ").concat((w(Lu,this)[5]-t)/i," L").concat(r," ").concat(s," L").concat(a," ").concat(o," L").concat((w(Lu,this)[16]-e)/n," ").concat((w(Lu,this)[17]-t)/i," L").concat((w(Lu,this)[14]-e)/n," ").concat((w(Lu,this)[15]-t)/i," Z")}function qu(e){const t=w(Ru,this);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function Yu(e){const[t,n,i,r]=w(Tu,this),s=w(Lu,this).subarray(4,6),a=w(Lu,this).subarray(16,18),[o,l,c,d]=x(Hu,this,Vu).call(this);e.push("L".concat((s[0]-t)/i," ").concat((s[1]-n)/r," L").concat(o," ").concat(l," L").concat(c," ").concat(d," L").concat((a[0]-t)/i," ").concat((a[1]-n)/r))}function Xu(e){const t=w(Lu,this),[n,i,r,s]=w(Tu,this),[a,o,l,c]=x(Hu,this,Vu).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-n)/r,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-n)/r,(t[5]-i)/s,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-n)/r,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-n)/r,(t[15]-i)/s],0),this.newFreeDrawOutline(d,e,w(Tu,this),w(zu,this),w(ju,this),w(Pu,this))}function Ku(e,t){const n=w(Ru,this);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6}function Qu(e,t){const n=w(Lu,this).subarray(4,6),i=w(Lu,this).subarray(16,18),[r,s,a,o]=w(Tu,this),[l,c,d,h]=x(Hu,this,Vu).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-s)/o],t),t+24}var $u={_:8},Ju={_:$u._+2},Zu=new WeakMap,ep=new WeakMap,tp=new WeakMap,np=new WeakMap,ip=new WeakMap,rp=new WeakMap,sp=new WeakMap,ap=new WeakSet;class op extends Eu{constructor(e,t,n,i,r,s){super(),v(this,ap),b(this,Zu,void 0),b(this,ep,new Float32Array(4)),b(this,tp,void 0),b(this,np,void 0),b(this,ip,void 0),b(this,rp,void 0),b(this,sp,void 0),k(sp,this,e),k(ip,this,t),k(Zu,this,n),k(rp,this,i),k(tp,this,r),k(np,this,s),this.lastPoint=[NaN,NaN],x(ap,this,lp).call(this,s);const[a,o,l,c]=w(ep,this);for(let d=0,h=e.length;d<h;d+=2)e[d]=(e[d]-a)/l,e[d+1]=(e[d+1]-o)/c;for(let d=0,h=t.length;d<h;d+=2)t[d]=(t[d]-a)/l,t[d+1]=(t[d+1]-o)/c}toSVGPath(){const e=["M".concat(w(sp,this)[4]," ").concat(w(sp,this)[5])];for(let t=6,n=w(sp,this).length;t<n;t+=6)isNaN(w(sp,this)[t])?e.push("L".concat(w(sp,this)[t+4]," ").concat(w(sp,this)[t+5])):e.push("C".concat(w(sp,this)[t]," ").concat(w(sp,this)[t+1]," ").concat(w(sp,this)[t+2]," ").concat(w(sp,this)[t+3]," ").concat(w(sp,this)[t+4]," ").concat(w(sp,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,i,r,s]=e;const a=r-n,o=s-i;let l,c;switch(t){case 0:l=Eu._rescale(w(sp,this),n,s,a,-o),c=Eu._rescale(w(ip,this),n,s,a,-o);break;case 90:l=Eu._rescaleAndSwap(w(sp,this),n,i,a,o),c=Eu._rescaleAndSwap(w(ip,this),n,i,a,o);break;case 180:l=Eu._rescale(w(sp,this),r,i,-a,o),c=Eu._rescale(w(ip,this),r,i,-a,o);break;case 270:l=Eu._rescaleAndSwap(w(sp,this),r,s,-a,-o),c=Eu._rescaleAndSwap(w(ip,this),r,s,-a,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return w(ep,this)}newOutliner(e,t,n,i,r){return new Uu(e,t,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(e,t){const[n,i,r,s]=w(ep,this),[a,o,l,c]=w(Zu,this),d=r*l,h=s*c,u=n*l+a,p=i*c+o,f=this.newOutliner({x:w(ip,this)[0]*d+u,y:w(ip,this)[1]*h+p},w(Zu,this),w(rp,this),e,w(np,this),null!==t&&void 0!==t?t:w(tp,this));for(let g=2;g<w(ip,this).length;g+=2)f.add({x:w(ip,this)[g]*d+u,y:w(ip,this)[g+1]*h+p});return f.getOutlines()}}function lp(e){const t=w(sp,this);let n=t[4],i=t[5];const r=[n,i,n,i];let s=n,a=i;const o=e?Math.max:Math.min;for(let c=6,d=t.length;c<d;c+=6){const e=t[c+4],l=t[c+5];if(isNaN(t[c]))We.pointBoundingBox(e,l,r),a<l?(s=e,a=l):a===l&&(s=o(s,e));else{const e=[1/0,1/0,-1/0,-1/0];We.bezierBoundingBox(n,i,...t.slice(c,c+6),e),We.rectBoundingBox(...e,r),a<e[3]?(s=e[2],a=e[3]):a===e[3]&&(s=o(s,e[2]))}n=e,i=l}const l=w(ep,this);l[0]=r[0]-w(tp,this),l[1]=r[1]-w(tp,this),l[2]=r[2]-r[0]+2*w(tp,this),l[3]=r[3]-r[1]+2*w(tp,this),this.lastPoint=[s,a]}var cp=new WeakMap,dp=new WeakMap,hp=new WeakMap,up=new WeakMap,pp=new WeakSet;class fp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];v(this,pp),b(this,cp,void 0),b(this,dp,void 0),b(this,hp,[]),b(this,up,[]);const r=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:u,y:p,width:f,height:g}of e){const e=Math.floor((u-t)/s)*s,n=Math.ceil((u+f+t)/s)*s,i=Math.floor((p-t)/s)*s,a=Math.ceil((p+g+t)/s)*s,o=[e,i,a,!0],l=[n,i,a,!1];w(hp,this).push(o,l),We.rectBoundingBox(e,i,n,a,r)}const a=r[2]-r[0]+2*n,o=r[3]-r[1]+2*n,l=r[0]-n,c=r[1]-n,d=w(hp,this).at(i?-1:-2),h=[d[0],d[2]];for(const u of w(hp,this)){const[e,t,n]=u;u[0]=(e-l)/a,u[1]=(t-c)/o,u[2]=(n-c)/o}k(cp,this,new Float32Array([l,c,a,o])),k(dp,this,h)}getOutlines(){w(hp,this).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);const e=[];for(const t of w(hp,this))t[3]?(e.push(...x(pp,this,xp).call(this,t)),x(pp,this,vp).call(this,t)):(x(pp,this,bp).call(this,t),e.push(...x(pp,this,xp).call(this,t)));return x(pp,this,gp).call(this,e)}}function gp(e){const t=[],n=new Set;for(const s of e){const[e,n,i]=s;t.push([e,n,s],[e,i,s])}t.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let s=0,a=t.length;s<a;s+=2){const e=t[s][2],i=t[s+1][2];e.push(i),i.push(e),n.add(e),n.add(i)}const i=[];let r;for(;n.size>0;){const e=n.values().next().value;let[t,s,a,o,l]=e;n.delete(e);let c=t,d=s;for(r=[t,a],i.push(r);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,s,a,o,l]=e,c!==t&&(r.push(c,d,t,d===s?s:a),c=t),d=d===s?a:s}r.push(c,d)}return new kp(i,w(cp,this),w(dp,this))}function mp(e){const t=w(up,this);let n=0,i=t.length-1;for(;n<=i;){const r=n+i>>1,s=t[r][0];if(s===e)return r;s<e?n=r+1:i=r-1}return i+1}function vp(e){let[,t,n]=e;const i=x(pp,this,mp).call(this,t);w(up,this).splice(i,0,[t,n])}function bp(e){let[,t,n]=e;const i=x(pp,this,mp).call(this,t);for(let r=i;r<w(up,this).length;r++){const[e,i]=w(up,this)[r];if(e!==t)break;if(e===t&&i===n)return void w(up,this).splice(r,1)}for(let r=i-1;r>=0;r--){const[e,i]=w(up,this)[r];if(e!==t)break;if(e===t&&i===n)return void w(up,this).splice(r,1)}}function xp(e){const[t,n,i]=e,r=[[t,n,i]],s=x(pp,this,mp).call(this,i);for(let a=0;a<s;a++){const[e,n]=w(up,this)[a];for(let i=0,s=r.length;i<s;i++){const[,a,o]=r[i];if(!(n<=a||o<=e))if(a>=e)if(o>n)r[i][1]=n;else{if(1===s)return[];r.splice(i,1),i--,s--}else r[i][2]=e,o>n&&r.push([t,n,o])}}return r}var yp=new WeakMap,wp=new WeakMap;class kp extends Eu{constructor(e,t,n){super(),b(this,yp,void 0),b(this,wp,void 0),k(wp,this,e),k(yp,this,t),this.lastPoint=n}toSVGPath(){const e=[];for(const t of w(wp,this)){let[n,i]=t;e.push("M".concat(n," ").concat(i));for(let r=2;r<t.length;r+=2){const s=t[r],a=t[r+1];s===n?(e.push("V".concat(a)),i=a):a===i&&(e.push("H".concat(s)),n=s)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,i,r,s]=e;const a=[],o=r-n,l=s-i;for(const c of w(wp,this)){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*o,e[t+1]=s-c[t+1]*l;a.push(e)}return a}get box(){return w(yp,this)}get classNamesForOutlining(){return["highlightOutline"]}}class Sp extends Uu{newFreeDrawOutline(e,t,n,i,r,s){return new _p(e,t,n,i,r,s)}}class _p extends op{newOutliner(e,t,n,i,r){return new Sp(e,t,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var Ap=new WeakMap,Cp=new WeakMap,Mp=new WeakMap,Ep=new WeakMap,Tp=new WeakMap,Rp=new WeakMap,jp=new WeakMap,Pp=new WeakMap,Ip=new WeakMap,Lp=new WeakMap,Dp=new WeakMap,Fp=new WeakMap,Np=new WeakMap,Bp=new WeakMap,zp=new WeakMap,Wp=new WeakMap,Op=new WeakMap,Hp=new WeakMap,Up=new WeakSet;class Vp extends Lr{static get _keyboardManager(){const e=Vp.prototype;return Ee(this,"_keyboardManager",new Jt([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(c(c({},e),{},{name:"highlightEditor"})),v(this,Up),b(this,Ap,null),b(this,Cp,0),b(this,Mp,void 0),b(this,Ep,null),b(this,Tp,null),b(this,Rp,null),b(this,jp,null),b(this,Pp,0),b(this,Ip,null),b(this,Lp,null),b(this,Dp,null),b(this,Fp,!1),b(this,Np,null),b(this,Bp,void 0),b(this,zp,null),b(this,Wp,""),b(this,Op,void 0),b(this,Hp,""),this.color=e.color||Vp._defaultColor,k(Op,this,e.thickness||Vp._defaultThickness),k(Bp,this,e.opacity||Vp._defaultOpacity),k(Mp,this,e.boxes||null),k(Hp,this,e.methodOfCreation||""),k(Wp,this,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(k(Fp,this,!0),x(Up,this,qp).call(this,e),x(Up,this,$p).call(this)):w(Mp,this)&&(k(Ap,this,e.anchorNode),k(Cp,this,e.anchorOffset),k(jp,this,e.focusNode),k(Pp,this,e.focusOffset),x(Up,this,Gp).call(this),x(Up,this,$p).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:w(Fp,this)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:w(Op,this),methodOfCreation:w(Hp,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;Lr.initialize(e,t),Vp._defaultColor||(Vp._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case Z.HIGHLIGHT_COLOR:Vp._defaultColor=t;break;case Z.HIGHLIGHT_THICKNESS:Vp._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return w(Np,this)}updateParams(e,t){switch(e){case Z.HIGHLIGHT_COLOR:x(Up,this,Yp).call(this,t);break;case Z.HIGHLIGHT_THICKNESS:x(Up,this,Xp).call(this,t)}}static get defaultPropertiesToUpdate(){return[[Z.HIGHLIGHT_COLOR,Vp._defaultColor],[Z.HIGHLIGHT_THICKNESS,Vp._defaultThickness]]}get propertiesToUpdate(){return[[Z.HIGHLIGHT_COLOR,this.color||Vp._defaultColor],[Z.HIGHLIGHT_THICKNESS,w(Op,this)||Vp._defaultThickness],[Z.HIGHLIGHT_FREE,w(Fp,this)]]}get toolbarButtons(){if(this._uiManager.highlightColors){return[["colorPicker",k(Tp,this,new sd({editor:this}))]]}return super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(x(Up,this,tf).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,x(Up,this,tf).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){x(Up,this,Qp).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(x(Up,this,$p).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)x(Up,this,Qp).call(this);else if(e){var n;x(Up,this,$p).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;w(Fp,this)?(e=(e-this.rotation+360)%360,n=Jp.call(Vp,w(Lp,this).box,e)):n=Jp.call(Vp,[this.x,this.y,this.width,this.height],e),t.updateProperties(w(Dp,this),{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(w(zp,this),{bbox:Jp.call(Vp,w(Rp,this).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();w(Wp,this)&&(e.setAttribute("aria-label",w(Wp,this)),e.setAttribute("role","mark")),w(Fp,this)?e.classList.add("free"):this.div.addEventListener("keydown",x(Up,this,Zp).bind(this),{signal:this._uiManager._signal});const t=k(Ip,this,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=w(Ep,this);const[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),Nt(this,w(Ip,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(w(zp,this),{rootClass:{hovered:!0}}))}pointerleave(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(w(zp,this),{rootClass:{hovered:!1}}))}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:x(Up,this,ef).call(this,!0);break;case 1:case 3:x(Up,this,ef).call(this,!1)}}select(){var e;super.select(),w(zp,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(w(zp,this),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),w(zp,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(w(zp,this),{rootClass:{selected:!1}}),w(Fp,this)||x(Up,this,ef).call(this,!1))}get _mustFixPosition(){return!w(Fp,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(w(Dp,this),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(w(zp,this),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,n){let{target:i,x:r,y:s}=n;const{x:a,y:o,width:l,height:c}=i.getBoundingClientRect(),d=new AbortController,h=e.combinedSignal(d),u=t=>{d.abort(),x(Vp,this,af).call(this,e,t)};window.addEventListener("blur",u,{signal:h}),window.addEventListener("pointerup",u,{signal:h}),window.addEventListener("pointerdown",st,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",rt,{signal:h}),i.addEventListener("pointermove",x(Vp,this,sf).bind(this,e),{signal:h}),this._freeHighlight=new Sp({x:r,y:s},[a,o,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(e,t,n){let i=null;if(e instanceof Xh){const{data:{quadPoints:t,rect:n,rotation:r,id:s,color:a,opacity:o,popupRef:l,contentsObj:c},parent:{page:{pageNumber:d}}}=e;i=e={annotationType:J.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:t,boxes:null,pageIndex:d-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,comment:(null===c||void 0===c?void 0:c.str)||null}}else if(e instanceof qh){const{data:{inkLists:t,rect:n,rotation:r,id:s,color:a,borderStyle:{rawWidth:o},popupRef:l,contentsObj:c},parent:{page:{pageNumber:d}}}=e;i=e={annotationType:J.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:t,boxes:null,pageIndex:d-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,comment:(null===c||void 0===c?void 0:c.str)||null}}const{color:r,quadPoints:s,inkLists:a,opacity:o}=e,l=await super.deserialize(e,t,n);l.color=We.makeHexColor(...r),k(Bp,l,o||1),a&&k(Op,l,e.thickness),l._initialData=i,e.comment&&l.setCommentData(e.comment);const[c,d]=l.pageDimensions,[h,u]=l.pageTranslation;if(s){const e=k(Mp,l,[]);for(let t=0;t<s.length;t+=8)e.push({x:(s[t]-h)/c,y:1-(s[t+1]-u)/d,width:(s[t+2]-s[t])/c,height:(s[t+1]-s[t+5])/d});x(Up,l,Gp).call(l),x(Up,l,$p).call(l),l.rotate(l.rotation)}else if(a){k(Fp,l,!0);const e=a[0],n={x:e[0]-h,y:d-(e[1]-u)},i=new Sp(n,[0,0,c,d],1,w(Op,l)/2,!0,.001);for(let t=0,a=e.length;t<a;t+=2)n.x=e[t]-h,n.y=d-(e[t+1]-u),i.add(n);const{id:r,clipPathId:s}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:i.toSVGPath()}},!0,!0);x(Up,l,qp).call(l,{highlightOutlines:i.getOutlines(),highlightId:r,clipPathId:s}),x(Up,l,$p).call(l),l.rotate(l.parentRotation)}return l}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getPDFRect(),n=Lr._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i={annotationType:J.HIGHLIGHT,color:n,opacity:w(Bp,this),thickness:w(Op,this),quadPoints:x(Up,this,nf).call(this),outlines:x(Up,this,rf).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:x(Up,this,tf).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(i),this.annotationElementId&&!x(Up,this,of).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const t={rect:this.getPDFRect()};return this.hasEditedComment&&(t.popup=this.comment),e.updateEdited(t),null}static canCreateNewEmptyEditor(){return!1}}function Gp(){const e=new fp(w(Mp,this),.001);k(Lp,this,e.getOutlines()),[this.x,this.y,this.width,this.height]=w(Lp,this).box;const t=new fp(w(Mp,this),.0025,.001,"ltr"===this._uiManager.direction);k(Rp,this,t.getOutlines());const{lastPoint:n}=w(Rp,this);k(Np,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])}function qp(e){let{highlightOutlines:t,highlightId:n,clipPathId:i}=e;k(Lp,this,t);if(k(Rp,this,t.getNewOutline(w(Op,this)/2+1.5,.0025)),n>=0)k(Dp,this,n),k(Ep,this,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),k(zp,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:w(Rp,this).box,path:{d:w(Rp,this).toSVGPath()}},!0));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(w(Dp,this),{bbox:Jp.call(D,w(Lp,this).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(w(zp,this),{bbox:Jp.call(D,w(Rp,this).box,e),path:{d:w(Rp,this).toSVGPath()}})}const[r,s,a,o]=t.box;switch(this.rotation){case 0:this.x=r,this.y=s,this.width=a,this.height=o;break;case 90:{const[e,t]=this.parentDimensions;this.x=s,this.y=1-r,this.width=a*t/e,this.height=o*e/t;break}case 180:this.x=1-r,this.y=1-s,this.width=a,this.height=o;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-s,this.y=r,this.width=a*t/e,this.height=o*e/t;break}}const{lastPoint:l}=w(Rp,this);k(Np,this,[(l[0]-r)/a,(l[1]-s)/o])}function Yp(e){const t=(e,t)=>{var n,i;this.color=e,k(Bp,this,t),null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(w(Dp,this),{root:{fill:e,"fill-opacity":t}}),null===(i=w(Tp,this))||void 0===i||i.updateColor(e)},n=this.color,i=w(Bp,this);this.addCommands({cmd:t.bind(this,e,D._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}function Xp(e){const t=w(Op,this),n=e=>{k(Op,this,e),x(Up,this,Kp).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Z.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function Kp(e){if(!w(Fp,this))return;x(Up,this,qp).call(this,{highlightOutlines:w(Lp,this).getNewOutline(e/2)}),this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}function Qp(){null!==w(Dp,this)&&this.parent&&(this.parent.drawLayer.remove(w(Dp,this)),k(Dp,this,null),this.parent.drawLayer.remove(w(zp,this)),k(zp,this,null))}function $p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===w(Dp,this)&&(({id:g(k,[Dp,this])._,clipPathId:g(k,[Ep,this])._}=e.drawLayer.draw({bbox:w(Lp,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":w(Bp,this)},rootClass:{highlight:!0,free:w(Fp,this)},path:{d:w(Lp,this).toSVGPath()}},!1,!0)),k(zp,this,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:w(Fp,this)},bbox:w(Rp,this).box,path:{d:w(Rp,this).toSVGPath()}},w(Fp,this))),w(Ip,this)&&(w(Ip,this).style.clipPath=w(Ep,this)))}function Jp(e,t){let[n,i,r,s]=e;switch(t){case 90:return[1-i-s,n,s,r];case 180:return[1-n-r,1-i-s,r,s];case 270:return[i,1-n-r,s,r]}return[n,i,r,s]}function Zp(e){D._keyboardManager.exec(this,e)}function ef(e){if(!w(Ap,this))return;const t=window.getSelection();e?t.setPosition(w(Ap,this),w(Cp,this)):t.setPosition(w(jp,this),w(Pp,this))}function tf(){return w(Fp,this)?this.rotation:0}function nf(){if(w(Fp,this))return null;const[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,r=w(Mp,this),s=new Float32Array(8*r.length);let a=0;for(const{x:o,y:l,width:c,height:d}of r){const r=o*e+n,h=(1-l)*t+i;s[a]=s[a+4]=r,s[a+1]=s[a+3]=h,s[a+2]=s[a+6]=r+c*e,s[a+5]=s[a+7]=h-d*t,a+=8}return s}function rf(e){return w(Lp,this).serialize(e,x(Up,this,tf).call(this))}function sf(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function af(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function of(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((e,n)=>e!==t[n])}D=Vp,o(Vp,"_defaultColor",null),o(Vp,"_defaultOpacity",1),o(Vp,"_defaultThickness",12),o(Vp,"_type","highlight"),o(Vp,"_editorType",J.HIGHLIGHT),o(Vp,"_freeHighlightId",-1),o(Vp,"_freeHighlight",null),o(Vp,"_freeHighlightClipId","");var lf=new WeakMap;class cf{constructor(){b(this,lf,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){w(lf,this)[e]=t}toSVGProperties(){const e=w(lf,this);return k(lf,this,Object.create(null)),{root:e}}reset(){k(lf,this,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){_e("Not implemented")}}var df=new WeakMap,hf=new WeakMap,uf=new WeakSet;class pf extends Lr{constructor(e){super(e),v(this,uf),b(this,df,null),b(this,hf,void 0),o(this,"_colorPicker",null),o(this,"_drawId",null),k(hf,this,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(x(uf,this,ff).call(this,e),x(uf,this,vf).call(this))}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[i,r]of Object.entries(t))n.has(i)?Object.assign(e[i],r):e[i]=r;return e}static getDefaultDrawingOptions(e){_e("Not implemented")}static get typesMap(){_e("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(kf._.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)e.push([n,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,i]of this.constructor.typesMap)e.push([n,t[i]]);return e}_updateProperty(e,t,n){const i=this._drawingOptions,r=i[t],s=n=>{var r;i.updateProperty(t,n);const s=w(df,this).updateProperty(t,n);var a;(s&&x(uf,this,yf).call(this,s),null===(r=this.parent)||void 0===r||r.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType)&&(null===(a=this._colorPicker)||void 0===a||a.update(n))};this.addCommands({cmd:s.bind(this,n),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,pf._mergeSVGProperties(w(df,this).getPathResizingSVGProperties(x(uf,this,xf).call(this)),{bbox:x(uf,this,wf).call(this)}))}_onResized(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,pf._mergeSVGProperties(w(df,this).getPathResizedSVGProperties(x(uf,this,xf).call(this)),{bbox:x(uf,this,wf).call(this)}))}_onTranslating(e,t){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:x(uf,this,wf).call(this)})}_onTranslated(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,pf._mergeSVGProperties(w(df,this).getPathTranslatedSVGProperties(x(uf,this,xf).call(this),this.parentDimensions),{bbox:x(uf,this,wf).call(this)}))}_onStartDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,w(hf,this)&&(k(hf,this,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){x(uf,this,mf).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(x(uf,this,vf).call(this),x(uf,this,yf).call(this,w(df,this).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),x(uf,this,mf).call(this);else if(e){var n;this._uiManager.addShouldRescale(this),x(uf,this,vf).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,pf._mergeSVGProperties({bbox:x(uf,this,wf).call(this)},w(df,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&x(uf,this,yf).call(this,w(df,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,i,r){_e("Not implemented")}static startDrawing(e,t,n,i){var r,s;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:d}=i;if(Cf._&&Cf._!==d)return;const{viewport:{rotation:h}}=e,{width:u,height:p}=a.getBoundingClientRect(),f=Sf._=new AbortController,g=e.combinedSignal(f);Af._||(Af._=c),null!==(r=Cf._)&&void 0!==r||(Cf._=d),window.addEventListener("pointerup",e=>{var t;Af._===e.pointerId?this._endDraw(e):null===(t=Mf._)||void 0===t||t.delete(e.pointerId)},{signal:g}),window.addEventListener("pointercancel",e=>{var t;Af._===e.pointerId?this._currentParent.endDrawingSession():null===(t=Mf._)||void 0===t||t.delete(e.pointerId)},{signal:g}),window.addEventListener("pointerdown",e=>{Cf._===e.pointerType&&((Mf._||(Mf._=new Set)).add(e.pointerId),kf._.isCancellable()&&(kf._.removeLastElement(),kf._.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",rt,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",e=>{e.timeStamp===Ef._&&st(e)},{signal:g}),e.toggleDrawing(),null===(s=t._editorUndoBar)||void 0===s||s.hide(),kf._?e.drawLayer.updateProperties(this._currentDrawId,kf._.startNew(o,l,u,p,h)):(t.updateUIForDefaultProperties(this),kf._=this.createDrawerInstance(o,l,u,p,h),_f._=this.getDefaultDrawingOptions(),this._currentParent=e,({id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(_f._.toSVGProperties(),kf._.defaultSVGProperties),!0,!1)))}static _drawMove(e){var t;if(Ef._=-1,!kf._)return;const{offsetX:n,offsetY:i,pointerId:r}=e;Af._===r&&((null===(t=Mf._)||void 0===t?void 0:t.size)>=1?this._endDraw(e):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,kf._.add(n,i)),Ef._=e.timeStamp,st(e)))}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,kf._=null,_f._=null,Cf._=null,Ef._=NaN),Sf._&&(Sf._.abort(),Sf._=null,Af._=NaN,Mf._=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),(null===e||void 0===e?void 0:e.target)===t.div&&t.drawLayer.updateProperties(this._currentDrawId,kf._.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const e=kf._,n=this._currentDrawId,i=e.getLastElement();return void t.addCommands({cmd:()=>{t.drawLayer.updateProperties(n,e.setLastElement(i))},undo:()=>{t.drawLayer.updateProperties(n,e.removeLastElement())},mustExec:!1,type:Z.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Z.DRAW_STEP),!kf._.isEmpty()){const{pageDimensions:[n,i],scale:r}=t,s=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:kf._.getOutlines(n*r,i*r,r,this._INNER_MARGIN),drawingOptions:_f._,mustBeCommitted:!e});return this._cleanup(!0),s}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,i,r,s){_e("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}=t.viewport,o=this.deserializeDraw(s,a,i,r,this._INNER_MARGIN,e),l=await super.deserialize(e,t,n);return l.createDrawingOptions(e),x(uf,l,ff).call(l,{drawOutlines:o}),x(uf,l,vf).call(l),l.onScaleChanging(),l.rotate(),l}serializeDraw(e){const[t,n]=this.pageTranslation,[i,r]=this.pageDimensions;return w(df,this).serialize([t,n,i,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}function ff(e){let{drawOutlines:t,drawId:n,drawingOptions:i}=e;k(df,this,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-".concat(this.editorType,"-added-alert")),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=x(uf,this,gf).call(this,t,this.parent),x(uf,this,yf).call(this,t.box)}function gf(e,t){const{id:n}=t.drawLayer.draw(F._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}function mf(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function vf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===e||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=x(uf,this,gf).call(this,w(df,this),e)):this.parent.drawLayer.updateParent(this._drawId,e.drawLayer))}function bf(e){let[t,n,i,r]=e;const{parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[n,1-t,i*(a/s),r*(s/a)];case 180:return[1-t,1-n,i,r];case 270:return[1-n,t,i*(a/s),r*(s/a)];default:return[t,n,i,r]}}function xf(){const{x:e,y:t,width:n,height:i,parentDimensions:[r,s],rotation:a}=this;switch(a){case 90:return[1-t,e,n*(r/s),i*(s/r)];case 180:return[1-e,1-t,n,i];case 270:return[t,1-e,n*(r/s),i*(s/r)];default:return[e,t,n,i]}}function yf(e){if([this.x,this.y,this.width,this.height]=x(uf,this,bf).call(this,e),this.div){this.fixAndSetPosition();const[e,t]=this.parentDimensions;this.setDims(this.width*e,this.height*t)}this._onResized()}function wf(){const{x:e,y:t,width:n,height:i,rotation:r,parentRotation:s,parentDimensions:[a,o]}=this;switch((4*r+s)/90){case 1:return[1-t-i,e,i,n];case 2:return[1-e-n,1-t-i,n,i];case 3:return[t,1-e-n,i,n];case 4:return[e,t-n*(a/o),i*(o/a),n*(a/o)];case 5:return[1-t,e,n*(a/o),i*(o/a)];case 6:return[1-e-i*(o/a),1-t,i*(o/a),n*(a/o)];case 7:return[t-n*(a/o),1-e-i*(o/a),n*(a/o),i*(o/a)];case 8:return[e-n,t-i,n,i];case 9:return[1-t,e-n,i,n];case 10:return[1-e,1-t,n,i];case 11:return[t-i,1-e,i,n];case 12:return[e-i*(o/a),t,i*(o/a),n*(a/o)];case 13:return[1-t-n*(a/o),e-i*(o/a),n*(a/o),i*(o/a)];case 14:return[1-e,1-t-n*(a/o),i*(o/a),n*(a/o)];case 15:return[t,1-e,n*(a/o),i*(o/a)];default:return[e,t,n,i]}}F=pf,o(pf,"_currentDrawId",-1),o(pf,"_currentParent",null);var kf={_:null},Sf={_:null},_f={_:null},Af={_:NaN},Cf={_:null},Mf={_:null},Ef={_:NaN};o(pf,"_INNER_MARGIN",3);var Tf=new WeakMap,Rf=new WeakMap,jf=new WeakMap,Pf=new WeakMap,If=new WeakMap,Lf=new WeakMap,Df=new WeakMap,Ff=new WeakMap,Nf=new WeakMap,Bf=new WeakMap,zf=new WeakMap,Wf=new WeakSet;class Of{constructor(e,t,n,i,r,s){v(this,Wf),b(this,Tf,new Float64Array(6)),b(this,Rf,void 0),b(this,jf,void 0),b(this,Pf,void 0),b(this,If,void 0),b(this,Lf,void 0),b(this,Df,""),b(this,Ff,0),b(this,Nf,new Zf),b(this,Bf,void 0),b(this,zf,void 0),k(Bf,this,n),k(zf,this,i),k(Pf,this,r),k(If,this,s),[e,t]=x(Wf,this,Hf).call(this,e,t);const a=k(Rf,this,[NaN,NaN,NaN,NaN,e,t]);k(Lf,this,[e,t]),k(jf,this,[{line:a,points:w(Lf,this)}]),w(Tf,this).set(a,0)}updateProperty(e,t){"stroke-width"===e&&k(If,this,t)}isEmpty(){return!w(jf,this)||0===w(jf,this).length}isCancellable(){return w(Lf,this).length<=10}add(e,t){[e,t]=x(Wf,this,Hf).call(this,e,t);const[n,i,r,s]=w(Tf,this).subarray(2,6),a=e-r,o=t-s;return Math.hypot(w(Bf,this)*a,w(zf,this)*o)<=2?null:(w(Lf,this).push(e,t),isNaN(n)?(w(Tf,this).set([r,s,e,t],2),w(Rf,this).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(w(Tf,this)[0])&&w(Rf,this).splice(6,6),w(Tf,this).set([n,i,r,s,e,t],0),w(Rf,this).push(...Eu.createBezierPoints(n,i,r,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(2===w(Lf,this).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,r){k(Bf,this,n),k(zf,this,i),k(Pf,this,r),[e,t]=x(Wf,this,Hf).call(this,e,t);const s=k(Rf,this,[NaN,NaN,NaN,NaN,e,t]);k(Lf,this,[e,t]);const a=w(jf,this).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),w(jf,this).push({line:s,points:w(Lf,this)}),w(Tf,this).set(s,0),k(Ff,this,0),this.toSVGPath(),null}getLastElement(){return w(jf,this).at(-1)}setLastElement(e){return w(jf,this)?(w(jf,this).push(e),k(Rf,this,e.line),k(Lf,this,e.points),k(Ff,this,0),{path:{d:this.toSVGPath()}}):w(Nf,this).setLastElement(e)}removeLastElement(){if(!w(jf,this))return w(Nf,this).removeLastElement();w(jf,this).pop(),k(Df,this,"");for(let e=0,t=w(jf,this).length;e<t;e++){const{line:t,points:n}=w(jf,this)[e];k(Rf,this,t),k(Lf,this,n),k(Ff,this,0),this.toSVGPath()}return{path:{d:w(Df,this)}}}toSVGPath(){const e=Eu.svgRound(w(Rf,this)[4]),t=Eu.svgRound(w(Rf,this)[5]);if(2===w(Lf,this).length)return k(Df,this,"".concat(w(Df,this)," M ").concat(e," ").concat(t," Z")),w(Df,this);if(w(Lf,this).length<=6){const n=w(Df,this).lastIndexOf("M");k(Df,this,"".concat(w(Df,this).slice(0,n)," M ").concat(e," ").concat(t)),k(Ff,this,6)}if(4===w(Lf,this).length){const e=Eu.svgRound(w(Rf,this)[10]),t=Eu.svgRound(w(Rf,this)[11]);return k(Df,this,"".concat(w(Df,this)," L ").concat(e," ").concat(t)),k(Ff,this,12),w(Df,this)}const n=[];0===w(Ff,this)&&(n.push("M ".concat(e," ").concat(t)),k(Ff,this,6));for(let i=w(Ff,this),r=w(Rf,this).length;i<r;i+=6){const[e,t,r,s,a,o]=w(Rf,this).slice(i,i+6).map(Eu.svgRound);n.push("C".concat(e," ").concat(t," ").concat(r," ").concat(s," ").concat(a," ").concat(o))}return k(Df,this,w(Df,this)+n.join(" ")),k(Ff,this,w(Rf,this).length),w(Df,this)}getOutlines(e,t,n,i){const r=w(jf,this).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),w(Nf,this).build(w(jf,this),e,t,n,w(Pf,this),w(If,this),i),k(Tf,this,null),k(Rf,this,null),k(jf,this,null),k(Df,this,null),w(Nf,this)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}function Hf(e,t){return Eu._normalizePoint(e,t,w(Bf,this),w(zf,this),w(Pf,this))}var Uf=new WeakMap,Vf=new WeakMap,Gf=new WeakMap,qf=new WeakMap,Yf=new WeakMap,Xf=new WeakMap,Kf=new WeakMap,Qf=new WeakMap,$f=new WeakMap,Jf=new WeakSet;class Zf extends Eu{constructor(){super(...arguments),v(this,Jf),b(this,Uf,void 0),b(this,Vf,0),b(this,Gf,void 0),b(this,qf,void 0),b(this,Yf,void 0),b(this,Xf,void 0),b(this,Kf,void 0),b(this,Qf,void 0),b(this,$f,void 0)}build(e,t,n,i,r,s,a){k(Yf,this,t),k(Xf,this,n),k(Kf,this,i),k(Qf,this,r),k($f,this,s),k(Gf,this,null!==a&&void 0!==a?a:0),k(qf,this,e),x(Jf,this,ng).call(this)}get thickness(){return w($f,this)}setLastElement(e){return w(qf,this).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return w(qf,this).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of w(qf,this))if(e.push("M".concat(Eu.svgRound(t[4])," ").concat(Eu.svgRound(t[5]))),6!==t.length)if(12===t.length&&isNaN(t[6]))e.push("L".concat(Eu.svgRound(t[10])," ").concat(Eu.svgRound(t[11])));else for(let n=6,i=t.length;n<i;n+=6){const[i,r,s,a,o,l]=t.subarray(n,n+6).map(Eu.svgRound);e.push("C".concat(i," ").concat(r," ").concat(s," ").concat(a," ").concat(o," ").concat(l))}else e.push("Z");return e.join("")}serialize(e,t){let[n,i,r,s]=e;const a=[],o=[],[l,c,d,h]=x(Jf,this,tg).call(this);let u,p,f,g,m,v,b,y,k;switch(w(Qf,this)){case 0:k=Eu._rescale,u=n,p=i+s,f=r,g=-s,m=n+l*r,v=i+(1-c-h)*s,b=n+(l+d)*r,y=i+(1-c)*s;break;case 90:k=Eu._rescaleAndSwap,u=n,p=i,f=r,g=s,m=n+c*r,v=i+l*s,b=n+(c+h)*r,y=i+(l+d)*s;break;case 180:k=Eu._rescale,u=n+r,p=i,f=-r,g=s,m=n+(1-l-d)*r,v=i+c*s,b=n+(1-l)*r,y=i+(c+h)*s;break;case 270:k=Eu._rescaleAndSwap,u=n+r,p=i+s,f=-r,g=-s,m=n+(1-c-h)*r,v=i+(1-l-d)*s,b=n+(1-c)*r,y=i+(1-l)*s}for(const{line:x,points:S}of w(qf,this))a.push(k(x,u,p,f,g,t?new Array(x.length):null)),o.push(k(S,u,p,f,g,t?new Array(S.length):null));return{lines:a,points:o,rect:[m,v,b,y]}}static deserialize(e,t,n,i,r,s){let{paths:{lines:a,points:o},rotation:l,thickness:c}=s;const d=[];let h,u,p,f,g;switch(l){case 0:g=Eu._rescale,h=-e/n,u=t/i+1,p=1/n,f=-1/i;break;case 90:g=Eu._rescaleAndSwap,h=-t/i,u=-e/n,p=1/i,f=1/n;break;case 180:g=Eu._rescale,h=e/n+1,u=-t/i,p=-1/n,f=1/i;break;case 270:g=Eu._rescaleAndSwap,h=t/i+1,u=e/n+1,p=-1/i,f=-1/n}if(!a){a=[];for(const e of o){const t=e.length;if(2===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}const n=new Float32Array(3*(t-2));a.push(n);let[i,r,s,o]=e.subarray(0,4);n.set([NaN,NaN,NaN,NaN,i,r],0);for(let a=4;a<t;a+=2){const t=e[a],l=e[a+1];n.set(Eu.createBezierPoints(i,r,s,o,t,l),3*(a-2)),[i,r,s,o]=[s,o,t,l]}}}for(let v=0,b=a.length;v<b;v++)d.push({line:g(a[v].map(e=>null!==e&&void 0!==e?e:NaN),h,u,p,f),points:g(o[v].map(e=>null!==e&&void 0!==e?e:NaN),h,u,p,f)});const m=new this.prototype.constructor;return m.build(d,n,i,1,l,c,r),m}get box(){return w(Uf,this)}updateProperty(e,t){return"stroke-width"===e?x(Jf,this,ig).call(this,t):null}updateParentDimensions(e,t){let[n,i]=e;const[r,s]=x(Jf,this,eg).call(this);k(Yf,this,n),k(Xf,this,i),k(Kf,this,t);const[a,o]=x(Jf,this,eg).call(this),l=a-r,c=o-s,d=w(Uf,this);return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateRotation(e){return k(Vf,this,e),{path:{transform:this.rotationTransform}}}get viewBox(){return w(Uf,this).map(Eu.svgRound).join(" ")}get defaultProperties(){const[e,t]=w(Uf,this);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Eu.svgRound(e)," ").concat(Eu.svgRound(t))}}}get rotationTransform(){const[,,e,t]=w(Uf,this);let n=0,i=0,r=0,s=0,a=0,o=0;switch(w(Vf,this)){case 90:i=t/e,r=-e/t,a=e;break;case 180:n=-1,s=-1,a=e,o=t;break;case 270:i=-t/e,r=e/t,o=t;break;default:return""}return"matrix(".concat(n," ").concat(i," ").concat(r," ").concat(s," ").concat(Eu.svgRound(a)," ").concat(Eu.svgRound(o),")")}getPathResizingSVGProperties(e){let[t,n,i,r]=e;const[s,a]=x(Jf,this,eg).call(this),[o,l,c,d]=w(Uf,this);if(Math.abs(c-s)<=Eu.PRECISION||Math.abs(d-a)<=Eu.PRECISION){const e=t+i/2-(o+c/2),s=n+r/2-(l+d/2);return{path:{"transform-origin":"".concat(Eu.svgRound(t)," ").concat(Eu.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(e," ").concat(s,")")}}}const h=(i-2*s)/(c-2*s),u=(r-2*a)/(d-2*a),p=c/i,f=d/r;return{path:{"transform-origin":"".concat(Eu.svgRound(o)," ").concat(Eu.svgRound(l)),transform:"".concat(this.rotationTransform," scale(").concat(p," ").concat(f,") ")+"translate(".concat(Eu.svgRound(s)," ").concat(Eu.svgRound(a),") scale(").concat(h," ").concat(u,") ")+"translate(".concat(Eu.svgRound(-s)," ").concat(Eu.svgRound(-a),")")}}}getPathResizedSVGProperties(e){let[t,n,i,r]=e;const[s,a]=x(Jf,this,eg).call(this),o=w(Uf,this),[l,c,d,h]=o;if(o[0]=t,o[1]=n,o[2]=i,o[3]=r,Math.abs(d-s)<=Eu.PRECISION||Math.abs(h-a)<=Eu.PRECISION){const e=t+i/2-(l+d/2),s=n+r/2-(c+h/2);for(const{line:t,points:n}of w(qf,this))Eu._translate(t,e,s,t),Eu._translate(n,e,s,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Eu.svgRound(t)," ").concat(Eu.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}const u=(i-2*s)/(d-2*s),p=(r-2*a)/(h-2*a),f=-u*(l+s)+t+s,g=-p*(c+a)+n+a;if(1!==u||1!==p||0!==f||0!==g)for(const{line:m,points:v}of w(qf,this))Eu._rescale(m,f,g,u,p,m),Eu._rescale(v,f,g,u,p,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Eu.svgRound(t)," ").concat(Eu.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[n,i]=e;const[r,s]=t,a=w(Uf,this),o=n-a[0],l=i-a[1];if(w(Yf,this)===r&&w(Xf,this)===s)for(const{line:c,points:d}of w(qf,this))Eu._translate(c,o,l,c),Eu._translate(d,o,l,d);else{const e=w(Yf,this)/r,t=w(Xf,this)/s;k(Yf,this,r),k(Xf,this,s);for(const{line:n,points:i}of w(qf,this))Eu._rescale(n,o,l,e,t,n),Eu._rescale(i,o,l,e,t,i);a[2]*=e,a[3]*=t}return a[0]=n,a[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(Eu.svgRound(n)," ").concat(Eu.svgRound(i))}}}get defaultSVGProperties(){const e=w(Uf,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(Eu.svgRound(e[0])," ").concat(Eu.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}}function eg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w($f,this);const t=w(Gf,this)+e/2*w(Kf,this);return w(Qf,this)%180===0?[t/w(Yf,this),t/w(Xf,this)]:[t/w(Xf,this),t/w(Yf,this)]}function tg(){const[e,t,n,i]=w(Uf,this),[r,s]=x(Jf,this,eg).call(this,0);return[e+r,t+s,n-2*r,i-2*s]}function ng(){const e=k(Uf,this,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of w(qf,this)){if(i.length<=12){for(let t=4,n=i.length;t<n;t+=6)We.pointBoundingBox(i[t],i[t+1],e);continue}let t=i[4],n=i[5];for(let r=6,s=i.length;r<s;r+=6){const[s,a,o,l,c,d]=i.subarray(r,r+6);We.bezierBoundingBox(t,n,s,a,o,l,c,d,e),t=c,n=d}}const[t,n]=x(Jf,this,eg).call(this);e[0]=Ye(e[0]-t,0,1),e[1]=Ye(e[1]-n,0,1),e[2]=Ye(e[2]+t,0,1),e[3]=Ye(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}function ig(e){const[t,n]=x(Jf,this,eg).call(this);k($f,this,e);const[i,r]=x(Jf,this,eg).call(this),[s,a]=[i-t,r-n],o=w(Uf,this);return o[0]-=s,o[1]-=a,o[2]+=2*s,o[3]+=2*a,o}class rg extends cf{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Lr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){"stroke-width"===e&&(null!==t&&void 0!==t||(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new rg(this._viewParameters);return e.updateAll(this),e}}var sg=new WeakSet;class ag extends pf{constructor(e){super(c(c({},e),{},{name:"inkEditor"})),v(this,sg),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Lr.initialize(e,t),this._defaultDrawingOptions=new rg(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ee(this,"typesMap",new Map([[Z.INK_THICKNESS,"stroke-width"],[Z.INK_COLOR,"stroke"],[Z.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,i,r){return new Of(e,t,n,i,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,i,r,s){return Zf.deserialize(e,t,n,i,r,s)}static async deserialize(e,t,n){let i=null;if(e instanceof qh){const{data:{inkLists:t,rect:n,rotation:r,id:s,color:a,opacity:o,borderStyle:{rawWidth:l},popupRef:c,contentsObj:d},parent:{page:{pageNumber:h}}}=e;i=e={annotationType:J.INK,color:Array.from(a),thickness:l,opacity:o,paths:{points:t},boxes:null,pageIndex:h-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:c,comment:(null===d||void 0===d?void 0:d.str)||null}}const r=await super.deserialize(e,t,n);return r._initialData=i,e.comment&&r.setCommentData(e.comment),r}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new md(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Z.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:n,opacity:i}=e;this._drawingOptions=ag.getDefaultDrawingOptions({stroke:We.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n,rect:i}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":s,"stroke-width":a}}=this,o={annotationType:J.INK,color:Lr._colorManager.convert(r),opacity:s,thickness:a,paths:{lines:t,points:n},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),e?(o.isCopy=!0,o):this.annotationElementId&&!x(sg,this,og).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1),i={rect:n,thickness:this._drawingOptions["stroke-width"],points:t};return this.hasEditedComment&&(i.popup=this.comment),e.updateEdited(i),null}}function og(e){const{color:t,thickness:n,opacity:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((e,n)=>e!==t[n])||e.thickness!==n||e.opacity!==i||e.pageIndex!==r}o(ag,"_type","ink"),o(ag,"_editorType",J.INK),o(ag,"_defaultDrawingOptions",null);class lg extends Zf{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}class cg{static extractContoursFromText(e,t,n,i,r,s){let{fontFamily:a,fontStyle:o,fontWeight:l}=t,c=new OffscreenCanvas(1,1),d=c.getContext("2d",{alpha:!1});const h=d.font="".concat(o," ").concat(l," ").concat(200,"px ").concat(a),{actualBoundingBoxLeft:u,actualBoundingBoxRight:p,actualBoundingBoxAscent:f,actualBoundingBoxDescent:g,fontBoundingBoxAscent:m,fontBoundingBoxDescent:v,width:b}=d.measureText(e),y=1.5,w=Math.ceil(Math.max(Math.abs(u)+Math.abs(p)||0,b)*y),k=Math.ceil(Math.max(Math.abs(f)+Math.abs(g)||200,Math.abs(m)+Math.abs(v)||200)*y);c=new OffscreenCanvas(w,k),d=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=h,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,w,k),d.fillStyle="black",d.fillText(e,.5*w/2,1.5*k/2);const S=x(cg,this,bg).call(this,d.getImageData(0,0,w,k).data),_=x(cg,this,vg).call(this,S),A=x(cg,this,xg).call(this,_),C=x(cg,this,pg).call(this,S,w,k,A);return this.processDrawnLines({lines:{curves:C,width:w,height:k},pageWidth:n,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,r){const[s,a,o]=x(cg,this,yg).call(this,e),[l,c]=x(cg,this,mg).call(this,s,a,o,Math.hypot(a,o)*x(cg,this,wg)._.sigmaSFactor,x(cg,this,wg)._.sigmaR,x(cg,this,wg)._.kernelSize),d=x(cg,this,xg).call(this,c),h=x(cg,this,pg).call(this,l,a,o,d);return this.processDrawnLines({lines:{curves:h,width:a,height:o},pageWidth:t,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines(e){var t;let{lines:n,pageWidth:i,pageHeight:r,rotation:s,innerMargin:a,mustSmooth:o,areContours:l}=e;s%180!==0&&([i,r]=[r,i]);const{curves:c,width:d,height:h}=n,u=null!==(t=n.thickness)&&void 0!==t?t:0,p=[],f=Math.min(i/d,r/h),g=f/i,m=f/r,v=[];for(const{points:y}of c){const e=o?x(cg,this,gg).call(this,y):y;if(!e)continue;v.push(e);const t=e.length,n=new Float32Array(t),i=new Float32Array(3*(2===t?2:t-2));if(p.push({line:i,points:n}),2===t){n[0]=e[0]*g,n[1]=e[1]*m,i.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[r,s,a,l]=e;r*=g,s*=m,a*=g,l*=m,n.set([r,s,a,l],0),i.set([NaN,NaN,NaN,NaN,r,s],0);for(let o=4;o<t;o+=2){const t=n[o]=e[o]*g,c=n[o+1]=e[o+1]*m;i.set(Eu.createBezierPoints(r,s,a,l,t,c),3*(o-2)),[r,s,a,l]=[a,l,t,c]}}if(0===p.length)return null;const b=l?new lg:new Zf;return b.build(p,i,r,1,s,l?0:u,a),{outline:b,newCurves:v,areContours:l,thickness:u,width:d,height:h}}static async compressSignature(e){let t,{outlines:n,areContours:i,thickness:r,width:s,height:a}=e,o=1/0,l=-1/0,c=0;for(const b of n){c+=b.length;for(let e=2,t=b.length;e<t;e++){const t=b[e]-b[e-2];o=Math.min(o,t),l=Math.max(l,t)}}t=o>=-128&&l<=127?Int8Array:o>=-32768&&l<=32767?Int16Array:Int32Array;const d=n.length,h=8+3*d,u=new Uint32Array(h);let p=0;u[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*t.BYTES_PER_ELEMENT,u[p++]=0,u[p++]=s,u[p++]=a,u[p++]=i?0:1,u[p++]=Math.max(0,Math.floor(null!==r&&void 0!==r?r:0)),u[p++]=d,u[p++]=t.BYTES_PER_ELEMENT;for(const b of n)u[p++]=b.length-2,u[p++]=b[0],u[p++]=b[1];const f=new CompressionStream("deflate-raw"),g=f.writable.getWriter();await g.ready,g.write(u);const m=t.prototype.constructor;for(const b of n){const e=new m(b.length-2);for(let t=2,n=b.length;t<n;t++)e[t-2]=b[t]-b[t-2];g.write(e)}g.close();const v=await new Response(f.readable).arrayBuffer();return Xe(new Uint8Array(v))}static async decompressSignature(e){try{const l=(a=e,Uint8Array.fromBase64?Uint8Array.fromBase64(a):Ne(atob(a))),{readable:c,writable:d}=new DecompressionStream("deflate-raw"),h=d.getWriter();await h.ready,h.write(l).then(async()=>{await h.ready,await h.close()}).catch(()=>{});let u=null,p=0;var t,n=!1,i=!1;try{for(var r,s=function(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new S(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(c);n=!(r=await s.next()).done;n=!1){const e=r.value;u||(u=new Uint8Array(new Uint32Array(e.buffer,0,4)[0])),u.set(e,p),p+=e.length}}catch(o){i=!0,t=o}finally{try{n&&null!=s.return&&await s.return()}finally{if(i)throw t}}const f=new Uint32Array(u.buffer,0,u.length>>2),g=f[1];if(0!==g)throw new Error("Invalid version: ".concat(g));const m=f[2],v=f[3],b=0===f[4],x=f[5],y=f[6],w=f[7],k=[],_=(8+3*y)*Uint32Array.BYTES_PER_ELEMENT;let A;switch(w){case Int8Array.BYTES_PER_ELEMENT:A=new Int8Array(u.buffer,_);break;case Int16Array.BYTES_PER_ELEMENT:A=new Int16Array(u.buffer,_);break;case Int32Array.BYTES_PER_ELEMENT:A=new Int32Array(u.buffer,_)}p=0;for(let e=0;e<y;e++){const t=f[3*e+8],n=new Float32Array(t+2);k.push(n);for(let i=0;i<2;i++)n[i]=f[3*e+8+i+1];for(let e=0;e<t;e++)n[e+2]=n[e]+A[p++]}return{areContours:b,thickness:x,outlines:k,width:m,height:v}}catch(l){return Se("decompressSignature: ".concat(l)),null}var a}}function dg(e,t,n,i){return i-=t,0===(n-=e)?i>0?0:4:1===n?i+6:2-i}function hg(e,t,n,i,r,s,a){const o=x(N,this,dg).call(this,n,i,r,s);for(let l=0;l<8;l++){const r=(-l+o-a+16)%8;if(0!==e[(n+x(N,this,kg)._[2*r])*t+(i+x(N,this,kg)._[2*r+1])])return r}return-1}function ug(e,t,n,i,r,s,a){const o=x(N,this,dg).call(this,n,i,r,s);for(let l=0;l<8;l++){const r=(l+o+a+16)%8;if(0!==e[(n+x(N,this,kg)._[2*r])*t+(i+x(N,this,kg)._[2*r+1])])return r}return-1}function pg(e,t,n,i){const r=e.length,s=new Int32Array(r);for(let c=0;c<r;c++)s[c]=e[c]<=i?1:0;for(let c=1;c<n-1;c++)s[c*t]=s[c*t+t-1]=0;for(let c=0;c<t;c++)s[c]=s[t*n-1-c]=0;let a,o=1;const l=[];for(let c=1;c<n-1;c++){a=1;for(let e=1;e<t-1;e++){const n=c*t+e,i=s[n];if(0===i)continue;let r=c,d=e;if(1===i&&0===s[n-1])o+=1,d-=1;else{if(!(i>=1&&0===s[n+1])){1!==i&&(a=Math.abs(i));continue}o+=1,d+=1,i>1&&(a=i)}const h=[e,c],u=d===e+1,p={isHole:u,points:h,id:o,parent:0};let f;l.push(p);for(const e of l)if(e.id===a){f=e;break}f?f.isHole?p.parent=u?f.parent:a:p.parent=u?a:f.parent:p.parent=u?a:0;const g=x(N,this,hg).call(this,s,t,c,e,r,d,0);if(-1===g){s[n]=-o,1!==s[n]&&(a=Math.abs(s[n]));continue}let m=x(N,this,kg)._[2*g],v=x(N,this,kg)._[2*g+1];const b=c+m,y=e+v;r=b,d=y;let w=c,k=e;for(;;){const i=x(N,this,ug).call(this,s,t,w,k,r,d,1);m=x(N,this,kg)._[2*i],v=x(N,this,kg)._[2*i+1];const l=w+m,u=k+v;h.push(u,l);const p=w*t+k;if(0===s[p+1]?s[p]=-o:1===s[p]&&(s[p]=o),l===c&&u===e&&w===b&&k===y){1!==s[n]&&(a=Math.abs(s[n]));break}r=w,d=k,w=l,k=u}}}return l}function fg(e,t,n,i){if(n-t<=4){for(let r=t;r<n-2;r+=2)i.push(e[r],e[r+1]);return}const r=e[t],s=e[t+1],a=e[n-4]-r,o=e[n-3]-s,l=Math.hypot(a,o),c=a/l,d=o/l,h=c*s-d*r,u=o/a,p=1/l,f=Math.atan(u),g=Math.cos(f),m=Math.sin(f),v=p*(Math.abs(g)+Math.abs(m)),b=p*(1-v+v**2),y=Math.max(Math.atan(Math.abs(m+g)*b),Math.atan(Math.abs(m-g)*b));let w=0,k=t;for(let x=t+2;x<n-2;x+=2){const t=Math.abs(h-c*e[x+1]+d*e[x]);t>w&&(k=x,w=t)}w>(l*y)**2?(x(N,this,fg).call(this,e,t,k+2,i),x(N,this,fg).call(this,e,k,n,i)):i.push(r,s)}function gg(e){const t=[],n=e.length;return x(N,this,fg).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}function mg(e,t,n,i,r,s){const a=new Float32Array(s**2),o=-2*i**2,l=s>>1;for(let f=0;f<s;f++){const e=(f-l)**2;for(let t=0;t<s;t++)a[f*s+t]=Math.exp((e+(t-l)**2)/o)}const c=new Float32Array(256),d=-2*r**2;for(let f=0;f<256;f++)c[f]=Math.exp(f**2/d);const h=e.length,u=new Uint8Array(h),p=new Uint32Array(256);for(let f=0;f<n;f++)for(let i=0;i<t;i++){const r=f*t+i,o=e[r];let d=0,h=0;for(let u=0;u<s;u++){const r=f+u-l;if(!(r<0||r>=n))for(let n=0;n<s;n++){const p=i+n-l;if(p<0||p>=t)continue;const f=e[r*t+p],g=a[u*s+n]*c[Math.abs(f-o)];d+=f*g,h+=g}}p[u[r]=Math.round(d/h)]++}return[u,p]}function vg(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}function bg(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,r=1/0;for(let a=0,o=n.length;a<o;a++){const t=n[a]=e[a<<2];i=Math.max(i,t),r=Math.min(r,t)}const s=255/(i-r);for(let a=0,o=n.length;a<o;a++)n[a]=(n[a]-r)*s;return n}function xg(e){let t,n=-1/0,i=-1/0;const r=e.findIndex(e=>0!==e);let s=r,a=r;for(t=r;t<256;t++){const r=e[t];r>n&&(t-s>i&&(i=t-s,a=t-1),n=r,s=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t}function yg(e){const t=e,{width:n,height:i}=e,{maxDim:r}=x(N,this,wg)._;let s=n,a=i;if(n>r||i>r){let o=n,l=i,c=Math.log2(Math.max(n,i)/r);const d=Math.floor(c);c=c===d?d-1:d;for(let n=0;n<c;n++){s=Math.ceil(o/2),a=Math.ceil(l/2);const n=new OffscreenCanvas(s,a);n.getContext("2d").drawImage(e,0,0,o,l,0,0,s,a),o=s,l=a,e!==t&&e.close(),e=n.transferToImageBitmap()}const h=Math.min(r/s,r/a);s=Math.round(s*h),a=Math.round(a*h)}const o=new OffscreenCanvas(s,a).getContext("2d",{willReadFrequently:!0});o.fillStyle="white",o.fillRect(0,0,s,a),o.filter="grayscale(1)",o.drawImage(e,0,0,e.width,e.height,0,0,s,a);const l=o.getImageData(0,0,s,a).data;return[x(N,this,bg).call(this,l),s,a]}N=cg;var wg={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},kg={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};class Sg extends cf{constructor(){super(),super.updateProperties({fill:Lr._defaultLineColor,"stroke-width":0})}clone(){const e=new Sg;return e.updateAll(this),e}}class _g extends rg{constructor(e){super(e),super.updateProperties({stroke:Lr._defaultLineColor,"stroke-width":1})}clone(){const e=new _g(this._viewParameters);return e.updateAll(this),e}}var Ag=new WeakMap,Cg=new WeakMap,Mg=new WeakMap,Eg=new WeakMap;class Tg extends pf{constructor(e){super(c(c({},e),{},{mustBeCommitted:!0,name:"signatureEditor"})),b(this,Ag,!1),b(this,Cg,null),b(this,Mg,null),b(this,Eg,null),this._willKeepAspectRatio=!0,k(Mg,this,e.signatureData||null),k(Cg,this,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Lr.initialize(e,t),this._defaultDrawingOptions=new Sg,this._defaultDrawnSignatureOptions=new _g(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ee(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!w(Cg,this)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasDescription");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),null===this._drawId)if(w(Mg,this)){const{lines:e,mustSmooth:t,areContours:n,description:i,uuid:r,heightInPage:s}=w(Mg,this),{rawDims:{pageWidth:a,pageHeight:o},rotation:l}=this.parent.viewport,c=cg.processDrawnLines({lines:e,pageWidth:a,pageHeight:o,rotation:l,innerMargin:Tg._INNER_MARGIN,mustSmooth:t,areContours:n});this.addSignature(c,s,i,r)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:w(Cg,this)||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){k(Eg,this,e),this.addEditToolbar()}getUuid(){return w(Eg,this)}get description(){return w(Cg,this)}set description(e){k(Cg,this,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{null===t||void 0===t||t.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:i,height:r}=w(Mg,this),s=Math.max(i,r);return{areContours:t,outline:cg.processDrawnLines({lines:{curves:e.map(e=>({points:e})),thickness:n,width:i,height:r},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,i){const{x:r,y:s}=this,{outline:a}=k(Mg,this,e);let o;k(Ag,this,a instanceof lg),this.description=n,w(Ag,this)?o=Tg.getDefaultDrawingOptions():(o=Tg._defaultDrawnSignatureOptions.clone(),o.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:o});const[l,c]=this.parentDimensions,[,d]=this.pageDimensions;let h=t/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(l*this.width,c*this.height),this.x=r,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return cg.process(e,t,n,i,Tg._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return cg.extractContoursFromText(e,t,n,i,r,Tg._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return cg.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:Tg._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions(e){let{areContours:t,thickness:n}=e;t?this._drawingOptions=Tg.getDefaultDrawingOptions():(this._drawingOptions=Tg._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;const{lines:t,points:n,rect:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,s={annotationType:J.SIGNATURE,isSignature:!0,areContours:w(Ag,this),color:[0,0,0],thickness:w(Ag,this)?0:r,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(s),e?(s.paths={lines:t,points:n},s.uuid=w(Eg,this),s.isCopy=!0):s.lines=t,w(Cg,this)&&(s.accessibilityData={type:"Figure",alt:w(Cg,this)}),s}static deserializeDraw(e,t,n,i,r,s){return s.areContours?lg.deserialize(e,t,n,i,r,s):Zf.deserialize(e,t,n,i,r,s)}static async deserialize(e,t,n){var i;const r=await super.deserialize(e,t,n);return k(Ag,r,e.areContours),r.description=(null===(i=e.accessibilityData)||void 0===i?void 0:i.alt)||"",k(Eg,r,e.uuid),r}}o(Tg,"_type","signature"),o(Tg,"_editorType",J.SIGNATURE),o(Tg,"_defaultDrawingOptions",null);var Rg=new WeakMap,jg=new WeakMap,Pg=new WeakMap,Ig=new WeakMap,Lg=new WeakMap,Dg=new WeakMap,Fg=new WeakMap,Ng=new WeakMap,Bg=new WeakMap,zg=new WeakMap,Wg=new WeakMap,Og=new WeakSet;class Hg extends Lr{constructor(e){super(c(c({},e),{},{name:"stampEditor"})),v(this,Og),b(this,Rg,null),b(this,jg,null),b(this,Pg,null),b(this,Ig,null),b(this,Lg,null),b(this,Dg,""),b(this,Fg,null),b(this,Ng,!1),b(this,Bg,null),b(this,zg,!1),b(this,Wg,!1),k(Ig,this,e.bitmapUrl),k(Lg,this,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Lr.initialize(e,t)}static isHandlingMimeForPasting(e){return pt.includes(e)}static paste(e,t){t.pasteEditor({mode:J.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!(null===(e=this.altTextData)||void 0===e||!e.altText)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasAltText");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:r,height:s}=e||this.copyCanvas(null,null,!0).imageData,a=await n.guess({name:"altText",request:{data:i,width:r,height:s,channels:i.length/(r*s)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),t&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var e;w(jg,this)&&(k(Rg,this,null),this._uiManager.imageManager.deleteId(w(jg,this)),null===(e=w(Fg,this))||void 0===e||e.remove(),k(Fg,this,null),w(Bg,this)&&(clearTimeout(w(Bg,this)),k(Bg,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(w(jg,this)&&null===w(Fg,this)&&x(Og,this,Gg).call(this),this.isAttachedToDOM||this.parent.add(this))):w(jg,this)&&x(Og,this,Gg).call(this)}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(w(Pg,this)||w(Rg,this)||w(Ig,this)||w(Lg,this)||w(jg,this)||w(Ng,this))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),w(Ng,this)||(w(Rg,this)?x(Og,this,qg).call(this):x(Og,this,Gg).call(this)),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(k(jg,this,n),i&&k(Rg,this,i),k(Ng,this,!1),x(Og,this,qg).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==w(Bg,this)&&clearTimeout(w(Bg,this));k(Bg,this,setTimeout(()=>{k(Bg,this,null),x(Og,this,Xg).call(this)},200))}copyCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);const{width:i,height:r}=w(Rg,this),s=new ut;let a=w(Rg,this),o=i,l=r,c=null;if(t){var d,h;if(i>t||r>t){const e=Math.min(t/i,t/r);o=Math.floor(i*e),l=Math.floor(r*e)}c=document.createElement("canvas");const e=c.width=Math.ceil(o*s.sx),n=c.height=Math.ceil(l*s.sy);w(zg,this)||(a=x(Og,this,Yg).call(this,e,n));const u=c.getContext("2d");u.filter=this._uiManager.hcmFilter;let p="white",f="#cfcfd8";"none"!==this._uiManager.hcmFilter?f="black":null!==(d=(h=window).matchMedia)&&void 0!==d&&d.call(h,"(prefers-color-scheme: dark)").matches&&(p="#8f8f9d",f="#42414d");const g=15,m=g*s.sx,v=g*s.sy,b=new OffscreenCanvas(2*m,2*v),y=b.getContext("2d");y.fillStyle=p,y.fillRect(0,0,2*m,2*v),y.fillStyle=f,y.fillRect(0,0,m,v),y.fillRect(m,v,m,v),u.fillStyle=u.createPattern(b,"repeat"),u.fillRect(0,0,e,n),u.drawImage(a,0,0,a.width,a.height,0,0,e,n)}let u=null;if(n){let t,n;if(s.symmetric&&a.width<e&&a.height<e)t=a.width,n=a.height;else if(a=w(Rg,this),i>e||r>e){const s=Math.min(e/i,e/r);t=Math.floor(i*s),n=Math.floor(r*s),w(zg,this)||(a=x(Og,this,Yg).call(this,t,n))}const o=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});o.drawImage(a,0,0,a.width,a.height,0,0,t,n),u={width:t,height:n,data:o.getImageData(0,0,t,n).data}}return{canvas:c,width:o,height:l,imageData:u}}static async deserialize(e,t,n){let i=null,r=!1;if(e instanceof Jh){var s;const{data:{rect:a,rotation:o,id:l,structParent:c,popupRef:d,contentsObj:h},container:u,parent:{page:{pageNumber:p}},canvas:f}=e;let g,m;f?(delete e.canvas,({id:g,bitmap:m}=n.imageManager.getFromCanvas(u.id,f)),f.remove()):(r=!0,e._hasNoCanvas=!0);const v=(null===(s=await t._structTree.getAriaAttributes("".concat(qe).concat(l)))||void 0===s?void 0:s.get("aria-label"))||"";i=e={annotationType:J.STAMP,bitmapId:g,bitmap:m,pageIndex:p-1,rect:a.slice(0),rotation:o,annotationElementId:l,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:v},isSvg:!1,structParent:c,popupRef:d,comment:(null===h||void 0===h?void 0:h.str)||null}}const a=await super.deserialize(e,t,n),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:d,isSvg:h,accessibilityData:u}=e;r?(n.addMissingCanvas(e.id,a),k(Ng,a,!0)):d&&n.imageManager.isValidId(d)?(k(jg,a,d),l&&k(Rg,a,l)):k(Ig,a,c),k(zg,a,h);const[p,f]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/f,u&&(a.altTextData=u),a._initialData=i,e.comment&&a.setCommentData(e.comment),k(Wg,a,!!i),a}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:J.STAMP,bitmapId:w(jg,this),pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,isSvg:w(zg,this),structTreeParentId:this._structTreeParentId};if(this.addComment(n),e)return n.bitmapUrl=x(Og,this,Kg).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:r}=this.serializeAltText(!1);if(!i&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const e=x(Og,this,Qg).call(this,n);if(e.isSame)return null;var s;if(e.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(s=this._initialData.structParent)&&void 0!==s?s:-1}if(n.id=this.annotationElementId,null===t)return n;t.stamps||(t.stamps=new Map);const a=w(zg,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(w(jg,this))){if(w(zg,this)){const e=t.stamps.get(w(jg,this));a>e.area&&(e.area=a,e.serialized.bitmap.close(),e.serialized.bitmap=x(Og,this,Kg).call(this,!1))}}else t.stamps.set(w(jg,this),{area:a,serialized:n}),n.bitmap=x(Og,this,Kg).call(this,!1);return n}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const t={rect:this.getPDFRect()};return this.hasEditedComment&&(t.popup=this.comment),e.updateEdited(t),null}}function Ug(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(k(Rg,this,e.bitmap),t||(k(jg,this,e.id),k(zg,this,e.isSvg)),e.file&&k(Dg,this,e.file.name),x(Og,this,qg).call(this)):this.remove()}function Vg(){if(k(Pg,this,null),this._uiManager.enableWaiting(!1),w(Fg,this))if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&w(Rg,this))this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});else{if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&w(Rg,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function Gg(){if(w(jg,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(w(jg,this)).then(e=>x(Og,this,Ug).call(this,e,!0)).finally(()=>x(Og,this,Vg).call(this));if(w(Ig,this)){const e=w(Ig,this);return k(Ig,this,null),this._uiManager.enableWaiting(!0),void k(Pg,this,this._uiManager.imageManager.getFromUrl(e).then(e=>x(Og,this,Ug).call(this,e)).finally(()=>x(Og,this,Vg).call(this)))}if(w(Lg,this)){const e=w(Lg,this);return k(Lg,this,null),this._uiManager.enableWaiting(!0),void k(Pg,this,this._uiManager.imageManager.getFromFile(e).then(e=>x(Og,this,Ug).call(this,e)).finally(()=>x(Og,this,Vg).call(this)))}const e=document.createElement("input");e.type="file",e.accept=pt.join(",");const t=this._uiManager._signal;k(Pg,this,new Promise(n=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),x(Og,this,Ug).call(this,t)}else this.remove();n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>x(Og,this,Vg).call(this))),e.click()}function qg(){var e;const{div:t}=this;let{width:n,height:i}=w(Rg,this);const[r,s]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,i=this.height*s;else if(n>a*r||i>a*s){const e=Math.min(a*r/n,a*s/i);n*=e,i*=e}const[o,l]=this.parentDimensions;this.setDims(n*o/r,i*l/s),this._uiManager.enableWaiting(!1);const c=k(Fg,this,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=n/r,this.height=i/s,null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),x(Og,this,Xg).call(this),w(Wg,this)||(this.parent.addUndoableEditor(this),k(Wg,this,!0)),this._reportTelemetry({action:"inserted_image"}),w(Dg,this)&&this.div.setAttribute("aria-description",w(Dg,this)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}function Yg(e,t){const{width:n,height:i}=w(Rg,this);let r=n,s=i,a=w(Rg,this);for(;r>2*e||s>2*t;){const n=r,i=s;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const o=new OffscreenCanvas(r,s);o.getContext("2d").drawImage(a,0,0,n,i,0,0,r,s),a=o.transferToImageBitmap()}return a}function Xg(){const[e,t]=this.parentDimensions,{width:n,height:i}=this,r=new ut,s=Math.ceil(n*e*r.sx),a=Math.ceil(i*t*r.sy),o=w(Fg,this);if(!o||o.width===s&&o.height===a)return;o.width=s,o.height=a;const l=w(zg,this)?w(Rg,this):x(Og,this,Yg).call(this,s,a),c=o.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,s,a)}function Kg(e){if(e){if(w(zg,this)){const e=this._uiManager.imageManager.getSvgUrl(w(jg,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=w(Rg,this));return e.getContext("2d").drawImage(w(Rg,this),0,0),e.toDataURL()}if(w(zg,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*Qe.PDF_TO_CSS_UNITS),i=Math.round(this.height*t*Qe.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(n,i);return r.getContext("2d").drawImage(w(Rg,this),0,0,w(Rg,this).width,w(Rg,this).height,0,0,n,i),r.transferToImageBitmap()}return structuredClone(w(Rg,this))}function Qg(e){var t;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===n,s=((null===(t=e.accessibilityData)||void 0===t?void 0:t.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&s,isSameAltText:s}}o(Hg,"_type","stamp"),o(Hg,"_editorType",J.STAMP);var $g=new WeakMap,Jg=new WeakMap,Zg=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=new WeakMap,im=new WeakMap,rm=new WeakMap,sm=new WeakMap,am=new WeakMap,om=new WeakMap,lm=new WeakMap,cm=new WeakMap,dm=new WeakMap,hm=new WeakMap,um=new WeakMap,pm=new WeakSet;class fm{constructor(e){let{uiManager:t,pageIndex:n,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:d}=e;v(this,pm),b(this,$g,void 0),b(this,Jg,!1),b(this,Zg,null),b(this,em,null),b(this,tm,null),b(this,nm,new Map),b(this,im,!1),b(this,rm,!1),b(this,sm,!1),b(this,am,null),b(this,om,null),b(this,lm,null),b(this,cm,null),b(this,dm,null),b(this,hm,-1),b(this,um,void 0);const h=[...ym._.values()];if(!fm._initialized){fm._initialized=!0;for(const e of h)e.initialize(d,t)}t.registerEditorTypes(h),k(um,this,t),this.pageIndex=n,this.div=i,k($g,this,s),k(Zg,this,a),this.viewport=c,k(lm,this,l),this.drawLayer=o,this._structTree=r,w(um,this).addLayer(this)}get isEmpty(){return 0===w(nm,this).size}get isInvisible(){return this.isEmpty&&w(um,this).getMode()===J.NONE}updateToolbar(e){w(um,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w(um,this).getMode();switch(x(pm,this,xm).call(this),e){case J.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case J.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case J.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of ym._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=w(lm,this))||void 0===t?void 0:t.div)}setEditingState(e){w(um,this).setEditingState(e)}addCommands(e){w(um,this).addCommands(e)}cleanUndoStack(e){w(um,this).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=w(Zg,this))||void 0===e||e.div.classList.toggle("disabled",!t)}async enable(){var e;k(sm,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),null===(e=w(dm,this))||void 0===e||e.abort(),k(dm,this,null);const t=new Set;for(const i of w(nm,this).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(w(um,this).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!w(Zg,this))return void k(sm,this,!1);const n=w(Zg,this).getEditableAnnotations();for(const i of n){if(i.hide(),w(um,this).isDeletedAnnotationElement(i.data.id))continue;if(t.has(i.data.id))continue;const e=await this.deserialize(i);e&&(this.addOrRebuild(e),e.enableEditing())}k(sm,this,!1)}disable(){if(k(rm,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),w(lm,this)&&!w(dm,this)){k(dm,this,new AbortController);const e=w(um,this).combinedSignal(w(dm,this));w(lm,this).div.addEventListener("pointerdown",e=>{const{clientX:t,clientY:n,timeStamp:i}=e;if(i-w(hm,this)>500)return void k(hm,this,i);k(hm,this,-1);const{classList:r}=this.div;r.toggle("getElements",!0);const s=document.elementsFromPoint(t,n);if(r.toggle("getElements",!1),!this.div.contains(s[0]))return;let a;const o=new RegExp("^".concat($,"[0-9]+$"));for(const c of s)if(o.test(c.id)){a=c.id;break}if(!a)return;const l=w(nm,this).get(a);null===(null===l||void 0===l?void 0:l.annotationElementId)&&(e.stopPropagation(),e.preventDefault(),l.dblclick())},{signal:e,capture:!0})}const e=new Map,t=new Map;for(const r of w(nm,this).values()){var n;r.disableEditing(),r.annotationElementId&&(null===r.serialize()?(t.set(r.annotationElementId,r),null===(n=this.getEditableAnnotation(r.annotationElementId))||void 0===n||n.show(),r.remove()):e.set(r.annotationElementId,r))}if(w(Zg,this)){const n=w(Zg,this).getEditableAnnotations();for(const i of n){const{id:n}=i.data;if(w(um,this).isDeletedAnnotationElement(n)){i.updateEdited({deleted:!0});continue}let r=t.get(n);r?(r.resetAnnotationElement(i),r.show(!1),i.show()):(r=e.get(n),r&&(w(um,this).addChangedExistingAnnotation(r),r.renderAnnotationElement(i)&&r.show(!1)),i.show())}}x(pm,this,xm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of ym._.values())i.remove("".concat(r._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),k(rm,this,!1)}getEditableAnnotation(e){var t;return(null===(t=w(Zg,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){w(um,this).getActive()!==e&&w(um,this).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,null!==(e=w(lm,this))&&void 0!==e&&e.div&&!w(cm,this)){k(cm,this,new AbortController);const e=w(um,this).combinedSignal(w(cm,this));w(lm,this).div.addEventListener("pointerdown",x(pm,this,gm).bind(this),{signal:e}),w(lm,this).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=w(lm,this))&&void 0!==e&&e.div&&w(cm,this)&&(w(cm,this).abort(),k(cm,this,null),w(lm,this).div.classList.remove("highlighting"))}enableClick(){if(w(em,this))return;k(em,this,new AbortController);const e=w(um,this).combinedSignal(w(em,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null===(e=w(em,this))||void 0===e||e.abort(),k(em,this,null)}attach(e){w(nm,this).set(e.id,e);const{annotationElementId:t}=e;t&&w(um,this).isDeletedAnnotationElement(t)&&w(um,this).removeDeletedAnnotationElement(e)}detach(e){var t;w(nm,this).delete(e.id),null===(t=w($g,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!w(rm,this)&&e.annotationElementId&&w(um,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),w(um,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(w(um,this).addDeletedAnnotationElement(e.annotationElementId),Lr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),w(um,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!w(sm,this)),w(um,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!w(tm,this)&&(e._focusEventsAllowed=!1,k(tm,this,setTimeout(()=>{k(tm,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:w(um,this)._signal}),n.focus())},0))),e._structTreeParentId=null===(t=w($g,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return w(um,this).getId()}combinedSignal(e){return w(um,this).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null===(e=y(pm,this,mm))||void 0===e?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await w(um,this).updateMode(e.mode);const{offsetX:n,offsetY:i}=x(pm,this,bm).call(this),r=this.getNextId(),s=x(pm,this,vm).call(this,c({parent:this,id:r,x:n,y:i,uiManager:w(um,this),isCentered:!0},t));s&&this.add(s)}async deserialize(e){var t,n;return await(null===(t=ym._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,w(um,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getNextId(),r=x(pm,this,vm).call(this,c({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:w(um,this),isCentered:t},n));return r&&this.add(r),r}addNewEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(x(pm,this,bm).call(this),!0,e)}setSelected(e){w(um,this).setSelected(e)}toggleSelected(e){w(um,this).toggleSelected(e)}unselect(e){w(um,this).unselect(e)}pointerup(e){var t;const{isMac:n}=Be.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(!w(im,this))return;if(k(im,this,!1),null!==(t=y(pm,this,mm))&&void 0!==t&&t.isDrawer&&y(pm,this,mm).supportMultipleDrawings)return;if(!w(Jg,this))return void k(Jg,this,!0);const i=w(um,this).getMode();i!==J.STAMP&&i!==J.SIGNATURE?this.createAndAddNewEditor(e,!1):w(um,this).unselectAll()}pointerdown(e){var t;if(w(um,this).getMode()===J.HIGHLIGHT&&this.enableTextSelection(),w(im,this))return void k(im,this,!1);const{isMac:n}=Be.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(k(im,this,!0),null!==(t=y(pm,this,mm))&&void 0!==t&&t.isDrawer)return void this.startDrawingSession(e);const i=w(um,this).getActive();k(Jg,this,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),w(am,this))return void y(pm,this,mm).startDrawing(this,w(um,this),!1,e);w(um,this).setCurrentDrawingSession(this),k(am,this,new AbortController);const t=w(um,this).combinedSignal(w(am,this));this.div.addEventListener("blur",e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&(k(om,this,null),this.commitOrRemove())},{signal:t}),y(pm,this,mm).startDrawing(this,w(um,this),!1,e)}pause(e){if(e){const{activeElement:e}=document;return void(this.div.contains(e)&&k(om,this,e))}w(om,this)&&setTimeout(()=>{var e;null===(e=w(om,this))||void 0===e||e.focus(),k(om,this,null)},0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return w(am,this)?(w(um,this).setCurrentDrawingSession(null),w(am,this).abort(),k(am,this,null),k(om,this,null),y(pm,this,mm).endDrawing(e)):null}findNewParent(e,t,n){const i=w(um,this).findParent(t,n);return null!==i&&i!==this&&(i.changeParent(e),!0)}commitOrRemove(){return!!w(am,this)&&(this.endDrawingSession(),!0)}onScaleChanging(){w(am,this)&&y(pm,this,mm).onScaleChangingWhenDrawing(this)}destroy(){var e;this.commitOrRemove(),(null===(e=w(um,this).getActive())||void 0===e?void 0:e.parent)===this&&(w(um,this).commitOrRemove(),w(um,this).setActiveEditor(null)),w(tm,this)&&(clearTimeout(w(tm,this)),k(tm,this,null));for(const n of w(nm,this).values()){var t;null===(t=w($g,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,w(nm,this).clear(),w(um,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,ht(this.div,t);for(const n of w(um,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;w(um,this).commitOrRemove(),x(pm,this,xm).call(this);const n=this.viewport.rotation,i=t.rotation;if(this.viewport=t,ht(this.div,{rotation:i}),n!==i)for(const r of w(nm,this).values())r.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return w(um,this).viewParameters.realScale}}function gm(e){w(um,this).unselectAll();const{target:t}=e;if(t===w(lm,this).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&w(lm,this).div.contains(t)){const{isMac:t}=Be.platform;if(0!==e.button||e.ctrlKey&&t)return;w(um,this).showAllEditors("highlight",!0,!0),w(lm,this).div.classList.add("free"),this.toggleDrawing(),Vp.startHighlighting(this,"ltr"===w(um,this).direction,{target:w(lm,this).div,x:e.x,y:e.y}),w(lm,this).div.addEventListener("pointerup",()=>{w(lm,this).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:w(um,this)._signal}),e.preventDefault()}}function mm(e){return ym._.get(w(um,e).getMode())}function vm(e){const t=y(pm,this,mm);return t?new t.prototype.constructor(e):null}function bm(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,e),s=Math.max(0,t),a=(r+Math.min(window.innerWidth,e+n))/2-e,o=(s+Math.min(window.innerHeight,t+i))/2-t,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}function xm(){for(const e of w(nm,this).values())e.isEmpty()&&e.remove()}o(fm,"_initialized",!1);var ym={_:new Map([bu,ag,Hg,Vp,Tg].map(e=>[e._editorType,e]))},wm=new WeakMap,km=new WeakMap,Sm=new WeakMap,_m=new WeakSet;class Am{constructor(e){let{pageIndex:t}=e;v(this,_m),b(this,wm,null),b(this,km,new Map),b(this,Sm,new Map),this.pageIndex=t}setParent(e){if(w(wm,this)){if(w(wm,this)!==e){if(w(km,this).size>0)for(const t of w(km,this).values())t.remove(),e.append(t);k(wm,this,e)}}else k(wm,this,e)}static get _svgFactory(){return Ee(this,"_svgFactory",new kd)}draw(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=(Rm._=(t=Rm._,n=t++,t),n),a=x(_m,this,Mm).call(this),o=Am._svgFactory.createElement("defs");a.append(o);const l=Am._svgFactory.createElement("path");o.append(l);const c="path_p".concat(this.pageIndex,"_").concat(s);l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),i&&w(Sm,this).set(s,l);const d=r?x(_m,this,Em).call(this,o,c):null,h=Am._svgFactory.createElement("use");return a.append(h),h.setAttribute("href","#".concat(c)),this.updateProperties(a,e),w(km,this).set(s,a),{id:s,clipPathId:"url(#".concat(d,")")}}drawOutline(e,t){var n,i;const r=(Rm._=(n=Rm._,i=n++,n),i),s=x(_m,this,Mm).call(this),a=Am._svgFactory.createElement("defs");s.append(a);const o=Am._svgFactory.createElement("path");a.append(o);const l="path_p".concat(this.pageIndex,"_").concat(r);let c;if(o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t){const e=Am._svgFactory.createElement("mask");a.append(e),c="mask_p".concat(this.pageIndex,"_").concat(r),e.setAttribute("id",c),e.setAttribute("maskUnits","objectBoundingBox");const t=Am._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=Am._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(l)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const d=Am._svgFactory.createElement("use");s.append(d),d.setAttribute("href","#".concat(l)),c&&d.setAttribute("mask","url(#".concat(c,")"));const h=d.cloneNode();return s.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,e),w(km,this).set(r,s),r}finalizeDraw(e,t){w(Sm,this).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:i,rootClass:r,path:s}=t,a="number"===typeof e?w(km,this).get(e):e;if(a){if(n&&x(_m,this,Tm).call(this,a,n),i&&Cm.call(Am,a,i),r){const{classList:e}=a;for(const[t,n]of Object.entries(r))e.toggle(t,n)}if(s){const e=a.firstChild.firstChild;x(_m,this,Tm).call(this,e,s)}}}updateParent(e,t){if(t===this)return;const n=w(km,this).get(e);n&&(w(wm,t).append(n),w(km,this).delete(e),w(km,t).set(e,n))}remove(e){w(Sm,this).delete(e),null!==w(wm,this)&&(w(km,this).get(e).remove(),w(km,this).delete(e))}destroy(){k(wm,this,null);for(const e of w(km,this).values())e.remove();w(km,this).clear(),w(Sm,this).clear()}}function Cm(e,t){let[n,i,r,s]=t;const{style:a}=e;a.top="".concat(100*i,"%"),a.left="".concat(100*n,"%"),a.width="".concat(100*r,"%"),a.height="".concat(100*s,"%")}function Mm(){const e=B._svgFactory.create(1,1,!0);return w(wm,this).append(e),e.setAttribute("aria-hidden",!0),e}function Em(e,t){const n=B._svgFactory.createElement("clipPath");e.append(n);const i="clip_".concat(t);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=B._svgFactory.createElement("use");return n.append(r),r.setAttribute("href","#".concat(t)),r.classList.add("clip"),i}function Tm(e,t){for(const[n,i]of Object.entries(t))null===i?e.removeAttribute(n):e.setAttribute(n,i)}B=Am;var Rm={_:0};globalThis._pdfjsTestingUtils={HighlightOutliner:fp},globalThis.pdfjsLib={AbortException:De,AnnotationEditorLayer:fm,AnnotationEditorParamsType:Z,AnnotationEditorType:J,AnnotationEditorUIManager:Jn,AnnotationLayer:lu,AnnotationMode:Q,AnnotationType:oe,build:"9e2e9e209",ColorPicker:sd,createValidAbsoluteUrl:Ce,DOMSVGFactory:kd,DrawLayer:Am,FeatureTest:Be,fetchData:$e,getDocument:oc,getFilenameFromUrl:function(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(et(e))return Se('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(e=>{try{return new URL(e)}catch(t){try{return new URL(decodeURIComponent(e))}catch(n){try{return new URL(e,"https://foo.bar")}catch(i){try{return new URL(decodeURIComponent(e),"https://foo.bar")}catch(r){return null}}}}})(e);if(!n)return t;const i=e=>{try{let t=decodeURIComponent(e);return t.includes("/")?(t=t.split("/").at(-1),t.test(/^\.pdf$/i)?t:e):t}catch(t){return e}},r=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(r.test(s))return i(s);if(n.searchParams.size>0){const e=Array.from(n.searchParams.values()).reverse();for(const n of e)if(r.test(n))return i(n);const t=Array.from(n.searchParams.keys()).reverse();for(const n of t)if(r.test(n))return i(n)}if(n.hash){const e=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(e)return i(e[0])}return t},getRGB:lt,getUuid:Ge,getXfaPageViewport:function(e,t){let{scale:n=1,rotation:i=0}=t;const{width:r,height:s}=e.attributes.style,a=[0,0,parseInt(r),parseInt(s)];return new Je({viewBox:a,userUnit:1,scale:n,rotation:i})},GlobalWorkerOptions:Fo,ImageKind:ae,InvalidPDFException:Pe,isDataScheme:et,isPdfFile:tt,isValidExplicitDest:xs,MathClamp:Ye,noContextMenu:rt,normalizeUnicode:function(e){return Ue||(Ue=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,Ve=new Map([["\ufb05","\u017ft"]])),e.replaceAll(Ue,(e,t,n)=>t?t.normalize("NFKC"):Ve.get(n))},OPS:fe,OutputScale:ut,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:gc,PDFDateString:at,PDFWorker:Cc,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:Qe,RenderingCancelledException:Ze,ResponseException:Ie,setLayerDimensions:ht,shadow:Ee,SignatureExtractor:cg,stopEvent:st,SupportedImageMimeTypes:pt,TextLayer:Yl,TouchManager:rr,updateUrlHash:Me,Util:We,VerbosityLevel:pe,version:"5.4.149",XfaLayer:Sd},Fo.workerSrc="https://unpkg.com/pdfjs-dist@5.4.149/build/pdf.worker.min.mjs";const jm=e=>{let{pdfFileName:t="somapremier.pdf",pageNum:n=1,zoomScale:r=1,selectedTool:s="pen",selectedColor:a="#ef4444",brushSize:o=3,onStrokeDataChange:l,isRecording:h=!1,studentStrokeData:u=null,teacherFeedbackData:p=null,showTeacherFeedback:f=!1,isTeacherMode:g=!1,isStudentMode:m=!1,onPageCountChange:v,onPageChange:b}=e;const x=(0,i.useRef)(null),y=(0,i.useRef)(null),w=(0,i.useRef)(null),[k,S]=(0,i.useState)(null),[_,A]=(0,i.useState)(!1),[C,M]=(0,i.useState)([]),[E,T]=(0,i.useState)(0),[R,j]=(0,i.useState)(null),[P,I]=(0,i.useState)({}),[L,D]=(0,i.useState)(!1),F=!1,[N,B]=(0,i.useState)(!1),[z,W]=(0,i.useState)({x:0,y:0}),[O,H]=(0,i.useState)([]);(0,i.useEffect)(()=>{t&&(async()=>{try{A(!0),console.log("PDF \ub85c\ub529 \uc2dc\uc791:",t);const e="".concat("/Soma-Online-Demo","/static/").concat(t);console.log("PDF URL:",e),console.log("PUBLIC_URL:","/Soma-Online-Demo"),console.log("pdfFileName:",t);const n=await fetch(e);if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));const i=await n.arrayBuffer();console.log("PDF \ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc \uc644\ub8cc, \ud06c\uae30:",i.byteLength);const r=new Uint8Array(i.slice(0,100)),s=String.fromCharCode.apply(null,r);if(console.log("\ud30c\uc77c \uc2dc\uc791 \ubd80\ubd84:",s),!s.startsWith("%PDF"))throw new Error("\ub2e4\uc6b4\ub85c\ub4dc\ub41c \ud30c\uc77c\uc774 PDF\uac00 \uc544\ub2d9\ub2c8\ub2e4. HTML \uc5d0\ub7ec \ud398\uc774\uc9c0\uc77c \uac00\ub2a5\uc131\uc774 \uc788\uc2b5\ub2c8\ub2e4.");const a=oc({data:i,cMapUrl:"https://unpkg.com/pdfjs-dist@5.4.149/cmaps/",cMapPacked:!0,verbosity:0}),o=await a.promise;S(o);const l=Math.min(o.numPages,5);T(l),v&&v(l),console.log("PDF \ub85c\ub4dc \uc644\ub8cc: \uc804\uccb4 ".concat(o.numPages,"\ud398\uc774\uc9c0 \uc911 ").concat(l,"\ud398\uc774\uc9c0\ub9cc \ud45c\uc2dc")),console.log("PDF \ub85c\ub4dc \uc644\ub8cc:",o.numPages,"\ud398\uc774\uc9c0"),A(!1)}catch(e){console.error("PDF \ub85c\ub4dc \uc624\ub958:",e),A(!1)}})()},[t,v]);const U=(e,t)=>{if(!(t.points.length<2)){e.beginPath(),e.lineWidth=t.brushSize||3,e.strokeStyle=t.color||"#ef4444",e.lineCap="round",e.lineJoin="round",e.moveTo(t.points[0].x,t.points[0].y);for(let n=1;n<t.points.length;n++)e.lineTo(t.points[n].x,t.points[n].y);e.stroke()}},V=(0,i.useCallback)(()=>{const e=y.current;if(!e)return;const t=e.getContext("2d");e.width>0&&e.height>0&&t.clearRect(0,0,e.width,e.height),m&&u&&u.forEach(e=>{U(t,e)}),g&&p&&f&&p.forEach(e=>{U(t,e)}),C.forEach(e=>{U(t,e)})},[C,g,u,m,p,f]),G=(0,i.useCallback)(async(e,t,n)=>{const i=R;if(i){try{i.cancel(),await new Promise(e=>setTimeout(e,50))}catch(l){console.log("\uc774\uc804 \ub80c\ub354\ub9c1 \uc791\uc5c5 \ucde8\uc18c\ub428")}j(null)}const r=t.getContext("2d");r.clearRect(0,0,t.width,t.height);const s=e.getViewport({scale:n});t.height=s.height,t.width=s.width;const a={canvasContext:r,viewport:s},o=e.render(a);try{await o.promise}catch(l){if("RenderingCancelledException"===l.name)return console.log("\ub80c\ub354\ub9c1\uc774 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4"),o;console.error("\ud398\uc774\uc9c0 \ub80c\ub354\ub9c1 \uc624\ub958:",l)}return o},[]);(0,i.useEffect)(()=>{if(k&&n&&n<=5){A(!0);R&&(R.cancel(),j(null));(async()=>{try{const e=await k.getPage(n),t=x.current,i=y.current;if(t&&i){const n=r||1;t.getContext("2d").clearRect(0,0,t.width,t.height);const s=await G(e,t,n);j(s),i.height=t.height,i.width=t.width,setTimeout(()=>{V()},50)}}catch(e){console.error("\ud398\uc774\uc9c0 \ub80c\ub354\ub9c1 \uc624\ub958:",e)}finally{A(!1)}})()}else n>5&&(console.log("\ud398\uc774\uc9c0 ".concat(n,"\uc740 \uc81c\ud55c \ubc94\uc704(").concat(5,"\ud398\uc774\uc9c0)\ub97c \ubc97\uc5b4\ub0a9\ub2c8\ub2e4.")),b&&b(1))},[k,n,r,V,5,b]),(0,i.useEffect)(()=>()=>{if(R)try{R.cancel(),j(null)}catch(e){console.log("\ucef4\ud3ec\ub10c\ud2b8 \uc5b8\ub9c8\uc6b4\ud2b8 \uc2dc \ub80c\ub354\ub9c1 \uc791\uc5c5 \ucde8\uc18c\ub428")}},[R]),(0,i.useEffect)(()=>()=>{j(null),A(!1)},[]);const q=(0,i.useCallback)(async(e,t)=>{try{const n=e.getViewport({scale:.15}),i=document.createElement("canvas"),r=i.getContext("2d"),s=150,a=200;if(n.width>s||n.height>a){const t=Math.min(s/n.width,a/n.height),o=e.getViewport({scale:.15*t});i.width=o.width,i.height=o.height;const l={canvasContext:r,viewport:o};await e.render(l).promise}else{i.width=n.width,i.height=n.height;const t={canvasContext:r,viewport:n};await e.render(t).promise}const o=i.toDataURL("image/jpeg",.7);I(e=>c(c({},e),{},{[t]:o})),i.width=0,i.height=0}catch(n){console.error("\uc378\ub124\uc77c \uc0dd\uc131 \uc624\ub958 (\ud398\uc774\uc9c0 ".concat(t,"):"),n)}},[]),Y=(0,i.useCallback)(async e=>{if(!P[e]&&k)try{const t=await k.getPage(e);await q(t,e),I(e=>{const t=c({},e),i=Object.keys(t);if(i.length>10){const e=i.sort((e,t)=>{const i=Math.abs(parseInt(e)-n);return Math.abs(parseInt(t)-n)-i});for(let n=0;n<3&&n<e.length;n++)delete t[e[n]]}return t})}catch(t){console.error("\ud398\uc774\uc9c0 ".concat(e," \uc378\ub124\uc77c \uc0dd\uc131 \uc2e4\ud328:"),t)}},[k,q,P,n]);(0,i.useEffect)(()=>{F},[F,L,k,E,n,Y]);(0,i.useCallback)(e=>{b&&b(e)},[b]);const X=(0,i.useCallback)(e=>{const t=y.current;if(!t)return{x:0,y:0};const n=t.getBoundingClientRect(),i=e.touches?e.touches[0].clientX:e.clientX,r=e.touches?e.touches[0].clientY:e.clientY;return{x:i-n.left,y:r-n.top}},[]),K=(0,i.useCallback)(e=>{if("hand"===s)return;e.preventDefault(),e.stopPropagation();const t=X(e);B(!0),W(t),H([t])},[s,X]),Q=(0,i.useCallback)(e=>{if(!N||"hand"===s)return;e.preventDefault(),e.stopPropagation();const t=X(e);W(t),H(e=>[...e,t]);const n=y.current;if(n){const e=n.getContext("2d");e.save(),e.beginPath(),e.lineWidth=o,e.strokeStyle=a,e.lineCap="round",e.lineJoin="round",e.globalCompositeOperation="source-over",e.moveTo(z.x,z.y),e.lineTo(t.x,t.y),e.stroke(),e.restore()}},[N,s,X,z,o,a]),$=(0,i.useCallback)(e=>{if("hand"!==s){if(e.preventDefault(),e.stopPropagation(),N&&O.length>1){const e={id:Date.now(),type:"stroke",tool:s,color:a,brushSize:o,points:O,timestamp:(new Date).toISOString(),isRecording:h};M(t=>{const n=[...t,e];return l&&l(n),n})}B(!1),H([])}},[N,O,s,a,o,h,l,V]);return(0,d.jsxs)("div",{style:{display:"flex",height:"100%",gap:"1rem"},children:[F,(0,d.jsxs)("div",{ref:w,style:{flex:1,overflow:"auto",backgroundColor:"#f1f5f9",borderRadius:"12px",padding:"1rem",position:"relative"},children:[_&&(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",flexDirection:"column",gap:"1rem"},children:[(0,d.jsx)("div",{style:{width:"40px",height:"40px",border:"4px solid #e2e8f0",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,d.jsx)("span",{style:{color:"#6b7280",fontSize:"1rem"},children:"PDF \ub85c\ub529 \uc911..."})]}),(0,d.jsx)("div",{style:{display:_?"none":"flex",justifyContent:"center",alignItems:"center",position:"relative",minHeight:"100%"},children:(0,d.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,d.jsx)("canvas",{ref:x,style:{border:"2px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",backgroundColor:"white",display:"block",willChange:"auto",backfaceVisibility:"hidden",transform:"translateZ(0)"}}),(0,d.jsx)("canvas",{ref:y,style:{position:"absolute",top:0,left:0,cursor:"hand"===s?"grab":"crosshair",borderRadius:"8px",pointerEvents:"auto",willChange:"auto",backfaceVisibility:"hidden",transform:"translateZ(0)"},onMouseDown:K,onMouseMove:Q,onMouseUp:$,onMouseLeave:$,onTouchStart:K,onTouchMove:Q,onTouchEnd:$})]})})]}),(0,d.jsxs)("div",{style:{position:"absolute",top:"1rem",right:"1rem",zIndex:10,display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,d.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"0.5rem 1rem",borderRadius:"8px",fontSize:"0.875rem",fontFamily:"var(--font-ui)"},children:[n," / ",E]}),(0,d.jsx)("button",{onClick:()=>b&&n>1&&b(n-1),disabled:n<=1,style:{background:n<=1?"rgba(156, 163, 175, 0.5)":"rgba(59, 130, 246, 0.9)",border:"none",borderRadius:"8px",padding:"0.5rem",color:"white",cursor:n<=1?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseEnter:e=>{n>1&&(e.target.style.backgroundColor="rgba(59, 130, 246, 1)",e.target.style.transform="scale(1.05)")},onMouseLeave:e=>{n>1&&(e.target.style.backgroundColor="rgba(59, 130, 246, 0.9)",e.target.style.transform="scale(1)")},children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"})})}),(0,d.jsx)("button",{onClick:()=>b&&n<E&&b(n+1),disabled:n>=E,style:{background:n>=E?"rgba(156, 163, 175, 0.5)":"rgba(59, 130, 246, 0.9)",border:"none",borderRadius:"8px",padding:"0.5rem",color:"white",cursor:n>=E?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseEnter:e=>{n<E&&(e.target.style.backgroundColor="rgba(59, 130, 246, 1)",e.target.style.transform="scale(1.05)")},onMouseLeave:e=>{n<E&&(e.target.style.backgroundColor="rgba(59, 130, 246, 0.9)",e.target.style.transform="scale(1)")},children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"})})})]}),F]})},Pm=e=>{let{isOpen:t,onClose:n,bookTitle:r}=e;const[s,a]=(0,i.useState)([{id:1,type:"ai",content:"\uc548\ub155\ud558\uc138\uc694! ".concat(r,"\uc5d0 \ub300\ud574 \uad81\uae08\ud55c \uac83\uc774 \uc788\uc73c\uc2dc\uba74 \uc5b8\uc81c\ub4e0 \ubb3c\uc5b4\ubcf4\uc138\uc694. \ubb38\uc81c \ud574\uacb0\uc774\ub098 \uac1c\ub150 \uc124\uba85\uc744 \ub3c4\uc640\ub4dc\ub9b4\uac8c\uc694! \ud83e\udd16"),timestamp:new Date}]),[o,l]=(0,i.useState)(""),[c,h]=(0,i.useState)(!1),u=(0,i.useRef)(null);(0,i.useEffect)(()=>{(()=>{var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[s]);const p=async()=>{if(!o.trim())return;const e={id:Date.now(),type:"user",content:o,timestamp:new Date};a(t=>[...t,e]),l(""),h(!0),setTimeout(()=>{const e=f(o),t={id:Date.now()+1,type:"ai",content:e,timestamp:new Date};a(e=>[...e,t]),h(!1)},1500)},f=e=>{const t=["\uc88b\uc740 \uc9c8\ubb38\uc774\ub124\uc694! \uc774 \ubb38\uc81c\ub97c \ub2e8\uacc4\ubcc4\ub85c \ud480\uc5b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4. \uba3c\uc800 \ubb38\uc81c\uc5d0\uc11c \uc8fc\uc5b4\uc9c4 \uc870\uac74\uc744 \uc815\ub9ac\ud574\ubcf4\uc138\uc694.","\uc774 \uac1c\ub150\uc740 \uc218\ud559\uc5d0\uc11c \ub9e4\uc6b0 \uc911\uc694\ud55c \ubd80\ubd84\uc785\ub2c8\ub2e4. \uc608\uc2dc\ub97c \ub4e4\uc5b4 \uc124\uba85\ud574\ub4dc\ub9b4\uac8c\uc694.","\ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574\uc11c\ub294 \uba3c\uc800 \uacf5\uc2dd\uc744 \uc801\uc6a9\ud574\uc57c \ud569\ub2c8\ub2e4. \uc5b4\ub5a4 \uacf5\uc2dd\uc744 \uc0ac\uc6a9\ud574\uc57c \ud560\uc9c0 \uc0dd\uac01\ud574\ubcf4\uc138\uc694.","\uc815\ub2f5\uc740 \ub9de\uc2b5\ub2c8\ub2e4! \ud558\uc9c0\ub9cc \ub354 \uac04\ub2e8\ud55c \ubc29\ubc95\ub3c4 \uc788\uc5b4\uc694. \ub2e4\ub978 \ud480\uc774 \ubc29\ubc95\ub3c4 \uc54c\ub824\ub4dc\ub9b4\uac8c\uc694.","\uc774 \ubd80\ubd84\uc774 \uc5b4\ub824\uc6b0\uc2dc\uad70\uc694. \uadf8\ub9bc\uc744 \uadf8\ub824\uc11c \uc124\uba85\ud574\ub4dc\ub9b4\uac8c\uc694. \uba3c\uc800 \ub3c4\ud615\uc744 \uadf8\ub824\ubcf4\uc138\uc694.","\ud6cc\ub96d\ud55c \uc811\uadfc \ubc29\ubc95\uc785\ub2c8\ub2e4! \uc774\uc81c \ub2e4\uc74c \ub2e8\uacc4\ub85c \ub118\uc5b4\uac00\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.","\uc774 \ubb38\uc81c\ub294 \uc5ec\ub7ec \uac00\uc9c0 \ubc29\ubc95\uc73c\ub85c \ud480 \uc218 \uc788\uc5b4\uc694. \uac00\uc7a5 \uc26c\uc6b4 \ubc29\ubc95\ubd80\ud130 \uc54c\ub824\ub4dc\ub9b4\uac8c\uc694.","\uac1c\ub150\uc744 \uc774\ud574\ud558\ub294 \uac83\uc774 \uc911\uc694\ud574\uc694. \uc774 \uc6d0\ub9ac\ub97c \ub2e4\ub978 \ubb38\uc81c\uc5d0\ub3c4 \uc801\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."];return t[Math.floor(Math.random()*t.length)]};return t?(0,d.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:[(0,d.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"20px",width:"100%",maxWidth:"500px",height:"600px",display:"flex",flexDirection:"column",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)",overflow:"hidden"},children:[(0,d.jsxs)("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",padding:"1rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,d.jsx)("div",{style:{width:"32px",height:"32px",background:"rgba(255, 255, 255, 0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:"600"},children:"AI \ud559\uc2b5 \ub3c4\uc6b0\ubbf8"}),(0,d.jsx)("p",{style:{margin:0,fontSize:"0.8rem",opacity:.9},children:r})]})]}),(0,d.jsx)("button",{onClick:n,style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"50%",width:"32px",height:"32px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s"},onMouseEnter:e=>e.target.style.background="rgba(255, 255, 255, 0.3)",onMouseLeave:e=>e.target.style.background="rgba(255, 255, 255, 0.2)",children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,d.jsxs)("div",{style:{flex:1,padding:"1rem",overflowY:"auto",display:"flex",flexDirection:"column",gap:"1rem"},children:[s.map(e=>(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"user"===e.type?"flex-end":"flex-start",alignItems:"flex-start",gap:"0.5rem"},children:["ai"===e.type&&(0,d.jsx)("div",{style:{width:"32px",height:"32px",background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"white",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})}),(0,d.jsx)("div",{style:{maxWidth:"70%",padding:"0.75rem 1rem",borderRadius:"user"===e.type?"18px 18px 4px 18px":"18px 18px 18px 4px",background:"user"===e.type?"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)":"#f1f5f9",color:"user"===e.type?"white":"#1e293b",fontSize:"0.9rem",lineHeight:1.4,wordWrap:"break-word"},children:e.content}),"user"===e.type&&(0,d.jsx)("div",{style:{width:"32px",height:"32px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"white",children:(0,d.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})]},e.id)),c&&(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)("div",{style:{width:"32px",height:"32px",background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"white",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})}),(0,d.jsxs)("div",{style:{padding:"0.75rem 1rem",borderRadius:"18px 18px 18px 4px",background:"#f1f5f9",display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,d.jsx)("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#64748b",animation:"typing 1.4s infinite ease-in-out"}}),(0,d.jsx)("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#64748b",animation:"typing 1.4s infinite ease-in-out 0.2s"}}),(0,d.jsx)("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#64748b",animation:"typing 1.4s infinite ease-in-out 0.4s"}})]})]}),(0,d.jsx)("div",{ref:u})]}),(0,d.jsx)("div",{style:{padding:"1rem",borderTop:"1px solid #e2e8f0",background:"#f8fafc"},children:(0,d.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-end"},children:[(0,d.jsx)("textarea",{value:o,onChange:e=>l(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p())},placeholder:"\uad81\uae08\ud55c \uac83\uc744 \ubb3c\uc5b4\ubcf4\uc138\uc694...",style:{flex:1,minHeight:"40px",maxHeight:"120px",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"20px",fontSize:"0.9rem",fontFamily:"inherit",resize:"none",outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#3b82f6",onBlur:e=>e.target.style.borderColor="#d1d5db"}),(0,d.jsx)("button",{onClick:p,disabled:!o.trim(),style:{width:"40px",height:"40px",borderRadius:"50%",background:o.trim()?"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)":"#d1d5db",border:"none",color:"white",cursor:o.trim()?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:(0,d.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]})})]}),(0,d.jsx)("style",{jsx:!0,children:"\n        @keyframes typing {\n          0%, 60%, 100% {\n            transform: translateY(0);\n            opacity: 0.4;\n          }\n          30% {\n            transform: translateY(-10px);\n            opacity: 1;\n          }\n        }\n      "})]}):null},Im=e=>{let{onLogin:t}=e;const[n,r]=(0,i.useState)({id:"",password:""}),s=e=>{const{name:t,value:n}=e.target;r(e=>c(c({},e),{},{[t]:n}))};return(0,d.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"var(--font-body)"},children:(0,d.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"3rem",boxShadow:"0 20px 40px rgba(30, 58, 138, 0.3)",border:"1px solid rgba(59, 130, 246, 0.2)",maxWidth:"400px",width:"100%",margin:"1rem"},children:[(0,d.jsxs)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[(0,d.jsx)("div",{style:{width:"60px",height:"60px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",boxShadow:"0 8px 16px rgba(59, 130, 246, 0.3)"},children:(0,d.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"white",children:(0,d.jsx)("path",{d:"M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z"})})}),(0,d.jsx)("h1",{style:{fontSize:"1.75rem",fontWeight:"bold",color:"#1e3a8a",marginBottom:"0.5rem",fontFamily:"var(--font-title)"},children:"\uac15\uc0ac \ub85c\uadf8\uc778"}),(0,d.jsx)("p",{style:{fontSize:"1rem",color:"#64748b",fontFamily:"var(--font-body)"},children:"\ucc44\uc810 \ubc0f \ud53c\ub4dc\ubc31 \uc2dc\uc2a4\ud15c\uc5d0 \uc811\uc18d\ud558\uc138\uc694"})]}),(0,d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.id&&n.password?t():alert("\uc544\uc774\ub514\uc640 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"600",color:"#374151",marginBottom:"0.5rem",fontFamily:"var(--font-ui)"},children:"\uac15\uc0ac ID"}),(0,d.jsx)("input",{type:"text",name:"id",value:n.id,onChange:s,placeholder:"\uac15\uc0ac ID\ub97c \uc785\ub825\ud558\uc138\uc694",style:{width:"100%",padding:"0.75rem 1rem",border:"2px solid #e5e7eb",borderRadius:"12px",fontSize:"1rem",transition:"all 0.2s ease",fontFamily:"var(--font-body)",boxSizing:"border-box"},onFocus:e=>{e.target.style.borderColor="#3b82f6",e.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:e=>{e.target.style.borderColor="#e5e7eb",e.target.style.boxShadow="none"}})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:"600",color:"#374151",marginBottom:"0.5rem",fontFamily:"var(--font-ui)"},children:"\ube44\ubc00\ubc88\ud638"}),(0,d.jsx)("input",{type:"password",name:"password",value:n.password,onChange:s,placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694",style:{width:"100%",padding:"0.75rem 1rem",border:"2px solid #e5e7eb",borderRadius:"12px",fontSize:"1rem",transition:"all 0.2s ease",fontFamily:"var(--font-body)",boxSizing:"border-box"},onFocus:e=>{e.target.style.borderColor="#3b82f6",e.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:e=>{e.target.style.borderColor="#e5e7eb",e.target.style.boxShadow="none"}})]}),(0,d.jsx)("button",{type:"submit",style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white",border:"none",borderRadius:"12px",padding:"0.875rem 1.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",fontFamily:"var(--font-ui)",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 8px 20px rgba(59, 130, 246, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.3)"},children:"\uac15\uc0ac \ub85c\uadf8\uc778"})]}),(0,d.jsx)("div",{style:{marginTop:"2rem",padding:"1rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:(0,d.jsx)("p",{style:{fontSize:"0.875rem",color:"#1e40af",textAlign:"center",margin:0,fontFamily:"var(--font-body)"},children:"\ud83d\udca1 \ub370\ubaa8\uc6a9 \ub85c\uadf8\uc778: \uc544\ubb34 ID/\ube44\ubc00\ubc88\ud638\ub098 \uc785\ub825\ud558\uc138\uc694"})})]})})},Lm=e=>{let{onBackToBookList:t,onViewSubmission:n}=e;const[r,s]=(0,i.useState)([]),[a,o]=(0,i.useState)(null),[l,c]=(0,i.useState)("all"),[h,u]=(0,i.useState)("");(0,i.useEffect)(()=>{s([{id:1,studentId:"student1",studentName:"\uae40\ud559\uc0dd",bookTitle:"\uc18c\ub9c8 \ud504\ub9ac\ubbf8\uc5b4 \uad50\uc7ac 1",bookUrl:"/somapremier.pdf",submittedAt:"2024-01-15T14:30:00Z",status:"pending",hasAudio:!0,hasDrawing:!0,strokeData:[{type:"stroke",tool:"pen",color:"#ef4444",brushSize:3,points:[{x:100,y:100},{x:150,y:120},{x:200,y:140}]}],audioUrl:"/sample-audio.wav",feedback:null},{id:2,studentId:"student2",studentName:"\uc774\ud559\uc0dd",bookTitle:"\uc18c\ub9c8 \ud504\ub9ac\ubbf8\uc5b4 \uad50\uc7ac 2(\ucca8\uc0ad)",bookUrl:"/somapremier.pdf",submittedAt:"2024-01-15T10:15:00Z",status:"graded",hasAudio:!0,hasDrawing:!0,strokeData:[{type:"stroke",tool:"pen",color:"#3b82f6",brushSize:3,points:[{x:200,y:200},{x:250,y:220},{x:300,y:240}]}],audioUrl:"/sample-audio2.wav",feedback:{id:1,teacherId:"teacher1",teacherName:"\uc120\uc0dd\ub2d8",feedbackStrokeData:[{type:"stroke",tool:"pen",color:"#10b981",brushSize:2,points:[{x:200,y:200},{x:250,y:220},{x:300,y:240}]}],gradedAt:"2024-01-15T16:45:00Z"}},{id:3,studentId:"student3",studentName:"\ubc15\ud559\uc0dd",bookTitle:"\uc18c\ub9c8 \ud504\ub9ac\ubbf8\uc5b4 \uad50\uc7ac 1",bookUrl:"/somapremier.pdf",submittedAt:"2024-01-14T16:20:00Z",status:"pending",hasAudio:!1,hasDrawing:!0,strokeData:[{type:"stroke",tool:"pen",color:"#8b5cf6",brushSize:4,points:[{x:300,y:300},{x:350,y:320},{x:400,y:340}]}],audioUrl:null,feedback:null}])},[]);const p=r.filter(e=>{const t="all"===l||e.status===l,n=e.studentName.toLowerCase().includes(h.toLowerCase())||e.bookTitle.toLowerCase().includes(h.toLowerCase());return t&&n}),f=e=>{o(e),n&&n(e)};return(0,d.jsx)("div",{style:{fontFamily:"var(--font-body)"},children:(0,d.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"0"},children:[(0,d.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem",boxShadow:"0 8px 32px rgba(30, 58, 138, 0.2)",border:"1px solid rgba(59, 130, 246, 0.2)"},children:(0,d.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[(0,d.jsx)("div",{style:{flex:1,minWidth:"300px"},children:(0,d.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{position:"absolute",left:"12px",color:"#6b7280",zIndex:1},children:[(0,d.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,d.jsx)("path",{d:"m21 21-4.35-4.35"})]}),(0,d.jsx)("input",{type:"text",placeholder:"\ud559\uc0dd\uba85 \ub610\ub294 \uad50\uc7ac\uba85\uc73c\ub85c \uac80\uc0c9...",value:h,onChange:e=>u(e.target.value),style:{width:"100%",padding:"0.75rem 1rem 0.75rem 2.5rem",border:"2px solid #e5e7eb",borderRadius:"12px",fontSize:"1rem",transition:"all 0.2s ease",fontFamily:"var(--font-body)",boxSizing:"border-box"},onFocus:e=>{e.target.style.borderColor="#3b82f6",e.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:e=>{e.target.style.borderColor="#e5e7eb",e.target.style.boxShadow="none"}})]})}),(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"12px",padding:"0.25rem"},children:[{value:"all",label:"\uc804\uccb4",count:r.length},{value:"pending",label:"\ubbf8\ucc44\uc810",count:r.filter(e=>"pending"===e.status).length},{value:"graded",label:"\ucc44\uc810\uc644\ub8cc",count:r.filter(e=>"graded"===e.status).length}].map(e=>(0,d.jsxs)("button",{onClick:()=>c(e.value),style:{background:l===e.value?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":"transparent",color:l===e.value?"white":"#64748b",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.875rem",fontFamily:"var(--font-ui)",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.label,(0,d.jsx)("span",{style:{background:l===e.value?"rgba(255, 255, 255, 0.2)":"rgba(59, 130, 246, 0.2)",color:l===e.value?"white":"#3b82f6",borderRadius:"12px",padding:"0.125rem 0.5rem",fontSize:"0.75rem",fontWeight:"600"},children:e.count})]},e.value))})]})}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:"1.5rem"},children:p.map(e=>{const t=(e=>{switch(e){case"pending":return{bg:"#fef3c7",text:"#d97706",border:"#f59e0b"};case"graded":return{bg:"#d1fae5",text:"#059669",border:"#10b981"};default:return{bg:"#f3f4f6",text:"#6b7280",border:"#d1d5db"}}})(e.status);return(0,d.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"1.5rem",cursor:"pointer",transition:"all 0.3s ease",border:"2px solid ".concat(t.border),boxShadow:"0 8px 32px rgba(30, 58, 138, 0.2)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.target.style.transform="translateY(-4px)",e.target.style.boxShadow="0 12px 40px rgba(30, 58, 138, 0.3)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 8px 32px rgba(30, 58, 138, 0.2)"},onClick:()=>f(e),children:[(0,d.jsx)("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:t.bg,color:t.text,padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600",fontFamily:"var(--font-ui)",border:"1px solid ".concat(t.border)},children:"pending"===e.status?"\ubbf8\ucc44\uc810":"\ucc44\uc810\uc644\ub8cc"}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[(0,d.jsx)("div",{style:{width:"50px",height:"50px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.2rem",fontWeight:"bold",fontFamily:"var(--font-title)"},children:e.studentName.charAt(0)}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1e3a8a",margin:"0 0 0.25rem 0",fontFamily:"var(--font-title)"},children:e.studentName}),(0,d.jsx)("p",{style:{fontSize:"0.9rem",color:"#64748b",margin:"0",fontFamily:"var(--font-body)"},children:e.bookTitle})]})]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.5rem"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"#64748b",fontFamily:"var(--font-ui)"},children:[(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,d.jsxs)("span",{children:["\uc81c\ucd9c\uc77c: ",(n=e.submittedAt,new Date(n).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}))]})]}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:e.hasDrawing?"#10b981":"#6b7280",fontFamily:"var(--font-ui)"},children:[(0,d.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})}),(0,d.jsxs)("span",{children:["\ud544\uae30 ",e.hasDrawing?"\uc788\uc74c":"\uc5c6\uc74c"]})]}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.8rem",color:e.hasAudio?"#10b981":"#6b7280",fontFamily:"var(--font-ui)"},children:[(0,d.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsx)("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),(0,d.jsx)("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]}),(0,d.jsxs)("span",{children:["\ub179\uc74c ",e.hasAudio?"\uc788\uc74c":"\uc5c6\uc74c"]})]})]})]}),(0,d.jsx)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:(0,d.jsxs)("button",{onClick:t=>{t.stopPropagation(),f(e)},style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",fontFamily:"var(--font-ui)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:e=>{e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="none"},children:[(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}),"pending"===e.status?"\ucca8\uc0ad\ud558\uae30":"\ucca8\uc0ad\ubcf4\uae30"]})})]},e.id);var n})}),0===p.length&&(0,d.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#64748b"},children:[(0,d.jsx)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",style:{margin:"0 auto 1rem",opacity:.5},children:(0,d.jsx)("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),(0,d.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.5rem",fontFamily:"var(--font-title)"},children:h||"all"!==l?"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4":"\uc544\uc9c1 \uc81c\ucd9c\ub41c \uacfc\uc81c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,d.jsx)("p",{style:{fontSize:"1rem",margin:"0",fontFamily:"var(--font-body)"},children:h||"all"!==l?"\ub2e4\ub978 \uac80\uc0c9\uc5b4\ub97c \uc2dc\ub3c4\ud574\ubcf4\uc138\uc694":"\ud559\uc0dd\ub4e4\uc774 \uacfc\uc81c\ub97c \uc81c\ucd9c\ud558\uba74 \uc5ec\uae30\uc5d0 \ud45c\uc2dc\ub429\ub2c8\ub2e4"})]})]})})},Dm=e=>{let{files:t,onBookSelect:n,onBackToLogin:r,onGoToSubmissions:s,notifications:a,setNotifications:o}=e;const[l,c]=(0,i.useState)(""),[h,u]=(0,i.useState)(new Set),[p,f]=(0,i.useState)("submissions"),g=t.filter(e=>e.title.toLowerCase().includes(l.toLowerCase())),m=[...g].sort((e,n)=>{const i=h.has(t.indexOf(e)),r=h.has(t.indexOf(n));return i&&!r?-1:!i&&r?1:e.title.localeCompare(n.title)});return(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%)",fontFamily:"var(--font-body)"},children:[(0,d.jsx)("header",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"2px solid rgba(59, 130, 246, 0.3)",padding:"1rem 2rem",boxShadow:"0 4px 12px rgba(30, 58, 138, 0.2)"},children:(0,d.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,d.jsx)("button",{onClick:r,style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="none"},children:"\u2190 \ub85c\uadf8\uc778\uc73c\ub85c"}),(0,d.jsx)("h1",{style:{color:"#1e3a8a",fontSize:"1.5rem",fontWeight:"bold",fontFamily:"var(--font-title)"},children:"\uad50\uc7ac \ubaa9\ub85d - \uac15\uc0ac \ubaa8\ub4dc"})]}),(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"rgba(255, 255, 255, 0.8)",borderRadius:"12px",padding:"0.25rem",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[(0,d.jsx)("button",{onClick:()=>f("books"),style:{background:"books"===p?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":"transparent",color:"books"===p?"white":"#64748b",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.875rem",fontFamily:"var(--font-ui)",fontWeight:"500",transition:"all 0.2s ease"},children:"\uad50\uc7ac"}),(0,d.jsxs)("button",{onClick:()=>f("submissions"),style:{background:"submissions"===p?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":"transparent",color:"submissions"===p?"white":"#64748b",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.875rem",fontFamily:"var(--font-ui)",fontWeight:"500",transition:"all 0.2s ease",position:"relative"},children:["\uc81c\ucd9c\ubb3c \uad00\ub9ac",a.length>0&&(0,d.jsx)("span",{style:{position:"absolute",top:"-4px",right:"-4px",background:"#ef4444",color:"white",borderRadius:"50%",width:"18px",height:"18px",fontSize:"0.7rem",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:a.length})]})]})})]})}),(0,d.jsx)("main",{style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem"},children:"books"===p?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem",boxShadow:"0 8px 32px rgba(30, 58, 138, 0.2)",border:"1px solid rgba(59, 130, 246, 0.2)"},children:(0,d.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[(0,d.jsx)("div",{style:{flex:1,minWidth:"300px"},children:(0,d.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{position:"absolute",left:"12px",color:"#6b7280",zIndex:1},children:[(0,d.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,d.jsx)("path",{d:"m21 21-4.35-4.35"})]}),(0,d.jsx)("input",{type:"text",placeholder:"\uad50\uc7ac\uba85\uc73c\ub85c \uac80\uc0c9...",value:l,onChange:e=>c(e.target.value),style:{width:"100%",padding:"0.75rem 1rem 0.75rem 2.5rem",border:"2px solid #e5e7eb",borderRadius:"12px",fontSize:"1rem",transition:"all 0.2s ease",fontFamily:"var(--font-body)",boxSizing:"border-box"},onFocus:e=>{e.target.style.borderColor="#3b82f6",e.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:e=>{e.target.style.borderColor="#e5e7eb",e.target.style.boxShadow="none"}})]})}),(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#374151",fontSize:"0.9rem",fontFamily:"var(--font-ui)"},children:(0,d.jsxs)("span",{children:["\ucd1d ",g.length,"\uac1c \uad50\uc7ac"]})})]})}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.5rem"},children:m.map((e,i)=>{const r=t.indexOf(e),s=h.has(r);return(0,d.jsxs)("div",{onClick:()=>{console.log("\uad50\uc7ac \uce74\ub4dc \ud074\ub9ad\ub428:",{title:e.title,index:r}),n(e.url,r)},style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"1.5rem",cursor:"pointer",transition:"all 0.3s ease",border:"2px solid rgba(59, 130, 246, 0.2)",boxShadow:"0 8px 32px rgba(30, 58, 138, 0.2)",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.target.style.transform="translateY(-4px)",e.target.style.boxShadow="0 12px 40px rgba(30, 58, 138, 0.3)",e.target.style.borderColor="rgba(59, 130, 246, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 8px 32px rgba(30, 58, 138, 0.2)",e.target.style.borderColor="rgba(59, 130, 246, 0.2)"},children:[(0,d.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{const t=new Set(h);t.has(e)?t.delete(e):t.add(e),u(t)})(r)},style:{position:"absolute",top:"1rem",right:"1rem",background:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseEnter:e=>{e.target.style.transform="scale(1.1)",e.target.style.background="rgba(255, 255, 255, 1)"},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.background="rgba(255, 255, 255, 0.9)"},children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:s?"#3b82f6":"none",stroke:s?"#3b82f6":"#6b7280",strokeWidth:"2",children:(0,d.jsx)("polygon",{points:"12,2 15.09,8.26 22,9 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9 8.91,8.26"})})}),(0,d.jsx)("div",{style:{width:"60px",height:"60px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:(0,d.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"white",children:(0,d.jsx)("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),(0,d.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#1e3a8a",marginBottom:"0.5rem",fontFamily:"var(--font-title)",lineHeight:1.3,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.title}),(0,d.jsx)("p",{style:{fontSize:"0.9rem",color:"#64748b",marginBottom:"1rem",fontFamily:"var(--font-body)",lineHeight:1.4},children:"image"===e.type?"\uc774\ubbf8\uc9c0 \uad50\uc7ac":"PDF \uad50\uc7ac"}),(0,d.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[(0,d.jsx)("div",{style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",padding:"0.5rem 1rem",borderRadius:"8px",fontSize:"0.8rem",fontWeight:"600",fontFamily:"var(--font-ui)",border:"1px solid rgba(59, 130, 246, 0.2)"},children:"\ucc44\uc810 \uac00\ub2a5"}),(0,d.jsx)("div",{style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981",padding:"0.5rem 1rem",borderRadius:"8px",fontSize:"0.8rem",fontWeight:"600",fontFamily:"var(--font-ui)",border:"1px solid rgba(16, 185, 129, 0.2)"},children:"AI \ucca8\uc0ad"})]})]},r)})}),0===g.length&&(0,d.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"white"},children:[(0,d.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",style:{margin:"0 auto 1rem",opacity:.5},children:[(0,d.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,d.jsx)("path",{d:"m21 21-4.35-4.35"})]}),(0,d.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.5rem",fontFamily:"var(--font-title)"},children:"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,d.jsx)("p",{style:{fontSize:"1rem",opacity:.8,fontFamily:"var(--font-body)"},children:"\ub2e4\ub978 \uac80\uc0c9\uc5b4\ub97c \uc2dc\ub3c4\ud574\ubcf4\uc138\uc694"})]})]}):(0,d.jsx)(Lm,{onBackToBookList:()=>f("books"),onViewSubmission:e=>{s(e)}})})]})},Fm=e=>{var t;let{submission:n,onBackToSubmissions:r,onSaveFeedback:s}=e;const a=(0,i.useRef)(null),o=(0,i.useRef)(null),l=(0,i.useRef)(null),[c,h]=((0,i.useRef)(null),(0,i.useState)(!1)),[u,p]=(0,i.useState)(1),[f,g]=(0,i.useState)("pen"),[m,v]=(0,i.useState)("#ef4444"),[b,x]=(0,i.useState)(3),[y,w]=(0,i.useState)(!1),[k,S]=(0,i.useState)({x:0,y:0}),[_,A]=(0,i.useState)([]),[C,M]=(0,i.useState)([]),[E,T]=(0,i.useState)(!0),[R,j]=(0,i.useState)(!0),[P,I]=(0,i.useState)(!1),[L,D]=(0,i.useState)(0),[F,N]=(0,i.useState)(0),B=(0,i.useCallback)(()=>{const e=document.createElement("canvas"),t=e.getContext("2d");return e.width=800,e.height=1e3,t.fillStyle="#ffffff",t.fillRect(0,0,e.width,e.height),t.fillStyle="#1e3a8a",t.font="bold 24px Arial",t.textAlign="center",t.fillText((null===n||void 0===n?void 0:n.bookTitle)||"\uc18c\ub9c8 \ud504\ub9ac\ubbf8\uc5b4 \uad50\uc7ac",e.width/2,50),t.fillStyle="#64748b",t.font="16px Arial",t.textAlign="left",t.fillText("\ud559\uc0dd: ".concat((null===n||void 0===n?void 0:n.studentName)||"\uae40\ud559\uc0dd"),50,100),t.fillStyle="#374151",t.font="18px Arial",t.fillText("\ubb38\uc81c 1. \ub2e4\uc74c \uc218\uc2dd\uc744 \uacc4\uc0b0\ud558\uc2dc\uc624.",50,150),t.fillText("2x + 3y = 12",50,180),t.fillText("x - y = 1",50,210),t.strokeStyle="#6b7280",t.lineWidth=3,t.lineCap="round",t.lineJoin="round",t.beginPath(),t.moveTo(100,250),t.lineTo(200,250),t.stroke(),t.beginPath(),t.moveTo(100,280),t.lineTo(300,280),t.stroke(),t.fillStyle="#6b7280",t.font="16px Arial",t.fillText("x = 3, y = 2",100,320),t.fillStyle="#374151",t.font="18px Arial",t.fillText("\ubb38\uc81c 2. \uadf8\ub798\ud504\ub97c \uadf8\ub9ac\uc2dc\uc624.",50,400),t.strokeStyle="#6b7280",t.lineWidth=2,t.beginPath(),t.moveTo(100,500),t.lineTo(300,500),t.moveTo(200,400),t.lineTo(200,600),t.stroke(),t.fillStyle="#6b7280",t.font="14px Arial",t.fillText("x",310,500),t.fillText("y",200,390),e.toDataURL()},[n]);(0,i.useEffect)(()=>{if(n){h(!1);const e=B(),t=new Image;t.onload=()=>{h(!0),z(t)},t.src=e}},[n,B]);const z=(0,i.useCallback)(e=>{const t=a.current,n=o.current;if(t&&n&&e){const i=u||1,r=e.width*i,s=e.height*i;t.width=r,t.height=s,n.width=r,n.height=s;const a=t.getContext("2d");a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",a.drawImage(e,0,0,r,s),V()}},[u]);(0,i.useEffect)(()=>{if(c&&n){const e=B(),t=new Image;t.onload=()=>{z(t)},t.src=e}},[u,c,n,B,z]);const W=(0,i.useCallback)(e=>{const t=o.current;if(!t)return{x:0,y:0};const n=t.getBoundingClientRect(),i=e.touches?e.touches[0].clientX:e.clientX,r=e.touches?e.touches[0].clientY:e.clientY;return{x:Math.max(0,Math.min(t.width,i-n.left)),y:Math.max(0,Math.min(t.height,r-n.top))}},[]),O=(0,i.useCallback)(e=>{if(["pen","highlighter","eraser"].includes(f)){e.preventDefault(),w(!0);const t=W(e);S(t),A([t])}},[f,W]),H=(0,i.useCallback)(e=>{if(y&&["pen","highlighter"].includes(f)){e.preventDefault();const t=W(e),n=o.current;if(n){const e=n.getContext("2d");e.save(),e.lineWidth=b,e.lineCap="round",e.lineJoin="round","highlighter"===f?(e.globalAlpha=.3,e.globalCompositeOperation="multiply"):(e.globalAlpha=1,e.globalCompositeOperation="source-over"),e.strokeStyle=m,e.beginPath(),e.moveTo(k.x,k.y),e.lineTo(t.x,t.y),e.stroke(),A(e=>[...e,t]),S(t),e.restore()}}else if(y&&"eraser"===f){e.preventDefault();const t=W(e),n=o.current;if(n){const e=n.getContext("2d"),i=2*b;e.save(),e.globalCompositeOperation="destination-out",e.beginPath(),e.arc(t.x,t.y,i/2,0,2*Math.PI),e.fill(),e.restore()}}},[y,f,W,k,b,m]),U=(0,i.useCallback)(()=>{if(y&&_.length>1){const e={type:"stroke",tool:f,color:m,brushSize:b,points:_,timestamp:(new Date).toISOString()};M(t=>[...t,e])}w(!1),A([])},[y,_,f,m,b]),V=(0,i.useCallback)(()=>{const e=o.current;if(!e)return;const t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),E&&null!==n&&void 0!==n&&n.strokeData&&(t.save(),t.globalAlpha=.7,t.strokeStyle="#6b7280",t.lineWidth=2,t.lineCap="round",t.lineJoin="round",n.strokeData.forEach(e=>{if(e.points.length>1){t.beginPath(),t.moveTo(e.points[0].x,e.points[0].y);for(let n=1;n<e.points.length;n++)t.lineTo(e.points[n].x,e.points[n].y);t.stroke()}}),t.restore()),R&&C.forEach(e=>{if("stroke"===e.type&&e.points.length>1){t.save(),t.strokeStyle=e.color,t.lineWidth=e.brushSize,t.lineCap="round",t.lineJoin="round","highlighter"===e.tool?(t.globalAlpha=.3,t.globalCompositeOperation="multiply"):(t.globalAlpha=1,t.globalCompositeOperation="source-over"),t.beginPath(),t.moveTo(e.points[0].x,e.points[0].y);for(let n=1;n<e.points.length;n++)t.lineTo(e.points[n].x,e.points[n].y);t.stroke(),t.restore()}})},[null===n||void 0===n?void 0:n.strokeData,C,E,R]);(0,i.useEffect)(()=>{V()},[V]);const G=e=>{if(isNaN(e)||!isFinite(e)||e<0)return"0:00";const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))};return n?(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%)",fontFamily:"var(--font-body)"},children:[(0,d.jsx)("header",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"2px solid rgba(59, 130, 246, 0.3)",padding:"1rem 2rem",boxShadow:"0 4px 12px rgba(30, 58, 138, 0.2)"},children:(0,d.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,d.jsx)("button",{onClick:r,style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease"},children:"\u2190 \uc81c\ucd9c\ubb3c \ubaa9\ub85d\uc73c\ub85c"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h1",{style:{color:"#1e3a8a",fontSize:"1.5rem",fontWeight:"bold",fontFamily:"var(--font-title)",margin:"0 0 0.25rem 0"},children:["\ucca8\uc0ad\ud558\uae30 - ",n.studentName]}),(0,d.jsx)("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0",fontFamily:"var(--font-body)"},children:n.bookTitle})]})]}),(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:(0,d.jsxs)("button",{onClick:()=>{if(0===C.length)return void alert("\ucca8\uc0ad\ud560 \ub0b4\uc6a9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const e={id:Date.now(),teacherId:"teacher1",teacherName:"\uc120\uc0dd\ub2d8",timestamp:(new Date).toISOString(),feedbackStrokeData:C,studentSubmissionId:n.id,bookTitle:n.bookTitle,bookUrl:n.bookUrl};s&&s(e),alert("\ucca8\uc0ad\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")},style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"})}),"\ucca8\uc0ad \uc800\uc7a5"]})})]})}),(0,d.jsxs)("div",{style:{display:"flex",height:"calc(100vh - 80px)",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%)"},children:[(0,d.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"1rem"},children:[(0,d.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 4px 12px rgba(30, 58, 138, 0.2)",border:"1px solid rgba(59, 130, 246, 0.2)"},children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"rgba(59, 130, 246, 0.1)",padding:"0.5rem",borderRadius:"8px"},children:[(0,d.jsx)("button",{onClick:()=>{p(e=>Math.max(e-.2,.5))},disabled:u<=.5,style:{padding:"0.25rem",borderRadius:"6px",border:"1px solid rgba(59, 130, 246, 0.3)",background:u<=.5?"rgba(156, 163, 175, 0.3)":"rgba(255, 255, 255, 0.8)",color:u<=.5?"#9ca3af":"#3b82f6",cursor:u<=.5?"not-allowed":"pointer",transition:"all 0.2s ease"},children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 13H5v-2h14v2z"})})}),(0,d.jsxs)("span",{style:{fontSize:"0.875rem",color:"#1e3a8a",fontFamily:"var(--font-ui)",minWidth:"60px",textAlign:"center"},children:[Math.round(100*u),"%"]}),(0,d.jsx)("button",{onClick:()=>{p(e=>Math.min(e+.2,3))},disabled:u>=3,style:{padding:"0.25rem",borderRadius:"6px",border:"1px solid rgba(59, 130, 246, 0.3)",background:u>=3?"rgba(156, 163, 175, 0.3)":"rgba(255, 255, 255, 0.8)",color:u>=3?"#9ca3af":"#3b82f6",cursor:u>=3?"not-allowed":"pointer",transition:"all 0.2s ease"},children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})})]}),(0,d.jsx)("div",{style:{display:"flex",gap:"0.5rem"},children:[{tool:"pen",label:"\ud39c"},{tool:"highlighter",label:"\ud558\uc774\ub77c\uc774\ud130"},{tool:"eraser",label:"\uc9c0\uc6b0\uac1c"}].map(e=>{let{tool:t,label:n}=e;return(0,d.jsx)("button",{onClick:()=>g(t),style:{padding:"0.5rem",borderRadius:"8px",border:f===t?"2px solid #3b82f6":"2px solid rgba(59, 130, 246, 0.3)",background:f===t?"rgba(59, 130, 246, 0.2)":"rgba(255, 255, 255, 0.8)",color:f===t?"#1e3a8a":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},title:n,children:(0,d.jsx)("span",{style:{fontSize:"0.875rem"},children:n})},t)})}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)("span",{style:{color:"#1e3a8a",fontSize:"0.9rem"},children:"\uc0c9\uc0c1:"}),(0,d.jsx)("div",{style:{display:"flex",gap:"0.25rem"},children:["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#000000"].map(e=>(0,d.jsx)("button",{onClick:()=>v(e),style:{width:"24px",height:"24px",borderRadius:"50%",border:m===e?"2px solid #3b82f6":"2px solid rgba(59, 130, 246, 0.3)",background:e,cursor:"pointer",transition:"all 0.2s ease"}},e))})]}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)("span",{style:{color:"#1e3a8a",fontSize:"0.9rem"},children:"\ud06c\uae30:"}),(0,d.jsxs)("select",{value:b,onChange:e=>x(Number(e.target.value)),style:{background:"rgba(255, 255, 255, 0.8)",color:"#1e3a8a",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"6px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:[(0,d.jsx)("option",{value:1,children:"1px"}),(0,d.jsx)("option",{value:3,children:"3px"}),(0,d.jsx)("option",{value:5,children:"5px"}),(0,d.jsx)("option",{value:8,children:"8px"}),(0,d.jsx)("option",{value:12,children:"12px"})]})]}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)("button",{onClick:()=>T(!E),style:{padding:"0.5rem",borderRadius:"8px",border:E?"2px solid #3b82f6":"2px solid rgba(59, 130, 246, 0.3)",background:E?"rgba(59, 130, 246, 0.2)":"rgba(255, 255, 255, 0.8)",color:E?"#1e3a8a":"#64748b",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.875rem"},children:"\ud559\uc0dd \ud544\uae30"}),(0,d.jsx)("button",{onClick:()=>j(!R),style:{padding:"0.5rem",borderRadius:"8px",border:R?"2px solid #3b82f6":"2px solid rgba(59, 130, 246, 0.3)",background:R?"rgba(59, 130, 246, 0.2)":"rgba(255, 255, 255, 0.8)",color:R?"#1e3a8a":"#64748b",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.875rem"},children:"\ucca8\uc0ad \ub0b4\uc6a9"})]})]})}),(0,d.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(30, 58, 138, 0.2)",border:"1px solid rgba(59, 130, 246, 0.2)",position:"relative",overflow:"auto"},children:[!c&&(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",flexDirection:"column",gap:"1rem"},children:[(0,d.jsx)("div",{style:{width:"40px",height:"40px",border:"4px solid #e2e8f0",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,d.jsx)("span",{style:{color:"#6b7280",fontSize:"1rem"},children:"\ud559\uc0dd \ud544\uae30 \ub85c\ub529 \uc911..."})]}),c&&(0,d.jsxs)("div",{style:{position:"relative"},children:[(0,d.jsx)("canvas",{ref:a,style:{border:"2px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",backgroundColor:"white",display:"block",position:"relative",zIndex:1}}),(0,d.jsx)("canvas",{ref:o,style:{position:"absolute",top:0,left:0,cursor:"pen"===f||"highlighter"===f?"crosshair":"grab",borderRadius:"8px",zIndex:2,backgroundColor:"transparent",pointerEvents:"auto"},onMouseDown:O,onMouseMove:H,onMouseUp:U,onMouseLeave:U,onTouchStart:O,onTouchMove:H,onTouchEnd:U})]})]})]}),(0,d.jsxs)("div",{style:{width:"350px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"1.5rem",margin:"1rem",boxShadow:"0 4px 12px rgba(30, 58, 138, 0.2)",border:"1px solid rgba(59, 130, 246, 0.2)",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:{color:"#1e3a8a",fontSize:"1.1rem",fontWeight:"bold",margin:"0 0 0.5rem 0",fontFamily:"var(--font-title)"},children:"\ud559\uc0dd \uc815\ubcf4"}),(0,d.jsxs)("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"1rem",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[(0,d.jsxs)("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",color:"#64748b"},children:[(0,d.jsx)("strong",{children:"\uc774\ub984:"})," ",n.studentName]}),(0,d.jsxs)("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",color:"#64748b"},children:[(0,d.jsx)("strong",{children:"\uad50\uc7ac:"})," ",n.bookTitle]}),(0,d.jsxs)("p",{style:{margin:"0",fontSize:"0.9rem",color:"#64748b"},children:[(0,d.jsx)("strong",{children:"\uc81c\ucd9c\uc77c:"})," ",new Date(n.submittedAt).toLocaleString("ko-KR")]})]})]}),n.audioUrl&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:{color:"#1e3a8a",fontSize:"1.1rem",fontWeight:"bold",margin:"0 0 0.5rem 0",fontFamily:"var(--font-title)"},children:"\ud559\uc0dd \ub179\uc74c"}),(0,d.jsxs)("div",{style:{background:"rgba(16, 185, 129, 0.1)",padding:"1rem",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[(0,d.jsx)("audio",{ref:l,src:n.audioUrl,onTimeUpdate:()=>{const e=l.current;e&&D(e.currentTime)},onLoadedMetadata:()=>{const e=l.current;e&&N(e.duration)},onEnded:()=>{I(!1),D(0)},style:{display:"none"}}),(0,d.jsxs)("button",{onClick:()=>{const e=l.current;e&&(P?(e.pause(),I(!1)):(e.play(),I(!0)))},style:{background:P?"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)":"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 1rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",justifyContent:"center",marginBottom:"1rem"},children:[(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:P?(0,d.jsx)("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"}):(0,d.jsx)("path",{d:"M8 5v14l11-7z"})}),P?"\uc77c\uc2dc\uc815\uc9c0":"\uc7ac\uc0dd"]}),(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"#64748b",marginBottom:"0.5rem"},children:[(0,d.jsx)("span",{children:G(L)}),(0,d.jsx)("span",{children:G(F)})]}),(0,d.jsx)("div",{style:{width:"100%",height:"4px",background:"#e5e7eb",borderRadius:"2px",overflow:"hidden"},children:(0,d.jsx)("div",{style:{width:"".concat(F>0?L/F*100:0,"%"),height:"100%",background:"linear-gradient(90deg, #10b981, #059669)",transition:"width 0.1s ease"}})})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:{color:"#1e3a8a",fontSize:"1.1rem",fontWeight:"bold",margin:"0 0 0.5rem 0",fontFamily:"var(--font-title)"},children:"\ucca8\uc0ad \ud604\ud669"}),(0,d.jsxs)("div",{style:{background:"rgba(139, 92, 246, 0.1)",padding:"1rem",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[(0,d.jsxs)("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",color:"#64748b"},children:[(0,d.jsx)("strong",{children:"\ucca8\uc0ad \ud69f\uc218:"})," ",C.length,"\uac1c"]}),(0,d.jsxs)("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",color:"#64748b"},children:[(0,d.jsx)("strong",{children:"\ud559\uc0dd \ud544\uae30:"})," ",(null===(t=n.strokeData)||void 0===t?void 0:t.length)||0,"\uac1c"]}),(0,d.jsxs)("p",{style:{margin:"0",fontSize:"0.9rem",color:"#64748b"},children:[(0,d.jsx)("strong",{children:"\ub179\uc74c:"})," ",n.audioUrl?"\uc788\uc74c":"\uc5c6\uc74c"]})]})]})]})]}),(0,d.jsx)("style",{jsx:!0,children:"\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})]}):(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%)"},children:(0,d.jsxs)("div",{style:{textAlign:"center",color:"#64748b"},children:[(0,d.jsx)("h2",{children:"\uc81c\ucd9c\ubb3c\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694"}),(0,d.jsx)("p",{children:"\ud559\uc0dd \uc81c\ucd9c\ubb3c \ubaa9\ub85d\uc5d0\uc11c \ucca8\uc0ad\ud560 \uacfc\uc81c\ub97c \uc120\ud0dd\ud558\uc138\uc694."})]})})},Nm=e=>{let{feedback:t,onBackToStudentPage:n}=e;const r=(0,i.useRef)(null),[s,a]=((0,i.useRef)(null),(0,i.useRef)(null),(0,i.useState)(!1)),[o,l]=(0,i.useState)(1),[c,h]=(0,i.useState)(!0),[u,p]=(0,i.useState)(!0),[f,g]=(0,i.useState)(!1),[m,v]=(0,i.useState)(0),[b,x]=(0,i.useState)(0),y=(0,i.useCallback)(()=>{const e=document.createElement("canvas"),n=e.getContext("2d");return e.width=800,e.height=1e3,n.fillStyle="#ffffff",n.fillRect(0,0,e.width,e.height),n.fillStyle="#1e3a8a",n.font="bold 24px Arial",n.textAlign="center",n.fillText((null===t||void 0===t?void 0:t.bookTitle)||"\uc18c\ub9c8 \ud504\ub9ac\ubbf8\uc5b4 \uad50\uc7ac",e.width/2,50),n.fillStyle="#64748b",n.font="16px Arial",n.textAlign="left",n.fillText("\ud559\uc0dd: ".concat((null===t||void 0===t?void 0:t.studentName)||"\uae40\ud559\uc0dd"),50,100),n.fillStyle="#374151",n.font="18px Arial",n.fillText("\ubb38\uc81c 1. \ub2e4\uc74c \uc218\uc2dd\uc744 \uacc4\uc0b0\ud558\uc2dc\uc624.",50,150),n.fillText("2x + 3y = 12",50,180),n.fillText("x - y = 1",50,210),c&&(n.strokeStyle="#6b7280",n.lineWidth=3,n.lineCap="round",n.lineJoin="round",n.beginPath(),n.moveTo(100,250),n.lineTo(200,250),n.stroke(),n.beginPath(),n.moveTo(100,280),n.lineTo(300,280),n.stroke(),n.fillStyle="#6b7280",n.font="16px Arial",n.fillText("x = 3, y = 2",100,320)),u&&(n.strokeStyle="#ef4444",n.lineWidth=2,n.lineCap="round",n.lineJoin="round",n.beginPath(),n.moveTo(95,245),n.lineTo(205,245),n.stroke(),n.beginPath(),n.moveTo(95,275),n.lineTo(305,275),n.stroke(),n.fillStyle="#ef4444",n.font="bold 14px Arial",n.fillText("\u2713 \uc815\ub2f5\uc785\ub2c8\ub2e4!",320,320),n.fillStyle="#374151",n.font="18px Arial",n.fillText("\ubb38\uc81c 2. \uadf8\ub798\ud504\ub97c \uadf8\ub9ac\uc2dc\uc624.",50,400),c&&(n.strokeStyle="#6b7280",n.lineWidth=2,n.beginPath(),n.moveTo(100,500),n.lineTo(300,500),n.moveTo(200,400),n.lineTo(200,600),n.stroke(),n.fillStyle="#6b7280",n.font="14px Arial",n.fillText("x",310,500),n.fillText("y",200,390)),n.strokeStyle="#ef4444",n.lineWidth=3,n.beginPath(),n.moveTo(95,495),n.lineTo(305,495),n.moveTo(195,395),n.lineTo(195,605),n.stroke(),n.fillStyle="#ef4444",n.font="bold 14px Arial",n.fillText("\uc88b\uc2b5\ub2c8\ub2e4! \uc88c\ud45c\ucd95\uc744 \uc815\ud655\ud788 \uadf8\ub838\ub124\uc694.",320,520),n.fillStyle="#3b82f6",n.font="16px Arial",n.fillText("\ud83d\udca1 \ud301: \uadf8\ub798\ud504\uc5d0 \ub208\uae08\uc744 \ud45c\uc2dc\ud558\uba74 \ub354 \uc88b\uaca0\uc5b4\uc694!",50,650),n.fillStyle="#10b981",n.font="bold 18px Arial",n.fillText("\uc804\uccb4\uc801\uc73c\ub85c \uc798\ud588\uc5b4\uc694! \uacc4\uc18d \uc5f4\uc2ec\ud788 \ud574\uc8fc\uc138\uc694!",50,700)),e.toDataURL()},[t,c,u]);(0,i.useEffect)(()=>{if(t){a(!1);const e=y(),t=new Image;t.onload=()=>{a(!0),w(t)},t.src=e}},[t,y]);const w=(0,i.useCallback)(e=>{const t=r.current;if(t&&e){const n=o||1,i=e.width*n,r=e.height*n;t.width=i,t.height=r;const s=t.getContext("2d");s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.drawImage(e,0,0,i,r)}},[o]);(0,i.useEffect)(()=>{if(s&&t){const e=y(),t=new Image;t.onload=()=>{w(t)},t.src=e}},[o,s,t,y,w]);return t?(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%)",fontFamily:"var(--font-body)"},children:[(0,d.jsx)("header",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"2px solid rgba(16, 185, 129, 0.3)",padding:"1rem 2rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.2)"},children:(0,d.jsx)("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,d.jsx)("button",{onClick:n,style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease"},children:"\u2190 \ud559\uc2b5 \ud398\uc774\uc9c0\ub85c"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{style:{color:"#1e3a8a",fontSize:"1.5rem",fontWeight:"bold",fontFamily:"var(--font-title)",margin:"0 0 0.25rem 0"},children:"\uc120\uc0dd\ub2d8 \ucca8\uc0ad \ud655\uc778"}),(0,d.jsx)("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0",fontFamily:"var(--font-body)"},children:t.bookTitle})]})]})})}),(0,d.jsxs)("div",{style:{display:"flex",height:"calc(100vh - 80px)",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%)"},children:[(0,d.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"1rem"},children:[(0,d.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.2)"},children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"rgba(16, 185, 129, 0.1)",padding:"0.5rem",borderRadius:"8px"},children:[(0,d.jsx)("button",{onClick:()=>{l(e=>Math.max(e-.2,.5))},disabled:o<=.5,style:{padding:"0.25rem",borderRadius:"6px",border:"1px solid rgba(16, 185, 129, 0.3)",background:o<=.5?"rgba(156, 163, 175, 0.3)":"rgba(255, 255, 255, 0.8)",color:o<=.5?"#9ca3af":"#10b981",cursor:o<=.5?"not-allowed":"pointer",transition:"all 0.2s ease"},children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 13H5v-2h14v2z"})})}),(0,d.jsxs)("span",{style:{fontSize:"0.875rem",color:"#1e3a8a",fontFamily:"var(--font-ui)",minWidth:"60px",textAlign:"center"},children:[Math.round(100*o),"%"]}),(0,d.jsx)("button",{onClick:()=>{l(e=>Math.min(e+.2,3))},disabled:o>=3,style:{padding:"0.25rem",borderRadius:"6px",border:"1px solid rgba(16, 185, 129, 0.3)",background:o>=3?"rgba(156, 163, 175, 0.3)":"rgba(255, 255, 255, 0.8)",color:o>=3?"#9ca3af":"#10b981",cursor:o>=3?"not-allowed":"pointer",transition:"all 0.2s ease"},children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})})]}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)("button",{onClick:()=>h(!c),style:{padding:"0.5rem",borderRadius:"8px",border:c?"2px solid #10b981":"2px solid rgba(16, 185, 129, 0.3)",background:c?"rgba(16, 185, 129, 0.2)":"rgba(255, 255, 255, 0.8)",color:c?"#10b981":"#64748b",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.875rem"},children:"\ub0b4 \ud544\uae30"}),(0,d.jsx)("button",{onClick:()=>p(!u),style:{padding:"0.5rem",borderRadius:"8px",border:u?"2px solid #ef4444":"2px solid rgba(239, 68, 68, 0.3)",background:u?"rgba(239, 68, 68, 0.2)":"rgba(255, 255, 255, 0.8)",color:u?"#ef4444":"#64748b",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.875rem"},children:"\uc120\uc0dd\ub2d8 \ucca8\uc0ad"})]})]})}),(0,d.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.2)",position:"relative",overflow:"auto"},children:[!s&&(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",flexDirection:"column",gap:"1rem"},children:[(0,d.jsx)("div",{style:{width:"40px",height:"40px",border:"4px solid #e2e8f0",borderTop:"4px solid #10b981",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,d.jsx)("span",{style:{color:"#6b7280",fontSize:"1rem"},children:"\ucca8\uc0ad \ub85c\ub529 \uc911..."})]}),s&&(0,d.jsx)("canvas",{ref:r,style:{border:"2px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",backgroundColor:"white",display:"block",position:"relative",zIndex:1}})]})]}),(0,d.jsxs)("div",{style:{width:"350px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"1.5rem",margin:"1rem",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.2)",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:{color:"#1e3a8a",fontSize:"1.1rem",fontWeight:"bold",margin:"0 0 0.5rem 0",fontFamily:"var(--font-title)"},children:"\ucca8\uc0ad \uc815\ubcf4"}),(0,d.jsxs)("div",{style:{background:"rgba(16, 185, 129, 0.1)",padding:"1rem",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[(0,d.jsxs)("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",color:"#64748b"},children:[(0,d.jsx)("strong",{children:"\uad50\uc7ac:"})," ",t.bookTitle]}),(0,d.jsxs)("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",color:"#64748b"},children:[(0,d.jsx)("strong",{children:"\ucca8\uc0ad\uc77c:"})," ",new Date(t.timestamp).toLocaleString("ko-KR")]}),(0,d.jsxs)("p",{style:{margin:"0",fontSize:"0.9rem",color:"#64748b"},children:[(0,d.jsx)("strong",{children:"\uc120\uc0dd\ub2d8:"})," ",t.teacherName]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:{color:"#1e3a8a",fontSize:"1.1rem",fontWeight:"bold",margin:"0 0 0.5rem 0",fontFamily:"var(--font-title)"},children:"\ub808\uc774\uc5b4 \uc124\uba85"}),(0,d.jsxs)("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"1rem",borderRadius:"8px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,d.jsx)("div",{style:{width:"20px",height:"3px",background:"#6b7280",borderRadius:"2px"}}),(0,d.jsx)("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:"\ub0b4 \ud544\uae30"})]}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)("div",{style:{width:"20px",height:"3px",background:"#ef4444",borderRadius:"2px"}}),(0,d.jsx)("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:"\uc120\uc0dd\ub2d8 \ucca8\uc0ad"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{style:{color:"#1e3a8a",fontSize:"1.1rem",fontWeight:"bold",margin:"0 0 0.5rem 0",fontFamily:"var(--font-title)"},children:"\ud53c\ub4dc\ubc31 \uc694\uc57d"}),(0,d.jsxs)("div",{style:{background:"rgba(139, 92, 246, 0.1)",padding:"1rem",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.2)"},children:[(0,d.jsxs)("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",color:"#64748b"},children:[(0,d.jsx)("strong",{children:"\uc815\ub2f5:"})," \u2713 \ub9de\uc2b5\ub2c8\ub2e4!"]}),(0,d.jsxs)("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",color:"#64748b"},children:[(0,d.jsx)("strong",{children:"\uadf8\ub798\ud504:"})," \uc798 \uadf8\ub838\uc5b4\uc694!"]}),(0,d.jsxs)("p",{style:{margin:"0",fontSize:"0.9rem",color:"#64748b"},children:[(0,d.jsx)("strong",{children:"\uc804\uccb4:"})," \uacc4\uc18d \uc5f4\uc2ec\ud788 \ud574\uc8fc\uc138\uc694!"]})]})]})]})]}),(0,d.jsx)("style",{jsx:!0,children:"\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})]}):(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%)"},children:(0,d.jsxs)("div",{style:{textAlign:"center",color:"#64748b"},children:[(0,d.jsx)("h2",{children:"\ucca8\uc0ad\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694"}),(0,d.jsx)("p",{children:"\uc120\uc0dd\ub2d8\uc774 \ubcf4\ub0b4\uc8fc\uc2e0 \ucca8\uc0ad\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]})})},Bm=e=>{let{problem:t,width:n=400,height:i=300}=e;const r={"\ub2e4\ud56d\uc2dd":{title:"\uac1c\ub150\uc720\ud615 1) \ub2e4\ud56d\uc2dd\uc758 \uc5f0\uc0b0",content:"\ub2e4\uc74c \ub2e4\ud56d\uc2dd\uc744 \uacc4\uc0b0\ud558\uc2dc\uc624.\n      \n      (1) (3x\xb2 + 2x - 1) + (2x\xb2 - 3x + 4)\n      (2) (x + 2)(x - 3)\n      (3) (2x + 1)\xb2",answer:"(1) 5x\xb2 - x + 3  (2) x\xb2 - x - 6  (3) 4x\xb2 + 4x + 1"},"\uc774\ucc28\ubc29\uc815\uc2dd":{title:"\uac1c\ub150\uc720\ud615 2) \uc774\ucc28\ubc29\uc815\uc2dd\uc758 \ud574",content:"\ub2e4\uc74c \uc774\ucc28\ubc29\uc815\uc2dd\uc744 \ud480\uc5b4\ub77c.\n      \n      (1) x\xb2 - 5x + 6 = 0\n      (2) 2x\xb2 + 7x + 3 = 0\n      (3) x\xb2 - 4 = 0",answer:"(1) x = 2, 3  (2) x = -3, -1/2  (3) x = \xb12"},"\ud568\uc218":{title:"\uac1c\ub150\uc720\ud615 3) \uc77c\ucc28\ud568\uc218\uc640 \uc774\ucc28\ud568\uc218",content:"\ub2e4\uc74c \ud568\uc218\uc758 \uadf8\ub798\ud504\ub97c \uadf8\ub9ac\uace0 \uc131\uc9c8\uc744 \uc124\uba85\ud558\uc2dc\uc624.\n      \n      (1) f(x) = 2x + 3\n      (2) g(x) = x\xb2 - 4x + 3\n      (3) h(x) = -x\xb2 + 2x + 1",answer:"(1) \uae30\uc6b8\uae30 2, y\uc808\ud3b8 3  (2) \uaf2d\uc9d3\uc810 (2, -1)  (3) \uaf2d\uc9d3\uc810 (1, 2)"},"\uae30\ud558":{title:"\uac1c\ub150\uc720\ud615 4) \ud3c9\uba74\ub3c4\ud615\uc758 \uc131\uc9c8",content:"\ub2e4\uc74c \ub3c4\ud615\uc758 \ub113\uc774\ub97c \uad6c\ud558\uc2dc\uc624.\n      \n      (1) \ubc18\uc9c0\ub984\uc774 5cm\uc778 \uc6d0\uc758 \ub113\uc774\n      (2) \ubc11\ubcc0\uc774 8cm, \ub192\uc774\uac00 6cm\uc778 \uc0bc\uac01\ud615\uc758 \ub113\uc774\n      (3) \uac00\ub85c 10cm, \uc138\ub85c 7cm\uc778 \uc9c1\uc0ac\uac01\ud615\uc758 \ub113\uc774",answer:"(1) 25\u03c0 cm\xb2  (2) 24 cm\xb2  (3) 70 cm\xb2"},"\ud655\ub960":{title:"\uac1c\ub150\uc720\ud615 5) \ud655\ub960\uacfc \ud1b5\uacc4",content:"\ub2e4\uc74c \ud655\ub960\uc744 \uad6c\ud558\uc2dc\uc624.\n      \n      (1) \uc8fc\uc0ac\uc704\ub97c \ud55c \ubc88 \ub358\uc838\uc11c 3\uc774 \ub098\uc62c \ud655\ub960\n      (2) \ub3d9\uc804\uc744 \ub450 \ubc88 \ub358\uc838\uc11c \ubaa8\ub450 \uc55e\uba74\uc774 \ub098\uc62c \ud655\ub960\n      (3) 1\ubd80\ud130 10\uae4c\uc9c0\uc758 \uc218 \uc911\uc5d0\uc11c 3\uc758 \ubc30\uc218\ub97c \ubf51\uc744 \ud655\ub960",answer:"(1) 1/6  (2) 1/4  (3) 3/10"}},s=r[t.type]||r["\ub2e4\ud56d\uc2dd"];return(0,d.jsxs)("div",{style:{width:n,height:i,background:"white",border:"2px solid #e5e7eb",borderRadius:"12px",padding:"20px",fontFamily:"AppleMyungjo, serif",fontSize:"14px",lineHeight:"1.6",color:"#374151",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden"},children:[(0,d.jsx)("div",{style:{position:"absolute",top:"8px",right:"12px",fontSize:"10px",color:"#9ca3af",fontWeight:"500"},children:"\uc911\ud559\uad50 \uc218\ud559 2-1"}),(0,d.jsx)("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#1f2937",marginBottom:"16px",paddingBottom:"8px",borderBottom:"2px solid #3b82f6"},children:s.title}),(0,d.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"12px",fontWeight:"500"},children:[t.page,"\ucabd ",t.number,"\ubc88"]}),(0,d.jsx)("div",{style:{fontSize:"13px",lineHeight:"1.8",marginBottom:"16px",whiteSpace:"pre-line"},children:s.content}),(0,d.jsxs)("div",{style:{background:"#f8fafc",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"12px",fontFamily:"monospace",marginBottom:"12px"},children:[(0,d.jsx)("div",{style:{marginBottom:"8px",fontWeight:"bold",color:"#374151"},children:"\uc608\uc2dc \uc218\uc2dd:"}),(0,d.jsx)("div",{style:{color:"#1e40af"},children:"x\xb2 + 2x + 1 = (x + 1)\xb2"}),(0,d.jsx)("div",{style:{color:"#dc2626",marginTop:"4px"},children:"f(x) = ax\xb2 + bx + c"})]}),(0,d.jsxs)("div",{style:{position:"absolute",bottom:"8px",right:"12px",fontSize:"10px",color:"#9ca3af",fontStyle:"italic"},children:["\uc815\ub2f5: ",s.answer]}),(0,d.jsx)("div",{style:{position:"absolute",bottom:"8px",left:"12px",fontSize:"10px",color:"#9ca3af"},children:t.page})]})},zm=[{id:"bk1",title:"\uc9111 1\ud559\uae30 2022\uac1c\uc815 \uc218\ud559 \uac1c\ub150 \uc9c4\ub3c4\ubd81_1\ub2e8\uc6d0_\ub2e8\uc6d0TEST"},{id:"bk2",title:"\uc9111 2\ud559\uae30 2022\uac1c\uc815 \uc218\ud559 \uac1c\ub150 \uc9c4\ub3c4\ubd81_2\ub2e8\uc6d0_\ub2e8\uc6d0TEST"},{id:"bk3",title:"\uc9112 1\ud559\uae30 2022\uac1c\uc815 \uc218\ud559 \uac1c\ub150 \uc9c4\ub3c4\ubd81_1\ub2e8\uc6d0_\ub2e8\uc6d0TEST"},{id:"bk4",title:"\uc0ac\uace0\ub825 \uc5f0\uc0b0 \uc9c0\ub3c4\uc0ac \uacfc\uc815 1 (M1)"}],Wm=Array.from({length:40}).map((e,t)=>(t+1).toString().padStart(4,"0")),Om={id:"p-0023-0001",pageNo:"0023",problemNo:"0001",imageUrl:"https://placehold.co/640x260/ffffff/374151?text=01+\ub2e4\uc74c+\uc911+\uc18c\uc218\ub294+\uba87+\uac1c\uc778\uc9c0+\uad6c\ud558\uc2dc\uc624.%0A%0A2%2C+9%2C+14%2C+23%2C+34%2C+47%2C+81",promptText:"\ub2e4\uc74c \uc911 \uc18c\uc218\ub294 \uba87 \uac1c\uc778\uc9c0 \uad6c\ud558\uc2dc\uc624. 2, 9, 14, 23, 34, 47, 81",type:"\uc18c\uc218"};function Hm(){var e,t,n,r,s,a,o,l,h;const[u,p]=(0,i.useState)(1),[f,g]=(0,i.useState)(zm[0].id),[m,v]=(0,i.useState)(["0023"]),[b,x]=(0,i.useState)((()=>{const e=[],t=[{type:"\ub2e4\ud56d\uc2dd",imageText:"\uac1c\ub150\uc720\ud615+1)+\ub2e4\ud56d\uc2dd\uc758+\uc5f0\uc0b0%0A%0A(3x\xb2+%2B+2x+-+1)+%2B+(2x\xb2+-+3x+%2B+4)",promptText:"\uac1c\ub150\uc720\ud615 1) \ub2e4\ud56d\uc2dd\uc758 \uc5f0\uc0b0 (3x\xb2 + 2x - 1) + (2x\xb2 - 3x + 4)"},{type:"\uc774\ucc28\ubc29\uc815\uc2dd",imageText:"\uac1c\ub150\uc720\ud615+2)+\uc774\ucc28\ubc29\uc815\uc2dd\uc758+\ud574%0A%0Ax\xb2+-+5x+%2B+6+%3D+0",promptText:"\uac1c\ub150\uc720\ud615 2) \uc774\ucc28\ubc29\uc815\uc2dd\uc758 \ud574 x\xb2 - 5x + 6 = 0"},{type:"\ud568\uc218",imageText:"\uac1c\ub150\uc720\ud615+3)+\uc77c\ucc28\ud568\uc218\uc640+\uc774\ucc28\ud568\uc218%0A%0Af(x)+%3D+2x+%2B+3",promptText:"\uac1c\ub150\uc720\ud615 3) \uc77c\ucc28\ud568\uc218\uc640 \uc774\ucc28\ud568\uc218 f(x) = 2x + 3"},{type:"\uae30\ud558",imageText:"\uac1c\ub150\uc720\ud615+4)+\ud3c9\uba74\ub3c4\ud615\uc758+\uc131\uc9c8%0A%0A\ubc18\uc9c0\ub984\uc774+5cm\uc778+\uc6d0\uc758+\ub113\uc774",promptText:"\uac1c\ub150\uc720\ud615 4) \ud3c9\uba74\ub3c4\ud615\uc758 \uc131\uc9c8 \ubc18\uc9c0\ub984\uc774 5cm\uc778 \uc6d0\uc758 \ub113\uc774"},{type:"\ud655\ub960",imageText:"\uac1c\ub150\uc720\ud615+5)+\ud655\ub960\uacfc+\ud1b5\uacc4%0A%0A\uc8fc\uc0ac\uc704\ub97c+\ud55c+\ubc88+\ub358\uc838\uc11c+3\uc774+\ub098\uc62c+\ud655\ub960",promptText:"\uac1c\ub150\uc720\ud615 5) \ud655\ub960\uacfc \ud1b5\uacc4 \uc8fc\uc0ac\uc704\ub97c \ud55c \ubc88 \ub358\uc838\uc11c 3\uc774 \ub098\uc62c \ud655\ub960"}];for(let n=1;n<=100;n++){const i=(20+Math.floor(n/5)).toString().padStart(4,"0"),r=n.toString().padStart(4,"0"),s=t[n%t.length];e.push({id:"p-".concat(i,"-").concat(r),pageNo:i,problemNo:r,imageUrl:"https://placehold.co/640x260/ffffff/374151?text=".concat(s.imageText),promptText:s.promptText,type:s.type})}return e})()),[y,w]=(0,i.useState)("p-0020-0001"),[k,S]=(0,i.useState)(!1),[_,A]=(0,i.useState)({}),[C,M]=(0,i.useState)(0),[E,T]=(0,i.useState)(!1),R=b.find(e=>e.id===y)||b[0],j={background:"#ffffff",borderRadius:"12px",padding:"24px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.05)",border:"1px solid rgba(226, 232, 240, 0.8)",transition:"all 0.3s ease"},P={padding:"12px 24px",borderRadius:"12px",border:"none",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"600",fontFamily:"NanumSquare, sans-serif",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)"},I=c(c({},P),{},{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",boxShadow:"0 8px 25px rgba(102, 126, 234, 0.4)"}),L=c(c({},P),{},{background:"rgba(255, 255, 255, 0.9)",color:"#667eea",border:"2px solid rgba(102, 126, 234, 0.3)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)"});return(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 50%, #f1f5f9 100%)",fontFamily:'NanumSquare, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:[(0,d.jsx)("header",{style:{position:"sticky",top:0,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(226, 232, 240, 0.8)",zIndex:100,padding:"1rem 0"},children:(0,d.jsx)("div",{style:{maxWidth:"1280px",margin:"0 auto",padding:"0 16px"},children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"20px",padding:"16px 0",flexWrap:"wrap"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,d.jsx)("button",{onClick:()=>p(1),style:{width:"32px",height:"32px",borderRadius:"8px",border:"1px solid #e5e7eb",background:"white",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"#667eea"},onMouseEnter:e=>{e.target.style.background="#f8fafc",e.target.style.borderColor="#667eea"},onMouseLeave:e=>{e.target.style.background="white",e.target.style.borderColor="#e5e7eb"},children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),(0,d.jsx)("div",{style:{padding:"8px 0px",color:"#667eea",fontWeight:"800",fontFamily:"NanumSquare, sans-serif",maxWidth:"400px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:null===(e=zm.find(e=>e.id===f))||void 0===e?void 0:e.title}),(0,d.jsxs)("div",{style:{padding:"8px 16px",background:"rgba(102, 126, 234, 0.1)",color:"#667eea",borderRadius:"12px",fontWeight:"600",border:"2px solid rgba(102, 126, 234, 0.2)"},children:["\ucd1d ",b.length,"\uac1c \ubb38\uc81c"]})]}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,d.jsx)("button",{onClick:async()=>{S(!0),M(0);const e=setInterval(()=>{M(t=>t>=100?(clearInterval(e),100):t+10)},300),t={};b.forEach(e=>{const n=(e=>{const t={"\uc18c\uc218":{"\uae30\ubcf8\uc815\ub2f5":"3","\ucd94\uac00\uc815\ub2f5":"\uc138 \uac1c, 03, 3\uac1c","\uac1c\ub150":"\uc18c\uc218\uc758 \uc815\uc758\uc640 \ud310\ubcc4\ubc95","\ud480\uc774\uc804\ub7b5":"\uc8fc\uc5b4\uc9c4 \uc218\ub4e4\uc744 \ud558\ub098\uc529 \ud655\uc778\ud558\uc5ec \uc18c\uc218\uc778\uc9c0 \ud310\ubcc4\ud55c\ub2e4. \uc18c\uc218\ub294 1\uacfc \uc790\uae30 \uc790\uc2e0\uc73c\ub85c\ub9cc \ub098\ub204\uc5b4\ub5a8\uc5b4\uc9c0\ub294 \uc218\uc774\ub2e4.","\ud480\uc774\uacfc\uc815":"2: \uc18c\uc218 (1\uacfc 2\ub85c\ub9cc \ub098\ub204\uc5b4\ub5a8\uc5b4\uc9d0)\n9: \ud569\uc131\uc218 (3\xd73)\n14: \ud569\uc131\uc218 (2\xd77)\n23: \uc18c\uc218 (1\uacfc 23\uc73c\ub85c\ub9cc \ub098\ub204\uc5b4\ub5a8\uc5b4\uc9d0)\n34: \ud569\uc131\uc218 (2\xd717)\n47: \uc18c\uc218 (1\uacfc 47\ub85c\ub9cc \ub098\ub204\uc5b4\ub5a8\uc5b4\uc9d0)\n81: \ud569\uc131\uc218 (3\xd73\xd73\xd73)\n\n\ub530\ub77c\uc11c \uc18c\uc218\ub294 2, 23, 47\ub85c \ucd1d 3\uac1c\uc774\ub2e4."},"\ubc29\uc815\uc2dd":{"\uae30\ubcf8\uc815\ub2f5":"4","\ucd94\uac00\uc815\ub2f5":"x=4","\uac1c\ub150":"\uc77c\ucc28\ubc29\uc815\uc2dd\uc758 \ud480\uc774\ubc95","\ud480\uc774\uc804\ub7b5":"\ub4f1\uc2dd\uc758 \uc131\uc9c8\uc744 \uc774\uc6a9\ud558\uc5ec \ubbf8\uc9c0\uc218\ub97c \uad6c\ud55c\ub2e4. \uc591\ubcc0\uc5d0 \uac19\uc740 \uc218\ub97c \ub354\ud558\uac70\ub098 \ube7c\uac70\ub098 \uacf1\ud558\uac70\ub098 \ub098\ub20c \uc218 \uc788\ub2e4.","\ud480\uc774\uacfc\uc815":"2x + 5 = 13\n2x = 13 - 5 (\uc591\ubcc0\uc5d0\uc11c 5 \ube7c\uae30)\n2x = 8\nx = 4 (\uc591\ubcc0\uc744 2\ub85c \ub098\ub204\uae30)\n\n\ub530\ub77c\uc11c x = 4\uc774\ub2e4."},"\uae30\ud558":{"\uae30\ubcf8\uc815\ub2f5":"12","\ucd94\uac00\uc815\ub2f5":"12cm\xb2, 12\uc81c\uacf1\uc13c\ud2f0\ubbf8\ud130","\uac1c\ub150":"\uc0bc\uac01\ud615\uc758 \ub113\uc774 \uacf5\uc2dd","\ud480\uc774\uc804\ub7b5":"\uc0bc\uac01\ud615\uc758 \ub113\uc774\ub294 (\ubc11\ubcc0 \xd7 \ub192\uc774) \xf7 2 \uacf5\uc2dd\uc744 \uc0ac\uc6a9\ud55c\ub2e4.","\ud480\uc774\uacfc\uc815":"\uc0bc\uac01\ud615\uc758 \ub113\uc774 = (\ubc11\ubcc0 \xd7 \ub192\uc774) \xf7 2\n= (6 \xd7 4) \xf7 2\n= 24 \xf7 2\n= 12\n\n\ub530\ub77c\uc11c \uc0bc\uac01\ud615\uc758 \ub113\uc774\ub294 12cm\xb2\uc774\ub2e4."},"\ubd84\uc218":{"\uae30\ubcf8\uc815\ub2f5":"2/3","\ucd94\uac00\uc815\ub2f5":"\u2154","\uac1c\ub150":"\uae30\uc57d\ubd84\uc218\uc640 \uc57d\ubd84","\ud480\uc774\uc804\ub7b5":"\ubd84\uc790\uc640 \ubd84\ubaa8\uc758 \ucd5c\ub300\uacf5\uc57d\uc218\ub85c \ub098\ub204\uc5b4 \uae30\uc57d\ubd84\uc218\ub85c \ub9cc\ub4e0\ub2e4.","\ud480\uc774\uacfc\uc815":"12/18\uc758 \ubd84\uc790\uc640 \ubd84\ubaa8\uc758 \ucd5c\ub300\uacf5\uc57d\uc218\ub294 6\uc774\ub2e4.\n12 \xf7 6 = 2\n18 \xf7 6 = 3\n\n\ub530\ub77c\uc11c 12/18 = 2/3\uc774\ub2e4."},"\ube44\ub840":{"\uae30\ubcf8\uc815\ub2f5":"9","\ucd94\uac00\uc815\ub2f5":"x=9","\uac1c\ub150":"\ube44\ub840\uc2dd\uc758 \uc131\uc9c8","\ud480\uc774\uc804\ub7b5":"\ube44\ub840\uc2dd\uc5d0\uc11c \ub0b4\ud56d\uc758 \uacf1\uacfc \uc678\ud56d\uc758 \uacf1\uc774 \uac19\ub2e4\ub294 \uc131\uc9c8\uc744 \uc774\uc6a9\ud55c\ub2e4.","\ud480\uc774\uacfc\uc815":"3:4 = x:12\n\ub0b4\ud56d\uc758 \uacf1 = 4 \xd7 x = 4x\n\uc678\ud56d\uc758 \uacf1 = 3 \xd7 12 = 36\n4x = 36\nx = 9\n\n\ub530\ub77c\uc11c x = 9\uc774\ub2e4."}};return t[e]||t.\uc18c\uc218})(e.type);t[e.id]=n}),await new Promise(e=>setTimeout(e,3e3)),A(e=>c(c({},e),t)),S(!1),M(0)},disabled:k,style:{background:k?"linear-gradient(135deg, #9ca3af 0%, #6b7280 100%)":"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"10px 20px",fontSize:"14px",fontWeight:"600",borderRadius:"20px",border:"none",cursor:k?"not-allowed":"pointer",boxShadow:k?"0 4px 15px rgba(156, 163, 175, 0.3)":"0 4px 15px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease",opacity:k?.7:1},children:k?"AI \ubd84\uc11d \uc911...":"AI \uc790\ub3d9 \ubd84\ub958"}),(0,d.jsx)("button",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"10px 20px",fontSize:"14px",fontWeight:"600",borderRadius:"20px",border:"none",cursor:"pointer",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)",transition:"all 0.3s ease"},children:"\uc800\uc7a5"}),(0,d.jsx)("button",{onClick:()=>T(!0),style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"10px 20px",fontSize:"14px",fontWeight:"600",borderRadius:"20px",border:"none",cursor:"pointer",boxShadow:"0 4px 15px rgba(16, 185, 129, 0.3)",transition:"all 0.3s ease"},children:"\uc644\ub8cc\ud558\uae30"})]})]})})}),(0,d.jsxs)("main",{style:{maxWidth:"1280px",margin:"0 auto",padding:"24px 16px"},children:[1===u&&(0,d.jsxs)("div",{style:j,children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[(0,d.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},children:"A"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{style:{fontSize:"24px",fontWeight:"800",margin:0,color:"#1f2937",fontFamily:"NanumSquare, sans-serif"},children:"\uad50\uc7ac \uc120\ud0dd"}),(0,d.jsx)("p",{style:{fontSize:"14px",color:"#6b7280",margin:"4px 0 0 0",fontFamily:"NanumSquare, sans-serif",fontWeight:"400"},children:"AI \ubd84\uc11d\uc744 \uc704\ud55c \uad50\uc7ac\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694"})]})]}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"20px",marginBottom:"24px"},children:zm.map(e=>(0,d.jsxs)("button",{onClick:()=>g(e.id),style:{textAlign:"left",padding:"24px",borderRadius:"16px",border:f===e.id?"3px solid #667eea":"2px solid rgba(102, 126, 234, 0.2)",background:f===e.id?"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)":"rgba(255, 255, 255, 0.9)",cursor:"pointer",boxShadow:f===e.id?"0 20px 40px rgba(102, 126, 234, 0.2)":"0 8px 25px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",transform:f===e.id?"translateY(-4px)":"translateY(0)"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[(0,d.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:"B"}),(0,d.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280",fontWeight:"400",fontFamily:"NanumSquare, sans-serif"},children:["ID: ",e.id]})]}),(0,d.jsx)("div",{style:{fontSize:"16px",fontWeight:"700",color:"#1f2937",lineHeight:"1.4",marginBottom:"8px",fontFamily:"NanumSquare, sans-serif"},children:e.title}),f===e.id&&(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#667eea",fontSize:"14px",fontWeight:"700",fontFamily:"NanumSquare, sans-serif"},children:[(0,d.jsx)("span",{children:"\u2713"}),(0,d.jsx)("span",{children:"\uc120\ud0dd\ub428"})]})]},e.id))}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)",borderRadius:"12px",marginBottom:"24px"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"4px",fontFamily:"NanumSquare, sans-serif",fontWeight:"400"},children:"\ud604\uc7ac \uc120\ud0dd\ub41c \uad50\uc7ac"}),(0,d.jsx)("div",{style:{fontSize:"16px",fontWeight:"700",color:"#1f2937",fontFamily:"NanumSquare, sans-serif"},children:null===(t=zm.find(e=>e.id===f))||void 0===t?void 0:t.title})]}),(0,d.jsx)("button",{onClick:()=>p(2),style:c(c({},I),{},{padding:"12px 24px",fontSize:"16px",display:"flex",alignItems:"center",gap:"8px"}),children:"\ub2e4\uc74c \ub2e8\uacc4: \ud398\uc774\uc9c0 \uc120\ud0dd \u2192"})]})]}),2===u&&(0,d.jsxs)("div",{style:j,children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[(0,d.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},children:"\ud83d\udcc4"}),(0,d.jsxs)("div",{style:{flex:1},children:[(0,d.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:0,color:"#1f2937"},children:"\ud398\uc774\uc9c0 \uc120\ud0dd"}),(0,d.jsx)("p",{style:{fontSize:"14px",color:"#6b7280",margin:"4px 0 0 0"},children:"AI \ubd84\uc11d\ud560 \ud398\uc774\uc9c0\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694 (\ucd5c\ub300 20\uc7a5)"})]}),(0,d.jsxs)("div",{style:{padding:"12px 20px",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)",borderRadius:"12px",fontSize:"16px",fontWeight:"600",color:"#667eea"},children:[m.length," / 20 \uc120\ud0dd\ub428"]})]}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:"12px",marginBottom:"24px"},children:Wm.map(e=>{const t=m.includes(e);return(0,d.jsxs)("button",{onClick:()=>(e=>{v(t=>{if(t.includes(e))return t.filter(t=>t!==e);const n=[...t,e];return n.length>20?t:n})})(e),style:{padding:"16px 8px",borderRadius:"12px",border:t?"3px solid #667eea":"2px solid rgba(102, 126, 234, 0.2)",fontSize:"14px",fontWeight:"600",cursor:"pointer",background:t?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"rgba(255, 255, 255, 0.9)",color:t?"white":"#374151",boxShadow:t?"0 8px 25px rgba(102, 126, 234, 0.3)":"0 4px 15px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",transform:t?"translateY(-2px)":"translateY(0)"},children:[t&&(0,d.jsx)("span",{style:{marginRight:"4px"},children:"\u2713"}),e]},e)})}),(0,d.jsxs)("div",{style:{padding:"20px",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)",borderRadius:"12px",marginBottom:"24px"},children:[(0,d.jsx)("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"8px"},children:"\uc120\ud0dd\ub41c \ud398\uc774\uc9c0 \ubaa9\ub85d"}),(0,d.jsx)("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937",wordBreak:"break-all"},children:m.length>0?m.join(", "):"\uc120\ud0dd\ub41c \ud398\uc774\uc9c0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"space-between"},children:[(0,d.jsx)("button",{onClick:()=>p(1),style:c(c({},L),{},{padding:"12px 24px",fontSize:"16px",display:"flex",alignItems:"center",gap:"8px"}),children:"\u2190 \uc774\uc804 \ub2e8\uacc4"}),(0,d.jsx)("button",{onClick:()=>p(3),style:c(c({},I),{},{padding:"12px 24px",fontSize:"16px",display:"flex",alignItems:"center",gap:"8px"}),children:"\ub2e4\uc74c \ub2e8\uacc4: \ubb38\uc81c\ud3b8\uc9d1 \u2192"})]})]}),3===u&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"24px"},children:[(0,d.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},children:"\u270f\ufe0f"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:0,color:"#1f2937"},children:"\ubb38\uc81c\ud3b8\uc9d1 & AI \ubd84\uc11d"}),(0,d.jsx)("p",{style:{fontSize:"14px",color:"#6b7280",margin:"4px 0 0 0"},children:"\ubb38\uc81c\ub97c \ud3b8\uc9d1\ud558\uace0 AI\ub85c \uc790\ub3d9 \ubd84\ub958\ud574\ubcf4\uc138\uc694"})]})]}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr 1fr",gap:"20px",marginBottom:"24px"},children:[(0,d.jsxs)("div",{style:j,children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[(0,d.jsxs)("span",{style:{fontWeight:"600"},children:["\ubb38\uc81c \ubaa9\ub85d - \ucd1d ",b.length,"\uac74"]}),(0,d.jsx)("div",{onClick:()=>{const e=b.length+1,t=(23+Math.floor(e/2)).toString().padStart(4,"0"),n="p-".concat(t,"-").concat(e.toString().padStart(4,"0"));x(i=>[...i,c(c({},Om),{},{id:n,pageNo:t,problemNo:e.toString().padStart(4,"0")})])},style:{fontSize:"12px",color:"#667eea",fontWeight:"600",fontFamily:"NanumSquare, sans-serif",padding:"4px 8px",background:"rgba(102, 126, 234, 0.1)",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease"},children:"+ \ubb38\uc81c \ucd94\uac00"})]}),(0,d.jsx)("div",{style:{maxHeight:"400px",overflow:"auto"},children:(0,d.jsxs)("table",{style:{width:"100%",fontSize:"14px"},children:[(0,d.jsx)("thead",{style:{backgroundColor:"#f9fafb"},children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{style:{padding:"8px",textAlign:"left"},children:"No."}),(0,d.jsx)("th",{style:{padding:"8px",textAlign:"left"},children:"\ud398\uc774\uc9c0"}),(0,d.jsx)("th",{style:{padding:"8px",textAlign:"left"},children:"\ubb38\uc81c\ubc88\ud638"})]})}),(0,d.jsx)("tbody",{children:b.map((e,t)=>(0,d.jsxs)("tr",{style:{cursor:"pointer",backgroundColor:y===e.id?"#f3f4f6":"transparent"},onClick:()=>w(e.id),children:[(0,d.jsxs)("td",{style:{padding:"8px"},children:[(0,d.jsx)("input",{type:"checkbox",style:{marginRight:"8px"}}),t+1]}),(0,d.jsx)("td",{style:{padding:"8px",fontFamily:"monospace"},children:e.pageNo}),(0,d.jsx)("td",{style:{padding:"8px",fontFamily:"monospace"},children:e.problemNo})]},e.id))})]})})]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,d.jsxs)("div",{style:j,children:[(0,d.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:"\ubb38\uc81c \uc774\ubbf8\uc9c0"}),R?(0,d.jsx)(Bm,{problem:R,width:"100%",height:"300px"}):(0,d.jsx)("div",{style:{width:"100%",height:"300px",backgroundColor:"#f3f4f6",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280"},children:"\ubb38\uc81c\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694"})]}),(0,d.jsxs)("div",{style:j,children:[(0,d.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:"\ud574\uc124"}),(0,d.jsx)("textarea",{style:{width:"100%",height:"120px",border:"1px solid #d1d5db",borderRadius:"8px",padding:"8px",fontSize:"14px"},placeholder:"[\ud480\uc774] \uc18c\uc218\ub294 2, 23, 47\uc758 3\uac1c",defaultValue:"[\ud480\uc774] \uc18c\uc218\ub294 2, 23, 47\uc758 3\uac1c"})]})]}),(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:(0,d.jsxs)("div",{style:c(c({},j),{},{height:"605.38px",display:"flex",flexDirection:"column"}),children:[(0,d.jsxs)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,d.jsx)("span",{style:{fontSize:"12px",color:"#667eea",fontWeight:"600",fontFamily:"NanumSquare, sans-serif",padding:"4px 8px",background:"rgba(102, 126, 234, 0.1)",borderRadius:"6px"},children:"AI"}),(0,d.jsx)("span",{children:"\ubd84\ub958 \uacb0\uacfc"})]}),(0,d.jsxs)("div",{style:{flex:1,overflow:"auto"},children:[k&&(0,d.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"14px",color:"#667eea",fontWeight:"500"},children:[(0,d.jsx)("div",{style:{width:"16px",height:"16px",border:"2px solid #667eea",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"AI \ubd84\uc11d \uc911... ",C,"%"]}),(0,d.jsx)("div",{style:{width:"100%",height:"6px",backgroundColor:"#e5e7eb",borderRadius:"3px",overflow:"hidden"},children:(0,d.jsx)("div",{style:{width:"".concat(C,"%"),height:"100%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",transition:"width 0.3s ease"}})})]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"4px",display:"block"},children:"\uae30\ubcf8\uc815\ub2f5:"}),(0,d.jsx)("input",{type:"text",value:(null===(n=_[null===R||void 0===R?void 0:R.id])||void 0===n?void 0:n.\uae30\ubcf8\uc815\ub2f5)||"",onChange:e=>{null!==R&&void 0!==R&&R.id&&A(t=>c(c({},t),{},{[R.id]:c(c({},t[R.id]),{},{"\uae30\ubcf8\uc815\ub2f5":e.target.value})}))},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontFamily:"NanumSquare, sans-serif"},placeholder:"\uae30\ubcf8\uc815\ub2f5\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"4px",display:"block"},children:"\ucd94\uac00\uc815\ub2f5:"}),(0,d.jsx)("input",{type:"text",value:(null===(r=_[null===R||void 0===R?void 0:R.id])||void 0===r?void 0:r.\ucd94\uac00\uc815\ub2f5)||"",onChange:e=>{null!==R&&void 0!==R&&R.id&&A(t=>c(c({},t),{},{[R.id]:c(c({},t[R.id]),{},{"\ucd94\uac00\uc815\ub2f5":e.target.value})}))},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontFamily:"NanumSquare, sans-serif"},placeholder:"\ucd94\uac00\uc815\ub2f5\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"4px",display:"block"},children:"\uac1c\ub150:"}),(0,d.jsx)("input",{type:"text",value:(null===(s=_[null===R||void 0===R?void 0:R.id])||void 0===s?void 0:s.\uac1c\ub150)||"",onChange:e=>{null!==R&&void 0!==R&&R.id&&A(t=>c(c({},t),{},{[R.id]:c(c({},t[R.id]),{},{"\uac1c\ub150":e.target.value})}))},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontFamily:"NanumSquare, sans-serif"},placeholder:"\uac1c\ub150\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"4px",display:"block"},children:"\ubb38\uc81c\uc720\ud615:"}),(0,d.jsx)("input",{type:"text",value:(null===(a=_[null===R||void 0===R?void 0:R.id])||void 0===a?void 0:a.\ubb38\uc81c\uc720\ud615)||"",onChange:e=>{null!==R&&void 0!==R&&R.id&&A(t=>c(c({},t),{},{[R.id]:c(c({},t[R.id]),{},{"\ubb38\uc81c\uc720\ud615":e.target.value})}))},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontFamily:"NanumSquare, sans-serif"},placeholder:"\ubb38\uc81c\uc720\ud615\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"4px",display:"block"},children:"\ud480\uc774\uc804\ub7b5:"}),(0,d.jsx)("textarea",{value:(null===(o=_[null===R||void 0===R?void 0:R.id])||void 0===o?void 0:o.\ud480\uc774\uc804\ub7b5)||"",onChange:e=>{null!==R&&void 0!==R&&R.id&&A(t=>c(c({},t),{},{[R.id]:c(c({},t[R.id]),{},{"\ud480\uc774\uc804\ub7b5":e.target.value})}))},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontFamily:"NanumSquare, sans-serif",height:"60px",resize:"vertical"},placeholder:"\ud480\uc774\uc804\ub7b5\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"4px",display:"block"},children:"\ud480\uc774\uacfc\uc815:"}),(0,d.jsx)("textarea",{value:(null===(l=_[null===R||void 0===R?void 0:R.id])||void 0===l?void 0:l.\ud480\uc774\uacfc\uc815)||"",onChange:e=>{null!==R&&void 0!==R&&R.id&&A(t=>c(c({},t),{},{[R.id]:c(c({},t[R.id]),{},{"\ud480\uc774\uacfc\uc815":e.target.value})}))},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontFamily:"NanumSquare, sans-serif",height:"80px",resize:"vertical"},placeholder:"\ud480\uc774\uacfc\uc815\uc744 \uc785\ub825\ud558\uc138\uc694"})]})]})]})]})})]})]})]}),E&&(0,d.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,d.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",textAlign:"center",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.3)",fontFamily:"NanumSquare, sans-serif"},children:[(0,d.jsx)("div",{style:{width:"64px",height:"64px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",fontSize:"32px"},children:"\u2713"}),(0,d.jsx)("h2",{style:{fontSize:"24px",fontWeight:"800",marginBottom:"16px",color:"#1f2937",fontFamily:"NanumSquare, sans-serif"},children:"\ucc98\ub9ac \uc644\ub8cc"}),(0,d.jsxs)("div",{style:{color:"#374151",fontSize:"16px",marginBottom:"32px",lineHeight:"1.6",fontFamily:"NanumSquare, sans-serif"},children:[null===(h=zm.find(e=>e.id===f))||void 0===h?void 0:h.title," \uad50\uc7ac\uc758 \ud398\uc774\uc9c0 ",m.slice(0,3).join(", ")," \uc678 ",Math.max(m.length-3,0),"\uc7a5\uc5d0 \ub300\ud574",(0,d.jsx)("br",{}),"\ubb38\uc81c\ud3b8\uc9d1 \ubc0f AI \uc790\ub3d9 \ubd84\ub958 \ub370\ubaa8\uac00 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[(0,d.jsx)("button",{onClick:()=>{T(!1),p(1)},style:c(c({},P),{},{background:"rgba(107, 114, 128, 0.1)",color:"#374151",border:"1px solid #d1d5db"}),children:"\ucc98\uc74c\uc73c\ub85c"}),(0,d.jsx)("button",{onClick:()=>T(!1),style:I,children:"\ubb38\uc81c\ud3b8\uc9d1\uc73c\ub85c \ub3cc\uc544\uac00\uae30"})]})]})}),(0,d.jsx)("footer",{style:{maxWidth:"1280px",margin:"0 auto",padding:"40px 16px",fontSize:"12px",color:"#6b7280"},children:"Provider-agnostic demo \xb7 \uc778\ub77c\uc778 \uc2a4\ud0c0\uc77c \xb7 Replace endpoint via REACT_APP_AI_ENDPOINT and set REACT_APP_USE_REAL_AI=true to call real LLM."})]})}const Um=function(){var e,t,n;console.log("App \ucef4\ud3ec\ub10c\ud2b8 \ub80c\ub354\ub9c1 \uc2dc\uc791");const[r,s]=(0,i.useState)("landing"),[a,o]=(0,i.useState)(!1),[l,g]=(0,i.useState)(null),[m,v]=(0,i.useState)(null),b=[{id:1,title:"\uc18c\ub9c8 \ud504\ub9ac\ubbf8\uc5b4 \uad50\uc7ac 1",url:"/somapremier.pdf",type:"pdf"},{id:2,title:"\uc18c\ub9c8 \ud504\ub9ac\ubbf8\uc5b4 \uad50\uc7ac 2(\ucca8\uc0ad)",url:"/somapremier.pdf",type:"pdf"}],[x,y]=(0,i.useState)(b[0].url),[w,k]=(0,i.useState)(0),S=b[w],_=S&&"pdf"===S.type,[A,C]=(0,i.useState)(1),[M,E]=(0,i.useState)(1),[T,R]=(0,i.useState)(2),[j,P]=(0,i.useState)("hand"),[I,L]=(0,i.useState)("#ef4444"),[D,F]=(0,i.useState)(3),[N,B]=(0,i.useState)(!1),[z,W]=(0,i.useState)([]),[O,H]=(0,i.useState)(!1),[U,V]=(0,i.useState)(!1),[G,q]=(0,i.useState)(0),[Y,X]=(0,i.useState)(null),[K,Q]=(0,i.useState)(null),[$,J]=(0,i.useState)(null),[Z,ee]=(0,i.useState)(!1),[te,ne]=(0,i.useState)(!1),[ie,re]=(0,i.useState)(!1),[se,ae]=(0,i.useState)(!1),[oe,le]=(0,i.useState)([]),[ce,de]=(0,i.useState)(null),[he,ue]=(0,i.useState)(null),[pe,fe]=(0,i.useState)(0),[ge,me]=(0,i.useState)(0),ve=e=>{s("student"===e?"login":"teacher"===e?"teacherLogin":"admin")},be=()=>{s("bookList")},xe=()=>{s("teacherBookList")},ye=(e,t)=>{console.log("\ud559\uc0dd \uad50\uc7ac \uc120\ud0dd:",{url:e,index:t,file:b[t]}),y(e),k(t),R(2),s("detail"),E(1),console.log("\ud559\uc0dd \ubc84\uc804 - \ucca8\uc0ad \ubaa8\ub2ec\ucc3d \ud45c\uc2dc \uc548\ud568")},we=(e,t)=>{y(e),k(t),R(2),E(1),s("teacherDetail")},ke=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(g(e),s("teacherAnnotation")):s("teacherSubmission")},Se=()=>{s("teacherBookList"),g(null)},_e=e=>{localStorage.setItem("teacherFeedback",JSON.stringify(e));const t=c(c({},e),{},{studentName:(null===l||void 0===l?void 0:l.studentName)||"\uae40\ud559\uc0dd",studentId:(null===l||void 0===l?void 0:l.studentId)||"student1"});localStorage.setItem("studentFeedback",JSON.stringify(t));const n={id:Date.now(),type:"feedback",title:"\ucca8\uc0ad \uc644\ub8cc",message:'"'.concat(e.bookTitle,'" \uacfc\uc81c \ucca8\uc0ad\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4'),timestamp:(new Date).toISOString(),isRead:!1};le(e=>[n,...e]),Se()},Ae=()=>{s("detail"),v(null)},Ce=()=>{M>1&&E(M-1)},Me=()=>{M<A&&E(M+1)},Ee=e=>P(e),Te=e=>L(e),Re=e=>F(e),je=async()=>{if(N)ce&&"recording"===ce.state&&(ce.stop(),B(!1),console.log("\ub179\uc74c \uc911\uc9c0, \uc2a4\ud2b8\ub85c\ud06c \ub370\uc774\ud130:",z));else try{const e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e),n=[];t.ondataavailable=e=>{e.data.size>0&&n.push(e.data)},t.onstop=()=>{const t=new Blob(n,{type:"audio/wav"}),i=URL.createObjectURL(t);X(i),e.getTracks().forEach(e=>e.stop())},t.start(),de(t),B(!0),W([]),H(!1),V(!1),q(0),console.log("\ub179\uc74c \uc2dc\uc791")}catch(e){console.error("\ub179\uc74c \uad8c\ud55c\uc774 \uac70\ubd80\ub418\uc5c8\uac70\ub098 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4:",e),alert("\ub9c8\uc774\ud06c \uad8c\ud55c\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ube0c\ub77c\uc6b0\uc800 \uc124\uc815\uc5d0\uc11c \ub9c8\uc774\ud06c \uad8c\ud55c\uc744 \ud5c8\uc6a9\ud574\uc8fc\uc138\uc694.")}},Pe=e=>{if(isNaN(e)||!isFinite(e)||e<0)return"0:00";const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))},Ie=async()=>{if(0===z.length&&!Y)return void alert("\uc7ac\uc0dd\ud560 \ub0b4\uc6a9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");V(!0),q(0);const e=document.querySelector("canvas");if(e){e.getContext("2d").clearRect(0,0,e.width,e.height)}if(Y)try{const e=new Audio(Y);ue(e),e.onloadedmetadata=()=>{fe(e.duration)},e.ontimeupdate=()=>{me(e.currentTime)},e.onended=()=>{H(!1),me(0)},e.onerror=e=>{console.error("\uc624\ub514\uc624 \uc7ac\uc0dd \uc624\ub958:",e),H(!1)},H(!0),await e.play()}catch(t){console.error("\uc624\ub514\uc624 \uc7ac\uc0dd \uc624\ub958:",t),H(!1)}if(z.length>0){let t=0;const n=setInterval(()=>{if(t>=z.length)return clearInterval(n),V(!1),void q(100);const i=z[t];if(e){const t=e.getContext("2d");if(t.beginPath(),t.lineWidth=i.brushSize,t.lineCap="round",t.lineJoin="round",t.strokeStyle=i.color,i.points.length>1){t.moveTo(i.points[0].x,i.points[0].y);for(let e=1;e<i.points.length;e++)t.lineTo(i.points[e].x,i.points[e].y);t.stroke()}}t++,q(t/z.length*100)},100)}else V(!1),q(100)},Le=e=>{W(e)};console.log("\ud604\uc7ac \ud398\uc774\uc9c0:",r),console.log("\ud604\uc7ac \uc120\ud0dd\ub41c \ud30c\uc77c:",b[w]),console.log("\ud604\uc7ac URL:",x),console.log("\ud30c\uc77c \ud0c0\uc785:",null===(e=b[w])||void 0===e?void 0:e.type);const De=()=>{s("landing")};return"landing"===r?(0,d.jsx)(h,{onSelectUserType:ve}):"login"===r?(0,d.jsx)(u,{onLogin:be}):"bookList"===r?(0,d.jsx)(p,{files:b,onBookSelect:ye,onBackToLogin:De,feedbackAlert:ie,setFeedbackAlert:re,setTeacherFeedback:J,notifications:oe,setNotifications:le}):"teacherLogin"===r?(0,d.jsx)(Im,{onLogin:xe}):"teacherBookList"===r?(0,d.jsx)(Dm,{files:b,onBookSelect:we,onBackToLogin:De,onGoToSubmissions:ke,notifications:oe,setNotifications:le}):"teacherSubmission"===r?(0,d.jsx)(Lm,{onBackToBookList:()=>s("teacherBookList"),onViewSubmission:ke}):"teacherAnnotation"===r?(0,d.jsx)(Fm,{submission:l,onBackToSubmissions:Se,onSaveFeedback:_e}):"studentFeedback"===r?(0,d.jsx)(Nm,{feedback:m,onBackToStudentPage:Ae}):"admin"===r?(0,d.jsx)(Hm,{}):"teacherDetail"===r?(0,d.jsxs)("div",{className:"App",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%)"},children:[te&&(0,d.jsxs)("div",{style:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white",padding:"1rem 1.5rem",borderRadius:"12px",boxShadow:"0 10px 25px rgba(59, 130, 246, 0.3)",zIndex:1e3,display:"flex",alignItems:"center",gap:"1rem",minWidth:"300px",animation:"slideIn 0.3s ease-out"},children:[(0,d.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.2)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{fontWeight:"bold",fontSize:"1rem"},children:"\ud559\uc0dd \uc81c\ucd9c \uc54c\ub9bc"}),(0,d.jsx)("div",{style:{fontSize:"0.875rem",opacity:.9},children:"\uc0c8\ub85c\uc6b4 \uacfc\uc81c\uac00 \uc81c\ucd9c\ub418\uc5c8\uc2b5\ub2c8\ub2e4"})]}),(0,d.jsx)("button",{onClick:()=>{ne(!1);const e=localStorage.getItem("studentSubmission");if(e){const t=JSON.parse(e);Q(t),s("teacherDetail")}else alert("\uc544\uc9c1 \ud559\uc0dd \uc81c\ucd9c\ubb3c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")},style:{background:"rgba(255, 255, 255, 0.2)",border:"none",color:"white",padding:"0.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem"},children:"\ud655\uc778"})]}),(0,d.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"2px solid rgba(59, 130, 246, 0.3)",padding:"1rem 2rem",boxShadow:"0 4px 12px rgba(30, 58, 138, 0.2)"},children:(0,d.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"2rem"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,d.jsx)("button",{onClick:()=>{s("landing")},style:{background:"linear-gradient(135deg, #6b7280 0%, #4b5563 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 12px rgba(107, 114, 128, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="none"},children:"\u2190 \ud648\uc73c\ub85c"}),(0,d.jsx)("button",{onClick:()=>{s("teacherBookList")},style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="none"},children:"\ud83d\udcda \uad50\uc7ac\ubaa9\ub85d"}),(0,d.jsxs)("h1",{style:{color:"#1e3a8a",fontSize:"1.5rem",fontWeight:"bold",fontFamily:"var(--font-title)"},children:[(null===(Fe=b[w])||void 0===Fe?void 0:Fe.title)||"\uad50\uc7ac \uc0c1\uc138"," - \uac15\uc0ac \ubaa8\ub4dc"]})]}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",background:"rgba(59, 130, 246, 0.1)",padding:"0.5rem 1rem",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.3)"},children:[_&&(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",padding:"0.5rem",backgroundColor:"rgba(59, 130, 246, 0.1)",borderRadius:"8px"},children:[(0,d.jsx)("button",{onClick:Ce,disabled:M<=1,style:{padding:"0.25rem",borderRadius:"6px",border:"1px solid rgba(59, 130, 246, 0.3)",background:M<=1?"rgba(156, 163, 175, 0.3)":"rgba(255, 255, 255, 0.8)",color:M<=1?"#9ca3af":"#3b82f6",cursor:M<=1?"not-allowed":"pointer",transition:"all 0.2s ease"},title:"\uc774\uc804 \ud398\uc774\uc9c0",children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),(0,d.jsxs)("span",{style:{fontSize:"0.875rem",color:"#1e3a8a",fontFamily:"var(--font-ui)",minWidth:"60px",textAlign:"center"},children:[M," / ",A]}),(0,d.jsx)("button",{onClick:Me,disabled:M>=A,style:{padding:"0.25rem",borderRadius:"6px",border:"1px solid rgba(59, 130, 246, 0.3)",background:M>=A?"rgba(156, 163, 175, 0.3)":"rgba(255, 255, 255, 0.8)",color:M>=A?"#9ca3af":"#3b82f6",cursor:M>=A?"not-allowed":"pointer",transition:"all 0.2s ease"},title:"\ub2e4\uc74c \ud398\uc774\uc9c0",children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})})})]}),(0,d.jsx)("div",{style:{display:"flex",gap:"0.5rem"},children:["hand","pen","eraser"].map(e=>(0,d.jsx)("button",{onClick:()=>Ee(e),style:{padding:"0.5rem",borderRadius:"8px",border:j===e?"2px solid #3b82f6":"2px solid rgba(59, 130, 246, 0.3)",background:j===e?"rgba(59, 130, 246, 0.2)":"rgba(255, 255, 255, 0.8)",color:j===e?"#1e3a8a":"#64748b",cursor:"pointer",transition:"all 0.2s ease"},title:"hand"===e?"\uc774\ub3d9":"pen"===e?"\ud39c":"\uc9c0\uc6b0\uac1c",children:(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:["hand"===e&&(0,d.jsx)("path",{d:"M13 1.07V9h7c0-4.08-3.05-7.44-7-7.93zM4 15c0 4.42 3.58 8 8 8s8-3.58 8-8v-4H4v4z"}),"pen"===e&&(0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"eraser"===e&&(0,d.jsx)("path",{d:"M16.24 3.56l4.95 4.94c.78.79.78 2.05 0 2.84L12 20.53a4.008 4.008 0 0 1-5.66 0L2.81 17c-.78-.79-.78-2.05 0-2.84l10.6-10.6c.79-.78 2.05-.78 2.83 0M4.22 15.58l3.54 3.53c.78.79 2.04.79 2.83 0l3.53-3.53-6.36-6.36-3.54 3.36z"})]})},e))}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)("span",{style:{color:"#1e3a8a",fontSize:"0.9rem"},children:"\uc0c9\uc0c1:"}),(0,d.jsx)("div",{style:{display:"flex",gap:"0.25rem"},children:["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#000000"].map(e=>(0,d.jsx)("button",{onClick:()=>Te(e),style:{width:"24px",height:"24px",borderRadius:"50%",border:I===e?"2px solid #3b82f6":"2px solid rgba(59, 130, 246, 0.3)",background:e,cursor:"pointer",transition:"all 0.2s ease"}},e))})]}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)("span",{style:{color:"#1e3a8a",fontSize:"0.9rem"},children:"\ud06c\uae30:"}),(0,d.jsxs)("select",{value:D,onChange:e=>Re(Number(e.target.value)),style:{background:"rgba(255, 255, 255, 0.8)",color:"#1e3a8a",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"6px",padding:"0.25rem 0.5rem",fontSize:"0.9rem"},children:[(0,d.jsx)("option",{value:1,children:"1px"}),(0,d.jsx)("option",{value:3,children:"3px"}),(0,d.jsx)("option",{value:5,children:"5px"}),(0,d.jsx)("option",{value:8,children:"8px"}),(0,d.jsx)("option",{value:12,children:"12px"})]})]})]})]})}),(0,d.jsx)("div",{style:{display:"flex",height:"calc(100vh - 80px)",background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%)"},children:(0,d.jsx)("main",{className:"pdf-viewer-container",style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",padding:"2rem",overflow:"auto"},children:_?(0,d.jsx)(jm,{pdfFileName:S.url.replace("/",""),pageNum:M,zoomScale:T,selectedTool:j,selectedColor:I,brushSize:D,onStrokeDataChange:Le,isRecording:N,studentStrokeData:K?K.strokeData:null,teacherFeedbackData:$?$.feedbackStrokeData:null,showTeacherFeedback:Z,isTeacherMode:!0,isStudentMode:!1,onPageCountChange:C}):(0,d.jsx)(f,{imageUrl:x,zoomScale:T,selectedTool:j,selectedColor:I,brushSize:D,onStrokeDataChange:Le,isRecording:N,studentStrokeData:K?K.strokeData:null,studentAudioUrl:K?K.audioUrl:null,teacherFeedbackData:$?$.feedbackStrokeData:null,showTeacherFeedback:Z,isTeacherMode:!0,isStudentMode:!1})})}),(0,d.jsxs)("div",{className:"floating-panel",style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3},children:[!se&&(0,d.jsx)("button",{onClick:()=>ae(!0),style:{background:"rgba(59, 130, 246, 0.95)",backdropFilter:"blur(10px)",borderRadius:"50%",width:"60px",height:"60px",border:"none",color:"white",cursor:"pointer",boxShadow:"0 8px 32px rgba(59, 130, 246, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.transform="scale(1.1)",e.target.style.backgroundColor="rgba(59, 130, 246, 1)"},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.backgroundColor="rgba(59, 130, 246, 0.95)"},children:(0,d.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),se&&(0,d.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"1rem",boxShadow:"0 8px 32px rgba(30, 58, 138, 0.2)",border:"2px solid rgba(59, 130, 246, 0.3)",minWidth:"220px"},children:[(0,d.jsx)("button",{onClick:()=>ae(!1),style:{position:"absolute",top:"10px",right:"10px",background:"rgba(59, 130, 246, 0.5)",border:"none",borderRadius:"50%",width:"30px",height:"30px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:"\xd7"}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem"},children:[(0,d.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1e3a8a",marginBottom:"0.5rem",fontFamily:"var(--font-ui)"},children:"\ud83d\udc65 \ud559\uc0dd \uc81c\ucd9c\ubb3c"}),(0,d.jsxs)("button",{onClick:()=>{const e=localStorage.getItem("studentSubmission");if(e){const t=JSON.parse(e);Q(t),s("teacherDetail")}else alert("\uc544\uc9c1 \ud559\uc0dd \uc81c\ucd9c\ubb3c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",backgroundColor:"rgba(59, 130, 246, 0.2)",border:"2px solid #3b82f6",color:"#60a5fa",cursor:"pointer",transition:"all 0.2s ease",width:"100%"},onMouseEnter:e=>{e.target.style.backgroundColor="rgba(59, 130, 246, 0.3)",e.target.style.borderColor="#60a5fa"},onMouseLeave:e=>{e.target.style.backgroundColor="rgba(59, 130, 246, 0.2)",e.target.style.borderColor="#3b82f6"},children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),(0,d.jsx)("span",{style:{fontSize:"0.875rem",fontFamily:"var(--font-ui)"},children:"\uc81c\ucd9c\ubb3c \ud655\uc778"})]})]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem"},children:[(0,d.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1e3a8a",marginBottom:"0.5rem",fontFamily:"var(--font-ui)"},children:"\ud83e\udd16 AI \ucca8\uc0ad"}),(0,d.jsxs)("button",{onClick:()=>o(!0),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",backgroundColor:"rgba(139, 92, 246, 0.2)",border:"2px solid #8b5cf6",color:"#a78bfa",cursor:"pointer",transition:"all 0.2s ease",width:"100%"},onMouseEnter:e=>{e.target.style.backgroundColor="rgba(139, 92, 246, 0.3)",e.target.style.borderColor="#a78bfa"},onMouseLeave:e=>{e.target.style.backgroundColor="rgba(139, 92, 246, 0.2)",e.target.style.borderColor="#8b5cf6"},children:[(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsxs)("g",{opacity:"0.9",children:[(0,d.jsx)("rect",{x:"6",y:"12",width:"1.5",height:"3",rx:"0.75",fill:"currentColor"}),(0,d.jsx)("rect",{x:"8",y:"10",width:"1.5",height:"7",rx:"0.75",fill:"currentColor"}),(0,d.jsx)("rect",{x:"10",y:"8",width:"1.5",height:"11",rx:"0.75",fill:"currentColor"}),(0,d.jsx)("rect",{x:"12",y:"6",width:"1.5",height:"15",rx:"0.75",fill:"currentColor"}),(0,d.jsx)("rect",{x:"14",y:"8",width:"1.5",height:"11",rx:"0.75",fill:"currentColor"}),(0,d.jsx)("rect",{x:"16",y:"10",width:"1.5",height:"7",rx:"0.75",fill:"currentColor"}),(0,d.jsx)("rect",{x:"18",y:"12",width:"1.5",height:"3",rx:"0.75",fill:"currentColor"})]}),(0,d.jsx)("g",{opacity:"0.8",children:(0,d.jsx)("path",{d:"M12 2l1.5 4.5L18 8l-4.5 1.5L12 14l-1.5-4.5L6 8l4.5-1.5L12 2z",fill:"currentColor"})})]}),(0,d.jsx)("span",{style:{fontSize:"0.875rem",fontFamily:"var(--font-ui)"},children:"AI \ucca8\uc0ad"})]})]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[(0,d.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1e3a8a",marginBottom:"0.5rem",fontFamily:"var(--font-ui)"},children:"\ud83d\udcca \uc131\uc801 \uad00\ub9ac"}),(0,d.jsxs)("button",{onClick:()=>alert("\uc131\uc801 \uad00\ub9ac \uae30\ub2a5\uc785\ub2c8\ub2e4."),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",backgroundColor:"rgba(16, 185, 129, 0.2)",border:"2px solid #10b981",color:"#34d399",cursor:"pointer",transition:"all 0.2s ease",width:"100%"},onMouseEnter:e=>{e.target.style.backgroundColor="rgba(16, 185, 129, 0.3)",e.target.style.borderColor="#34d399"},onMouseLeave:e=>{e.target.style.backgroundColor="rgba(16, 185, 129, 0.2)",e.target.style.borderColor="#10b981"},children:[(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsx)("path",{d:"M9 12L11 14L15 10"}),(0,d.jsx)("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"})]}),(0,d.jsx)("span",{style:{fontSize:"0.875rem",fontFamily:"var(--font-ui)"},children:"\uc131\uc801 \uc785\ub825"})]})]})]})]}),(0,d.jsx)(Pm,{isOpen:a,onClose:()=>o(!1),bookTitle:(null===(Ne=b[w])||void 0===Ne?void 0:Ne.title)||"\uad50\uc7ac"})]}):(0,d.jsxs)("div",{className:"App",children:[ie&&(0,d.jsxs)("div",{style:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"1rem 1.5rem",borderRadius:"12px",boxShadow:"0 10px 25px rgba(16, 185, 129, 0.3)",zIndex:1e3,display:"flex",alignItems:"center",gap:"1rem",minWidth:"300px",animation:"slideIn 0.3s ease-out"},children:[(0,d.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.2)",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{fontWeight:"bold",fontSize:"1rem"},children:"\uc120\uc0dd\ub2d8 \ucca8\uc0ad \ub3c4\ucc29"}),(0,d.jsx)("div",{style:{fontSize:"0.875rem",opacity:.9},children:"\uc0c8\ub85c\uc6b4 \ucca8\uc0ad\uc774 \ub3c4\ucc29\ud588\uc2b5\ub2c8\ub2e4"})]}),(0,d.jsx)("button",{onClick:()=>{re(!1),s("detail")},style:{background:"rgba(255, 255, 255, 0.2)",border:"none",color:"white",padding:"0.5rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem"},children:"\ud655\uc778"})]}),(0,d.jsx)("div",{style:{background:"linear-gradient(135deg, #fff7ed 0%, #ffedd5 50%, #fed7aa 100%)",padding:"1rem 2rem",borderBottom:"3px solid #f97316",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:"1400px",margin:"0 auto",gap:"2rem"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,d.jsx)("button",{onClick:()=>{s("landing")},style:{background:"linear-gradient(135deg, #6b7280 0%, #4b5563 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.875rem",fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"500",transition:"all 0.2s ease"},onMouseEnter:e=>e.target.style.transform="translateY(-1px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:"\u2190 \ud648\uc73c\ub85c"}),(0,d.jsx)("button",{onClick:()=>{s("bookList")},style:{background:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.875rem",fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"500",transition:"all 0.2s ease"},onMouseEnter:e=>e.target.style.transform="translateY(-1px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:"\ud83d\udcda \uad50\uc7ac\ubaa9\ub85d"}),(0,d.jsx)("h1",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontWeight:"700",fontSize:"1.5rem",color:"#1e293b",margin:"0",background:"linear-gradient(135deg, #f97316, #ea580c)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:(null===(t=b[w])||void 0===t?void 0:t.title)||"\uad50\uc7ac \uc0c1\uc138"})]}),(0,d.jsxs)("div",{className:"toolbar",style:{display:"flex",alignItems:"center",gap:"1rem",background:"rgba(255, 255, 255, 0.8)",padding:"0.5rem 1rem",borderRadius:"12px",border:"1px solid rgba(249, 115, 22, 0.2)"},children:[_&&(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginRight:"1rem",padding:"0.5rem",backgroundColor:"rgba(249, 115, 22, 0.1)",borderRadius:"8px"},children:[(0,d.jsx)("button",{onClick:Ce,disabled:M<=1,style:{padding:"0.25rem",borderRadius:"6px",border:"1px solid rgba(249, 115, 22, 0.3)",background:M<=1?"rgba(156, 163, 175, 0.3)":"rgba(255, 255, 255, 0.8)",color:M<=1?"#9ca3af":"#f97316",cursor:M<=1?"not-allowed":"pointer",transition:"all 0.2s ease"},title:"\uc774\uc804 \ud398\uc774\uc9c0",children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),(0,d.jsxs)("span",{style:{fontSize:"0.875rem",color:"#ea580c",fontFamily:"var(--font-ui)",minWidth:"60px",textAlign:"center"},children:[M," / ",A]}),(0,d.jsx)("button",{onClick:Me,disabled:M>=A,style:{padding:"0.25rem",borderRadius:"6px",border:"1px solid rgba(249, 115, 22, 0.3)",background:M>=A?"rgba(156, 163, 175, 0.3)":"rgba(255, 255, 255, 0.8)",color:M>=A?"#9ca3af":"#f97316",cursor:M>=A?"not-allowed":"pointer",transition:"all 0.2s ease"},title:"\ub2e4\uc74c \ud398\uc774\uc9c0",children:(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})})})]}),(0,d.jsx)("div",{style:{display:"flex",gap:"0.5rem"},children:["hand","pen","eraser"].map(e=>(0,d.jsxs)("button",{onClick:()=>Ee(e),style:{width:"40px",height:"40px",borderRadius:"8px",border:j===e?"2px solid #f97316":"1px solid #e2e8f0",background:j===e?"#fff7ed":"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},title:"hand"===e?"\uc190":"pen"===e?"\ud39c":"\uc9c0\uc6b0\uac1c",children:["hand"===e&&(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",style:{color:"#64748b"},children:(0,d.jsx)("path",{d:"M13 1.07V9h7c0-4.08-3.05-7.44-7-7.93zM4 15c0 4.42 3.58 8 8 8s8-3.58 8-8v-4H4v4z"})}),"pen"===e&&(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",style:{color:"#64748b"},children:(0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})}),"eraser"===e&&(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",style:{color:"#64748b"},children:(0,d.jsx)("path",{d:"M16.24 3.56l4.95 4.94c.78.79.78 2.05 0 2.84L12 20.53a4.008 4.008 0 0 1-5.66 0L2.81 17c-.78-.79-.78-2.05 0-2.84l10.6-10.6c.79-.78 2.05-.78 2.83 0M4.22 15.58l3.54 3.53c.78.79 2.04.79 2.83 0l3.53-3.53-6.36-6.36-3.54 3.36z"})})]},e))}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)("span",{style:{fontSize:"0.8rem",color:"#64748b",fontFamily:"var(--font-ui)"},children:"\uc0c9\uc0c1:"}),(0,d.jsx)("input",{type:"color",value:I,onChange:e=>Te(e.target.value),style:{width:"30px",height:"30px",border:"none",borderRadius:"6px",cursor:"pointer"}})]}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,d.jsx)("span",{style:{fontSize:"0.8rem",color:"#64748b",fontFamily:"var(--font-ui)"},children:"\ud06c\uae30:"}),(0,d.jsxs)("select",{value:D,onChange:e=>Re(Number(e.target.value)),style:{padding:"0.25rem 0.5rem",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"0.8rem",fontFamily:"var(--font-ui)",background:"white"},children:[(0,d.jsx)("option",{value:1,children:"1px"}),(0,d.jsx)("option",{value:3,children:"3px"}),(0,d.jsx)("option",{value:5,children:"5px"}),(0,d.jsx)("option",{value:8,children:"8px"}),(0,d.jsx)("option",{value:12,children:"12px"})]})]})]}),(0,d.jsx)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:(0,d.jsx)("span",{style:{fontFamily:"'SEBANG Gothic', sans-serif",fontSize:"0.875rem",color:"#64748b",background:"rgba(255, 255, 255, 0.7)",padding:"0.25rem 0.75rem",borderRadius:"12px"},children:"\ud559\uc2b5 \ubaa8\ub4dc"})})]})}),(0,d.jsx)("div",{style:{display:"flex",height:"calc(100vh - 80px)",overflow:"hidden",background:"linear-gradient(135deg, #fefefe 0%, #f8fafc 50%, #f1f5f9 100%)"},children:(0,d.jsx)("main",{style:{flex:1,display:"flex",flexDirection:"column",padding:"1.5rem",overflow:"hidden"},children:_?(0,d.jsx)(jm,{pdfFileName:S.url.replace("/",""),pageNum:M,zoomScale:T,selectedTool:j,selectedColor:I,brushSize:D,onStrokeDataChange:Le,isRecording:N,teacherFeedbackData:$?$.feedbackStrokeData:null,showTeacherFeedback:Z,isTeacherMode:!1,isStudentMode:!0,onPageCountChange:C}):(0,d.jsx)(f,{imageUrl:x,zoomScale:T,selectedTool:j,selectedColor:I,brushSize:D,onStrokeDataChange:Le,isRecording:N,studentStrokeData:null,studentAudioUrl:null,teacherFeedbackData:$?$.feedbackStrokeData:null,showTeacherFeedback:Z,isTeacherMode:!1,isStudentMode:!0})})}),(0,d.jsxs)("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3},children:[!se&&(0,d.jsx)("button",{onClick:()=>ae(!0),style:{background:"rgba(31, 41, 55, 0.95)",backdropFilter:"blur(10px)",borderRadius:"50%",width:"60px",height:"60px",border:"none",color:"white",cursor:"pointer",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.transform="scale(1.1)",e.target.style.backgroundColor="rgba(31, 41, 55, 1)"},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.backgroundColor="rgba(31, 41, 55, 0.95)"},children:(0,d.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),se&&(0,d.jsxs)("div",{style:{background:"rgba(31, 41, 55, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"1rem",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(75, 85, 99, 0.3)",minWidth:"220px"},children:[(0,d.jsx)("button",{onClick:()=>ae(!1),style:{position:"absolute",top:"10px",right:"10px",background:"rgba(75, 85, 99, 0.5)",border:"none",borderRadius:"50%",width:"30px",height:"30px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},children:"\xd7"}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem"},children:[(0,d.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#f3f4f6",marginBottom:"0.5rem",fontFamily:"var(--font-ui)"},children:"\ud83c\udf99\ufe0f \ub179\uc74c & \uc7ac\uc0dd"}),(0,d.jsxs)("button",{onClick:je,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",backgroundColor:N?"#1f2937":"#374151",border:N?"2px solid #fbbf24":"2px solid #6b7280",color:N?"#fbbf24":"#f3f4f6",cursor:"pointer",transition:"all 0.2s ease",animation:N?"pulse 2s infinite":"none",width:"100%"},onMouseEnter:e=>{N||(e.target.style.backgroundColor="#1f2937",e.target.style.borderColor="#9ca3af")},onMouseLeave:e=>{N||(e.target.style.backgroundColor="#374151",e.target.style.borderColor="#6b7280")},children:[(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsx)("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),(0,d.jsx)("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]}),(0,d.jsx)("span",{style:{fontSize:"0.875rem",fontFamily:"var(--font-ui)"},children:N?"\ub179\uc74c \uc911\uc9c0":"\ub179\uc74c \uc2dc\uc791"})]}),Y&&!N&&(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",width:"100%"},children:[(0,d.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,d.jsxs)("button",{onClick:Ie,disabled:O||U,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",borderRadius:"8px",backgroundColor:"#1f2937",border:"2px solid #8b5cf6",color:O||U?"#6b7280":"#8b5cf6",cursor:O||U?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:O||U?.6:1,flex:1},onMouseEnter:e=>{O||U||(e.target.style.backgroundColor="#111827",e.target.style.borderColor="#a78bfa")},onMouseLeave:e=>{O||U||(e.target.style.backgroundColor="#1f2937",e.target.style.borderColor="#8b5cf6")},children:[(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M8 5v14l11-7z"})}),(0,d.jsx)("span",{style:{fontSize:"0.75rem",fontFamily:"var(--font-ui)"},children:"\uc7ac\uc0dd"})]}),(0,d.jsxs)("button",{onClick:()=>{he&&(he.pause(),he.currentTime=0,me(0),H(!1)),V(!1),q(0);const e=document.querySelector("canvas");if(e){e.getContext("2d").clearRect(0,0,e.width,e.height)}},disabled:!O&&!U,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",borderRadius:"8px",backgroundColor:"#1f2937",border:"2px solid #ef4444",color:O||U?"#ef4444":"#6b7280",cursor:O||U?"pointer":"not-allowed",transition:"all 0.2s ease",opacity:O||U?1:.6,flex:1},onMouseEnter:e=>{(O||U)&&(e.target.style.backgroundColor="#111827",e.target.style.borderColor="#f87171")},onMouseLeave:e=>{(O||U)&&(e.target.style.backgroundColor="#1f2937",e.target.style.borderColor="#ef4444")},children:[(0,d.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsx)("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"}),(0,d.jsx)("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"})]}),(0,d.jsx)("span",{style:{fontSize:"0.75rem",fontFamily:"var(--font-ui)"},children:"\uc911\uc9c0"})]})]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.7rem",color:"#9ca3af",fontFamily:"var(--font-ui)"},children:[(0,d.jsx)("span",{children:Pe(ge)}),(0,d.jsx)("span",{children:Pe(pe)})]}),(0,d.jsx)("div",{style:{width:"100%",height:"6px",background:"#374151",borderRadius:"3px",overflow:"hidden",cursor:"pointer",position:"relative"},onClick:e=>{if(pe>0){const t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left;(e=>{he&&!isNaN(e)&&isFinite(e)&&e>=0&&(he.currentTime=e,me(e))})(Math.max(0,Math.min(1,n/t.width))*pe)}},children:(0,d.jsx)("div",{style:{width:"".concat(pe>0?ge/pe*100:0,"%"),height:"100%",background:"linear-gradient(90deg, #8b5cf6, #a78bfa)",transition:"width 0.1s ease",position:"relative"},children:(0,d.jsx)("div",{style:{position:"absolute",right:"-6px",top:"50%",transform:"translateY(-50%)",width:"12px",height:"12px",background:"#8b5cf6",borderRadius:"50%",border:"2px solid white",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"}})})})]})]}),(Y||z.length>0)&&!N&&(0,d.jsxs)("button",{onClick:Ie,disabled:U||O,style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",backgroundColor:"#1f2937",border:"2px solid #f59e0b",color:U||O?"#6b7280":"#f59e0b",cursor:U||O?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:U||O?.6:1,width:"100%"},onMouseEnter:e=>{U||O||(e.target.style.backgroundColor="#111827",e.target.style.borderColor="#fbbf24")},onMouseLeave:e=>{U||O||(e.target.style.backgroundColor="#1f2937",e.target.style.borderColor="#f59e0b")},children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M8 5v14l11-7z"})}),(0,d.jsx)("span",{style:{fontSize:"0.875rem",fontFamily:"var(--font-ui)"},children:U||O?"\uc7ac\uc0dd \uc911...":"\ud559\uc2b5 \uc7ac\uc0dd"})]})]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem"},children:[(0,d.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#f3f4f6",marginBottom:"0.5rem",fontFamily:"var(--font-ui)"},children:"\u26a1 \uc561\uc158"}),(Y||z.length>0)&&!N&&(0,d.jsxs)("button",{onClick:()=>{window.confirm("\uc815\ub9d0\ub85c \ub2e4\uc2dc \ub179\uc74c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \ud604\uc7ac \ub179\uc74c\uacfc \ud544\uae30\uac00 \ubaa8\ub450 \uc0ad\uc81c\ub429\ub2c8\ub2e4.")&&(W([]),Y&&(URL.revokeObjectURL(Y),X(null)),H(!1),V(!1),q(0),ue(null),fe(0),me(0),je())},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",backgroundColor:"#1f2937",border:"2px solid #ef4444",color:"#ef4444",cursor:"pointer",transition:"all 0.2s ease",width:"100%"},onMouseEnter:e=>{e.target.style.backgroundColor="#111827",e.target.style.borderColor="#f87171"},onMouseLeave:e=>{e.target.style.backgroundColor="#1f2937",e.target.style.borderColor="#ef4444"},children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,d.jsx)("span",{style:{fontSize:"0.875rem",fontFamily:"var(--font-ui)"},children:"\ub2e4\uc2dc \ub179\uc74c"})]}),(z.length>0||Y)&&!N&&!K&&(0,d.jsxs)("button",{onClick:()=>{var e;if(0===z.length&&!Y)return void alert("\uc81c\ucd9c\ud560 \ud544\uae30\ub098 \ub179\uc74c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const t={id:Date.now(),studentId:"student1",studentName:"\ud559\uc0dd",timestamp:(new Date).toISOString(),strokeData:[...z],audioUrl:Y,bookTitle:(null===(e=b[w])||void 0===e?void 0:e.title)||"\uad50\uc7ac",bookUrl:x};localStorage.setItem("studentSubmission",JSON.stringify(t));const n={id:Date.now(),type:"submission",title:"\uacfc\uc81c \uc81c\ucd9c \uc644\ub8cc",message:'"'.concat(t.bookTitle,'" \uacfc\uc81c\uac00 \uc120\uc0dd\ub2d8\uc5d0\uac8c \uc804\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4'),timestamp:(new Date).toISOString(),isRead:!1};le(e=>[n,...e]),ne(!0)},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",backgroundColor:"#1f2937",border:"2px solid #10b981",color:"#34d399",cursor:"pointer",transition:"all 0.2s ease",width:"100%"},onMouseEnter:e=>{e.target.style.backgroundColor="#111827",e.target.style.borderColor="#34d399"},onMouseLeave:e=>{e.target.style.backgroundColor="#1f2937",e.target.style.borderColor="#10b981"},children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),(0,d.jsx)("span",{style:{fontSize:"0.875rem",fontFamily:"var(--font-ui)"},children:"\uc120\uc0dd\ub2d8\uc5d0\uac8c \uc81c\ucd9c"})]}),"teacherDetail"===r&&(0,d.jsxs)("button",{onClick:()=>{s("teacherDetail")},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",backgroundColor:"#1f2937",border:"2px solid #ef4444",color:"#fca5a5",cursor:"pointer",transition:"all 0.2s ease",width:"100%"},onMouseEnter:e=>{e.target.style.backgroundColor="#111827",e.target.style.borderColor="#fca5a5"},onMouseLeave:e=>{e.target.style.backgroundColor="#1f2937",e.target.style.borderColor="#ef4444"},children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,d.jsx)("span",{style:{fontSize:"0.875rem",fontFamily:"var(--font-ui)"},children:"\ucca8\uc0ad \ud655\uc778 \ubc0f \uc791\uc131"})]}),z.length>0&&!N&&K&&(0,d.jsxs)("button",{onClick:()=>{if(0===z.length)return void alert("\ucca8\uc0ad\ud560 \ub0b4\uc6a9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const e={id:Date.now(),teacherId:"teacher1",teacherName:"\uc120\uc0dd\ub2d8",timestamp:(new Date).toISOString(),feedbackStrokeData:[...z],studentSubmissionId:null===K||void 0===K?void 0:K.id,bookTitle:(null===K||void 0===K?void 0:K.bookTitle)||"\uad50\uc7ac",bookUrl:(null===K||void 0===K?void 0:K.bookUrl)||x};localStorage.setItem("teacherFeedback",JSON.stringify(e));const t={id:Date.now(),type:"feedback",title:"\ucca8\uc0ad \uc644\ub8cc",message:'"'.concat(e.bookTitle,'" \uacfc\uc81c \ucca8\uc0ad\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4'),timestamp:(new Date).toISOString(),isRead:!1};le(e=>[t,...e]),re(!0),alert("\ud559\uc0dd\uc5d0\uac8c \ucca8\uc0ad\uc774 \uc804\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",backgroundColor:"#1f2937",border:"2px solid #3b82f6",color:"#60a5fa",cursor:"pointer",transition:"all 0.2s ease",width:"100%"},onMouseEnter:e=>{e.target.style.backgroundColor="#111827",e.target.style.borderColor="#60a5fa"},onMouseLeave:e=>{e.target.style.backgroundColor="#1f2937",e.target.style.borderColor="#3b82f6"},children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),(0,d.jsx)("span",{style:{fontSize:"0.875rem",fontFamily:"var(--font-ui)"},children:"\ud559\uc0dd\uc5d0\uac8c \ucca8\uc0ad \uc804\uc1a1"})]})]}),$&&(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem"},children:[(0,d.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#f3f4f6",marginBottom:"0.5rem",fontFamily:"var(--font-ui)"},children:"\uc120\uc0dd\ub2d8 \ucca8\uc0ad"}),(0,d.jsxs)("button",{onClick:()=>ee(!Z),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",backgroundColor:"#1f2937",border:Z?"2px solid #10b981":"2px solid #6b7280",color:Z?"#10b981":"#f3f4f6",cursor:"pointer",transition:"all 0.2s ease",width:"100%"},onMouseEnter:e=>{e.target.style.backgroundColor="#111827",e.target.style.borderColor=Z?"#10b981":"#9ca3af"},onMouseLeave:e=>{e.target.style.backgroundColor="#1f2937",e.target.style.borderColor=Z?"#10b981":"#6b7280"},children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})}),(0,d.jsx)("span",{style:{fontSize:"0.875rem",fontFamily:"var(--font-ui)"},children:Z?"\ucca8\uc0ad \uc228\uae30\uae30":"\ucca8\uc0ad \ubcf4\uae30"})]})]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem"},children:[(0,d.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#f3f4f6",marginBottom:"0.5rem",fontFamily:"var(--font-ui)"},children:"\ucca8\uc0ad \ud655\uc778"}),(0,d.jsxs)("button",{onClick:()=>{const e=localStorage.getItem("studentFeedback");if(e){const t=JSON.parse(e);v(t),s("studentFeedback")}else alert("\uc544\uc9c1 \uc120\uc0dd\ub2d8\uc758 \ucca8\uc0ad\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",backgroundColor:"#1f2937",border:"2px solid #8b5cf6",color:"#8b5cf6",cursor:"pointer",transition:"all 0.2s ease",width:"100%"},onMouseEnter:e=>{e.target.style.backgroundColor="#111827",e.target.style.borderColor="#a78bfa"},onMouseLeave:e=>{e.target.style.backgroundColor="#1f2937",e.target.style.borderColor="#8b5cf6"},children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,d.jsx)("span",{style:{fontSize:"0.875rem",fontFamily:"var(--font-ui)"},children:"\ucca8\uc0ad \ud655\uc778\ud558\uae30"})]})]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[(0,d.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#f3f4f6",marginBottom:"0.5rem",fontFamily:"var(--font-ui)"},children:"\ud83e\udd16 AI \ub3c4\uc6b0\ubbf8"}),(0,d.jsxs)("button",{onClick:()=>{console.log("AI \ubc84\ud2bc \ud074\ub9ad"),o(!0)},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",borderRadius:"12px",backgroundColor:"#1f2937",border:"2px solid #4b5563",color:"#f3f4f6",cursor:"pointer",transition:"all 0.2s ease",width:"100%"},onMouseEnter:e=>{e.target.style.backgroundColor="#111827",e.target.style.borderColor="#6b7280"},onMouseLeave:e=>{e.target.style.backgroundColor="#1f2937",e.target.style.borderColor="#4b5563"},children:[(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,d.jsxs)("g",{opacity:"0.9",children:[(0,d.jsx)("rect",{x:"6",y:"12",width:"1.5",height:"3",rx:"0.75",fill:"currentColor"}),(0,d.jsx)("rect",{x:"8",y:"10",width:"1.5",height:"7",rx:"0.75",fill:"currentColor"}),(0,d.jsx)("rect",{x:"10",y:"8",width:"1.5",height:"11",rx:"0.75",fill:"currentColor"}),(0,d.jsx)("rect",{x:"12",y:"6",width:"1.5",height:"15",rx:"0.75",fill:"currentColor"}),(0,d.jsx)("rect",{x:"14",y:"8",width:"1.5",height:"11",rx:"0.75",fill:"currentColor"}),(0,d.jsx)("rect",{x:"16",y:"10",width:"1.5",height:"7",rx:"0.75",fill:"currentColor"}),(0,d.jsx)("rect",{x:"18",y:"12",width:"1.5",height:"3",rx:"0.75",fill:"currentColor"})]}),(0,d.jsx)("g",{opacity:"0.8",children:(0,d.jsx)("path",{d:"M12 2l1.5 4.5L18 8l-4.5 1.5L12 14l-1.5-4.5L6 8l4.5-1.5L12 2z",fill:"currentColor"})})]}),(0,d.jsx)("span",{style:{fontSize:"0.875rem",fontFamily:"var(--font-ui)"},children:"AI \ucc57\ubd07"})]})]})]})]}),U&&(0,d.jsxs)("div",{style:{position:"fixed",bottom:"100px",right:"20px",background:"rgba(31, 41, 55, 0.9)",color:"white",padding:"1rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:1001,minWidth:"200px"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,d.jsx)("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#f59e0b",animation:"pulse 1s infinite"}}),(0,d.jsx)("span",{style:{fontSize:"0.9rem",fontFamily:"var(--font-ui)"},children:"\ud544\uae30 \uc7ac\uc0dd \uc911..."})]}),(0,d.jsx)("div",{style:{width:"100%",height:"4px",background:"#374151",borderRadius:"2px",overflow:"hidden"},children:(0,d.jsx)("div",{style:{width:"".concat(G,"%"),height:"100%",background:"linear-gradient(90deg, #f59e0b, #fbbf24)",transition:"width 0.1s ease"}})}),(0,d.jsxs)("div",{style:{fontSize:"0.8rem",color:"#9ca3af",marginTop:"0.25rem",textAlign:"center",fontFamily:"var(--font-ui)"},children:[Math.round(G),"% \uc644\ub8cc"]})]}),(0,d.jsx)(Pm,{isOpen:a,onClose:()=>o(!1),bookTitle:(null===(n=b[w])||void 0===n?void 0:n.title)||"\uad50\uc7ac"}),(0,d.jsx)("style",{jsx:!0,children:"\n        @keyframes pulse {\n          0% {\n            box-shadow: 0 4px 12px rgba(31, 41, 55, 0.4), 0 0 0 4px rgba(251, 191, 36, 0.2);\n          }\n          50% {\n            box-shadow: 0 4px 12px rgba(31, 41, 55, 0.6), 0 0 0 8px rgba(251, 191, 36, 0.1);\n          }\n          100% {\n            box-shadow: 0 4px 12px rgba(31, 41, 55, 0.4), 0 0 0 4px rgba(251, 191, 36, 0.2);\n          }\n        }\n\n        /* \uc544\uc774\ud328\ub4dc\uc6a9 \ubc18\uc751\ud615 \uc2a4\ud0c0\uc77c */\n        @media (max-width: 1024px) and (min-width: 768px) {\n          .pdf-viewer-container {\n            padding: 0.5rem !important;\n          }\n          \n          .pdf-canvas {\n            max-width: 100% !important;\n            height: auto !important;\n          }\n          \n          .floating-panel {\n            position: fixed !important;\n            bottom: 1rem !important;\n            right: 1rem !important;\n            left: 1rem !important;\n            width: auto !important;\n            max-width: none !important;\n            padding: 1rem !important;\n          }\n          \n          .toolbar {\n            flex-wrap: wrap !important;\n            gap: 0.5rem !important;\n            padding: 0.75rem !important;\n          }\n          \n          .toolbar-button {\n            min-width: 44px !important;\n            min-height: 44px !important;\n            padding: 0.5rem !important;\n            font-size: 0.875rem !important;\n          }\n          \n          .modal-content {\n            max-width: 95% !important;\n            max-height: 90% !important;\n            padding: 1.5rem !important;\n            margin: 1rem !important;\n          }\n          \n          .modal-title {\n            font-size: 1.5rem !important;\n          }\n          \n          .modal-button {\n            padding: 0.75rem 1.5rem !important;\n            font-size: 1rem !important;\n            min-height: 44px !important;\n          }\n        }\n\n        /* \ubaa8\ubc14\uc77c\uc6a9 \ubc18\uc751\ud615 \uc2a4\ud0c0\uc77c */\n        @media (max-width: 767px) {\n          .pdf-viewer-container {\n            padding: 0.25rem !important;\n          }\n          \n          .floating-panel {\n            position: fixed !important;\n            bottom: 0.5rem !important;\n            right: 0.5rem !important;\n            left: 0.5rem !important;\n            width: auto !important;\n            max-width: none !important;\n            padding: 0.75rem !important;\n          }\n          \n          .toolbar {\n            flex-wrap: wrap !important;\n            gap: 0.25rem !important;\n            padding: 0.5rem !important;\n          }\n          \n          .toolbar-button {\n            min-width: 40px !important;\n            min-height: 40px !important;\n            padding: 0.375rem !important;\n            font-size: 0.75rem !important;\n          }\n          \n          .modal-content {\n            max-width: 98% !important;\n            max-height: 95% !important;\n            padding: 1rem !important;\n            margin: 0.5rem !important;\n          }\n          \n          .modal-title {\n            font-size: 1.25rem !important;\n          }\n          \n          .modal-button {\n            padding: 0.625rem 1rem !important;\n            font-size: 0.875rem !important;\n            min-height: 40px !important;\n          }\n        }\n      "})]});var Fe,Ne},Vm=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:a}=t;n(e),i(e),r(e),s(e),a(e)})};r.createRoot(document.getElementById("root")).render((0,d.jsx)(i.StrictMode,{children:(0,d.jsx)(Um,{})})),Vm()})();
//# sourceMappingURL=main.a565b59d.js.map